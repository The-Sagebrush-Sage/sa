<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artemisia</title>
    <link rel="icon" href="https://i.postimg.cc/zXXhVbHv/11.png" type="image/x-icon">
    <link rel="stylesheet" href="proba.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Comfortaa", sans-serif;
            font-size: 16px;
            background-color: #262626;
            color: white;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        body.no-scroll {
            position: fixed;
            width: 100%;
            overflow: hidden;
        }

        /* Header Styles */
        header {
            background-color: #1f1f1f;
            color: white;
            padding: 10px 15px;
            width: 100%;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            z-index: 1000;
            position: fixed;
            top: 0;
            left: 0;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-icon {
            width: 30px;
            height: 30px;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .menu-icon span {
            width: 100%;
            height: 3px;
            background-color: white;
            transition: all 0.3s ease;
        }

        .menu-icon.active span:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }

        .menu-icon.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-icon.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .logo {
            height: 45px;
            width: auto;
            object-fit: contain;
        }

        @media (max-width: 768px) {
            .logo {
                height: 45px;
            }
        }

        @media (max-width: 480px) {
            .logo {
                height: 40px;
            }
        }

        @media (max-width: 320px) {
            .logo {
                height: 36px;
            }
        }

        /* New Search Styles */
        .search-container {
            position: relative;
            flex-grow: 1;
            max-width: 600px;
            margin: 0 20px;
        }

        .search-box {
            display: flex;
            width: 100%;
            position: relative;
        }

        #searchInput {
            flex-grow: 1;
            padding: 12px 20px 12px 45px;
            border: none;
            border-radius: 30px;
            background-color: #333;
            color: #e0e0e0;
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
            font-family: "Comfortaa", sans-serif;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        #searchInput:focus {
            background-color: #3a3a3a;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            pointer-events: none;
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #ffcc00;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            color: #262626;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .search-btn:hover {
            background-color: #ffdd33;
            transform: translateY(-50%) scale(1.05);
        }

        .search-results {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            right: 0;
            background: #2d2d2d;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .search-results.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .search-result-item {
            padding: 12px 20px;
            border-bottom: 1px solid #3a3a3a;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
        }

        .search-result-item:hover {
            background-color: #3a3a3a;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 12px;
            object-fit: cover;
        }

        .search-result-item .info {
            flex: 1;
        }

        .search-result-item .name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .search-result-item .style {
            font-size: 0.85em;
            color: #aaa;
        }

        .highlight {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }

        .artist-highlight {
            animation: highlightFade 3s ease-out;
            position: relative;
        }

        @keyframes highlightFade {
            0% {
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.8);
                transform: scale(1.02);
            }

            100% {
                box-shadow: 0 0 5px rgba(255, 204, 0, 0);
                transform: scale(1);
            }
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: #ff6b6b;
            font-weight: bold;
        }

        .mobile-search-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            margin-left: 10px;
        }

        /* Improved Mobile Search */
        @media (max-width: 768px) {
            .search-container {
                position: fixed;
                top: 10px;
                left: 10px;
                right: 10px;
                margin: 0;
                padding: 0;
                background: transparent;
                display: none;
                z-index: 1001;
                max-width: none;
            }

            .search-container.active {
                display: block;
                animation: slideDown 0.3s ease-out;
            }

            .mobile-search-btn {
                display: block;
            }

            #searchInput {
                padding: 14px 20px 14px 50px;
                font-size: 16px;
                border-radius: 30px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            }

            .search-icon {
                left: 20px;
                font-size: 18px;
            }

            .search-btn {
                width: 40px;
                height: 40px;
            }

            .search-results {
                position: fixed;
                top: 80px;
                left: 10px;
                right: 10px;
                max-height: calc(100vh - 100px);
                border-radius: 10px;
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        }

        /* Mobile search backdrop */
        .search-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .search-backdrop.active {
                display: block;
            }
        }

        /* Drawer Menu Styles */
        .drawer {
            position: fixed;
            left: -250px;
            top: 60px;
            width: 250px;
            height: calc(100vh - 60px);
            background: #1f1f1f;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            z-index: 999;
            overflow-y: auto;
            will-change: transform;
            margin: 0;
            padding: 0;
        }

        .drawer.open {
            transform: translateX(250px);
        }

        .overlay {
            position: fixed;
            top: 60px;
            left: 0;
            width: 100%;
            height: calc(100% - 60px);
            background: rgba(0, 0, 0, 0.5);
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 998;
            pointer-events: none;
        }

        .overlay.active {
            visibility: visible;
            opacity: 1;
            pointer-events: auto;
        }

        /* Заменить стиль для body.menu-open */
        body.menu-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }

        .menu {
            font-size: 18px;
            list-style: none;
            padding: 20px;
            margin: 0;
        }

        .menu li {
            position: relative;
            margin: 10px 0;
        }

        .menu a {
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            padding: 12px;
            transition: 0.2s;
            border-radius: 4px;
        }

        .menu a:hover {
            background: #2d2d2d;
        }

        .menu img {
            width: 28px;
            height: 28px;
            margin-right: 12px;
            object-fit: contain;
            transition: 0.3s;
        }

        .menu span {
            margin-left: 12px;
            transition: 0.3s;
        }

        .submenu {
            list-style: none;
            padding-left: 15px;
            max-height: 0;
            overflow: hidden;
            transition: 0.3s;
            background: #2d2d2d;
            margin-top: 5px;
            border-radius: 4px;
        }

        .submenu.active {
            max-height: 200px;
        }

        .submenu a {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            padding: 8px;
        }

        .submenu-link:hover {
            color: #ffcc00;
            text-decoration: underline;
        }

        .has-submenu::after {
            content: '▼';
            margin-left: auto;
            font-size: 12px;
            transition: 0.2s;
            color: white;
        }

        .has-submenu.active::after {
            transform: rotate(180deg);
        }

        .separator-menu {
            border-top: 2px solid #fff;
            margin: 10px 0;
        }

        /* Мобильный профиль пользователя */
        .mobile-user-profile {
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px 15px;
            background: rgba(255, 204, 0, 0.1);
            border-bottom: 1px solid rgba(255, 204, 0, 0.2);
            margin-bottom: 15px;
        }

        .mobile-user-profile.active {
            display: flex;
        }

        .mobile-user-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ffcc00;
            margin-bottom: 10px;
        }

        .mobile-user-info {
            text-align: center;
            margin-bottom: 15px;
        }

        .mobile-user-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffcc00;
            margin-bottom: 5px;
        }

        .mobile-user-telegram {
            color: #aaa;
            font-size: 0.9em;
        }

        .mobile-user-actions {
            display: flex;
            gap: 10px;
            width: 100%;
        }

        .mobile-profile-btn {
            flex: 1;
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 10px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .mobile-profile-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 204, 0, 0.3);
        }

        .mobile-logout-btn {
            flex: 1;
            background: transparent;
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
            padding: 10px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .mobile-logout-btn:hover {
            background: rgba(255, 107, 107, 0.1);
        }

        @media (max-width: 768px) {
            .mobile-user-profile {
                display: flex;
            }
        }

        /* Banner Styles */
        .banner {
            width: 100%;
            height: 300px;
            overflow: hidden;
            position: relative;
            margin-top: 60px;
        }

        .banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @media (max-width: 1024px) {
            .banner {
                height: 300px;
            }
        }

        @media (max-width: 996px) {
            .banner {
                height: 300px;
            }
        }

        @media (max-width: 790px) {
            .banner {
                height: 290px;
            }
        }

        @media (max-width: 600px) {
            .banner {
                height: 200px;
            }
        }

        @media (max-width: 390px) {
            .banner {
                height: 140px;
            }
        }

        .black-stripe {
            width: 100%;
            height: 4px;
            background-color: #2d2d2d;
        }

        /* Filters Styles */
        .filters-container {
            position: relative;
            margin: 20px 20px 0 0;
            display: flex;
            justify-content: flex-end;
        }

        .filters-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #ffcc00;
            color: #262626;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .filters-button:hover {
            background: #ffdd33;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .filters-dropdown {
            display: none;
            position: absolute;
            top: 45px;
            right: 0;
            background: #333;
            border-radius: 10px;
            padding: 10px 0;
            width: 200px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }

        .filters-dropdown.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .filters-dropdown a {
            display: block;
            color: #e0e0e0;
            padding: 12px 20px;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .filters-dropdown a:hover {
            background: #3a3a3a;
            color: #ffcc00;
            padding-left: 25px;
        }

        .active-filter {
            color: #ffcc00 !important;
            background: #404040 !important;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Filters Styles */
        .filters-container {
            position: relative;
            margin: 20px 20px 0 0;
            display: flex;
            justify-content: flex-end;
            z-index: 500;
            /* Добавляем z-index для правильного отображения */
        }

        .filters-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #ffcc00;
            color: #262626;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            font-size: 16px;
            /* Добавляем явный размер шрифта */
        }

        .filters-button svg {
            width: 16px;
            height: 16px;
            transition: all 0.3s ease;
        }

        /* Адаптация для планшетов */
        @media (max-width: 768px) {
            .filters-container {
                margin: 15px 15px 0 0;
            }

            .filters-button {
                padding: 8px 16px;
                font-size: 14px;
            }

            .filters-button svg {
                width: 14px;
                height: 14px;
            }
        }

        /* Адаптация для мобильных */
        @media (max-width: 480px) {
            .filters-container {
                margin: 10px 10px 0 0;
            }

            .filters-button {
                padding: 6px 12px;
                font-size: 12px;
                gap: 6px;
            }

            .filters-button svg {
                width: 12px;
                height: 12px;
            }

            .filters-dropdown {
                width: 160px;
                /* Уменьшаем ширину выпадающего меню */
                top: 40px;
                /* Корректируем позицию */
            }

            .filters-dropdown a {
                padding: 10px 15px;
                font-size: 12px;
            }
        }

        /* Artist Profile Styles */
        .profile-section {
            display: flex;
            align-items: center;
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            background-color: #2d2d2d;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-top: 30px;
            transition: all 0.5s ease;
            opacity: 1;
            transform: translateY(0);
        }

        .profile-section.hidden {
            opacity: 0;
            transform: translateY(-20px);
            height: 0;
            padding: 0;
            margin: 0;
            pointer-events: none;
            overflow: hidden;
            border: none;
        }

        .avatar {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin-right: 16px;
            object-fit: cover;
            border: 4px solid #ffcc00;
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.4),
                0 0 0 8px rgba(45, 45, 45, 0.7);
            filter: brightness(1.05) contrast(1.1);
            position: relative;
            z-index: 2;
        }

        .avatar-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin-right: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }

        .avatar-border {
            position: absolute;
            width: calc(100% + 12px);
            height: calc(100% + 12px);
            border-radius: 50%;
            background: linear-gradient(45deg,
                    #ff0000, #ff7300, #fffb00, #48ff00,
                    #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
            background-size: 400% 400%;
            animation: gradientBorder 8s ease infinite;
            z-index: 1;
            filter: blur(5px);
            opacity: 0.7;
        }

        .avatar-border::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: linear-gradient(45deg,
                    #ff0000, #ff7300, #fffb00, #48ff00,
                    #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
            background-size: 400% 400%;
            animation: gradientBorder 8s ease infinite;
            z-index: -1;
            filter: blur(10px);
            opacity: 0.5;
        }

        @keyframes gradientBorder {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .avatar:hover {
            transform: scale(1.03);
        }

        /* Стили для кнопки профиля */
        .profile-button {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ffcc00;
            color: #262626;
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.3s ease;
            cursor: pointer;
            z-index: 3;
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .avatar-container:hover .profile-button {
            opacity: 1;
            bottom: -15px;
        }

        .avatar-container {
            cursor: pointer;
            position: relative;
        }

        .avatar-container:hover .avatar {
            transform: scale(1.03);
        }

        @media (max-width: 768px) {

            .profile-button {
                font-size: 0.8rem;
                padding: 5px 12px;
            }
        }

        @media (max-width: 480px) {

            .profile-button {
                font-size: 0.7rem;
                padding: 4px 10px;
                opacity: 1;
                bottom: -10px;
            }
        }

        /* Адаптация для мобильных устройств */
        @media (max-width: 768px) {
            .profile-section {
                flex-direction: column;
                text-align: center;
                padding: 30px 15px;
                min-height: auto;
            }

            .avatar-container {
                margin-right: 0;
                margin-bottom: 20px;
            }

            .profile-info {
                padding: 0;
            }
        }

        @media (max-width: 480px) {
            .avatar-container {
                width: 120px;
                height: 120px;
            }

            .avatar {
                width: 120px;
                height: 120px;
                border-width: 3px;
            }
        }

        .profile-info {
            flex: 1;
        }

        .profile-info h1 {
            font-size: 2em;
            margin-bottom: 10px;
            color: #ffcc00;
            word-break: break-word;
        }

        .profile-info a {
            color: #ffcc00;
            text-decoration: none;
            font-size: 1.2em;
            display: block;
            margin-bottom: 10px;
            transition: opacity 0.3s;
            word-break: break-all;
        }

        .profile-info a:hover {
            opacity: 0.8;
            text-decoration: underline;
        }

        .profile-info p {
            font-size: 1.1em;
            color: #e0e0e0;
            word-break: break-word;
        }

        .favorite-works {
            text-align: center;
            padding: 30px 0 20px;
            width: 100%;
            color: white;
            font-size: 2em;
            margin-top: 30px;
            transition: all 0.5s ease;
            word-break: break-word;
        }

        .favorite-works.hidden {
            opacity: 0;
            height: 0;
            padding: 0;
            margin: 0;
            pointer-events: none;
            overflow: hidden;
        }

        /* Works Carousel Styles */
        .works-carousel {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            padding: 0 60px;
            transition: all 0.5s ease;
        }

        .works-carousel.hidden {
            opacity: 0;
            height: 0;
            padding: 0;
            margin: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .works-inner {
            display: flex;
            transition: transform 0.5s ease;
            will-change: transform;
            padding: 20px 0;
            gap: 20px;
        }

        .work-thumb {
            width: 400px;
            height: 260px;
            object-fit: scale-down;
            border-radius: 10px;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .work-thumb-1 {
            width: 300px;
            height: 260px;
            object-fit: cover;
            border-radius: 10px;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .work-thumb-2 {
            width: 300px;
            height: 260px;
            object-fit: cover;
            border-radius: 10px;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .work-thumb-3 {
            width: 200px;
            height: 260px;
            object-fit: cover;
            border-radius: 10px;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .work-thumb-1:hover,
        .work-thumb:hover,
        .work-thumb-2:hover,
        .work-thumb-3:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .works-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            z-index: 10;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .works-control:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        .works-control.prev {
            left: 10px;
        }

        .works-control.next {
            right: 10px;
        }

        /* Show Works Button */
        .show-works-btn {
            display: block;
            margin: 20px auto;
            padding: 12px 30px;
            background: #ffcc00;
            color: #262626;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 25px;
            transition: all 0.5s ease;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 90%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .show-works-btn.hidden {
            opacity: 0;
            height: 0;
            padding: 0;
            margin: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .show-works-btn:hover {
            background: #ffdd33;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            overflow-y: auto;
            z-index: 1000;
            padding: 20px;
        }

        .modal-header {
            color: white;
            text-align: center;
            padding: 30px 20px 20px;
            font-size: 24px;
        }

        .modal-content {
            max-width: 1200px;
            margin: 0 auto 40px;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .modal-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .modal-img:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .close-btn {
            position: fixed;
            top: 20px;
            right: 35px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 1001;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #ffcc00;
            text-decoration: none;
            cursor: pointer;
        }

        /* Image Modal Styles - ОБНОВЛЕННЫЕ СТИЛИ */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1100;
            overflow: hidden;
            touch-action: none;
        }

        .image-modal-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-modal-img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            transition: transform 0.3s ease;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            cursor: grab;
        }

        .image-modal-img:active {
            cursor: grabbing;
        }

        .image-close-btn {
            position: fixed;
            top: 20px;
            right: 35px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 1101;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-close-btn:hover {
            color: #ffcc00;
            background: rgba(255, 204, 0, 0.2);
        }

        .modal-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1101;
            opacity: 0.6;
            transition: opacity 0.2s;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            width: 60px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .modal-nav-btn:hover {
            opacity: 1;
            background: rgba(0, 0, 0, 0.7);
        }

        .modal-prev {
            left: 20px;
        }

        .modal-next {
            right: 20px;
        }

        .image-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 15px;
            border-radius: 20px;
            z-index: 1101;
        }

        @keyframes zoom {
            from {
                transform: scale(0);
            }

            to {
                transform: scale(1);
            }
        }

        /* Footer */
        .footer-container {
            background-color: #1f1f1f;
            padding: 30px 15px;
            margin-top: auto;
            width: 100%;
        }

        .footer-main-section {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        .footer-brand-link {
            display: inline-block;
            transition: transform 0.3s ease;
        }

        .footer-brand-link:hover {
            transform: scale(1.05);
        }

        .footer-brand-logo {
            height: 36px;
            width: auto;
        }

        .footer-navigation {
            display: flex;
            gap: 20px;
        }

        .footer-nav-item {
            color: #aaa;
            text-decoration: none;
            font-size: 0.9rem;
            position: relative;
            padding: 5px 0;
            transition: color 0.3s ease;
        }

        .footer-nav-item:hover {
            color: #FFD700;
        }

        .footer-nav-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background-color: #FFD700;
            transition: width 0.3s ease;
        }

        .footer-nav-item:hover::after {
            width: 100%;
        }

        .footer-secondary-section {
            max-width: 1200px;
            margin: 20px auto 0;
            text-align: center;
        }

        .footer-copyright {
            color: #aaa;
            font-size: 0.85rem;
        }

        .footer-social-links {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 15px;
        }

        .social-media-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .social-media-icon:hover {
            background-color: #FFD700;
            transform: translateY(-3px);
        }

        .social-media-icon:hover svg {
            fill: #333;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .footer-main-section {
                flex-direction: column;
                gap: 15px;
            }

            .footer-navigation {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
        }

        /* Back to Top Button */
        .back-to-top-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background-color: #ffcc00;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .back-to-top-btn:hover {
            background-color: #ffdd33;
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .back-to-top-btn.active {
            opacity: 1;
            visibility: visible;
        }

        /* Social Links */
        .social-links {
            --icon-size: 2rem;
            --icon-gap: 0.75rem;
            --hover-scale: 1.15;
            --active-scale: 0.95;
            --transition-duration: 0.2s;

            display: flex;
            gap: var(--icon-gap);
            margin: 1rem 0 0;
            padding: 0;
            list-style: none;
            justify-content: flex-start;
            flex-wrap: wrap;
            width: 100%;
        }

        .social-link {
            display: block;
            width: var(--icon-size);
            height: var(--icon-size);
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            transform: scale(1);
            transition:
                transform var(--transition-duration) ease,
                filter var(--transition-duration) ease;
            will-change: transform;
            filter: grayscale(20%) brightness(0.9);
        }

        .social-icon {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .social-link:hover {
            transform: scale(var(--hover-scale));
            filter: grayscale(0%) brightness(1.05);
            z-index: 1;
        }

        .social-link:active {
            transform: scale(var(--active-scale));
        }

        @media (max-width: 768px) {

            /* Центрирование Telegram ссылки в профиле */
            .profile-link {
                justify-content: center;
                text-align: center;
                margin-left: 0;
                margin-right: 0;
            }

            /* Центрирование иконки Telegram в профиле */
            .profile-link-icon {
                margin-left: 8px;
                margin-right: 0;
            }

            /* Центрирование Telegram в мобильном профиле */
            .mobile-user-telegram {
                text-align: center;
                width: 100%;
                display: block;
            }

            /* Центрирование социальных ссылок на мобильных */
            .social-links {
                justify-content: center;
                padding: 10px 0;
            }

            /* Центрирование Telegram в личном кабинете на мобильных */
            .cabinet-telegram-link {
                justify-content: center;
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* Profile Link */
        .profile-link {
            color: #ffcc00;
            text-decoration: none;
            font-size: 1.2em;
            display: inline-flex;
            align-items: center;
            margin-bottom: 15px;
            transition: all 0.3s;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .profile-link:hover {
            color: #fff;
            text-decoration: underline;
        }

        .profile-link-icon {
            width: 20px;
            height: 20px;
            margin-left: 8px;
            filter: brightness(0.9);
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .work-thumb {
                width: 220px;
                height: 220px;
            }

            .work-thumb-1 {
                width: 300px;
                height: 220px;
            }

            .work-thumb-2 {
                width: 220px;
                height: 220px;
            }

            .work-thumb-3 {
                width: 220px;
                height: 220px;
            }
        }

        @media (max-width: 900px) {
            .footer-links {
                gap: 25px;
            }
        }

        @media (max-width: 768px) {
            .profile-section {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 30px 15px;
            }

            .avatar {
                width: 150px;
                height: 150px;
                margin: 0 0 20px 0;
            }

            .profile-info h1 {
                font-size: 1.8em;
            }

            .profile-info a {
                font-size: 1em;
            }

            .profile-info p {
                font-size: 1em;
            }

            .favorite-works {
                font-size: 1.8em;
                padding: 25px 0 15px;
            }

            .modal-header {
                font-size: 20px;
                padding: 20px 15px;
            }

            .modal-content {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
            }

            .modal-img {
                height: 200px;
            }

            .works-carousel {
                padding: 0 15px !important;
            }

            .work-thumb {
                width: 180px;
                height: 180px;
            }

            .work-thumb-1 {
                width: 260px;
                height: 180px;
            }

            .work-thumb-2 {
                width: 180px;
                height: 180px;
            }

            .work-thumb-3 {
                width: 180px;
                height: 180px;
            }

            .works-control {
                display: none !important;
            }

            .footer-content {
                flex-direction: column;
                gap: 30px;
                text-align: center;
                padding-bottom: 30px;
            }

            .footer-section {
                flex-direction: column;
                gap: 20px;
            }

            .footer-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px 30px;
            }

            .footer-link {
                font-size: 0.95rem;
            }

            .update-text {
                font-size: 0.95rem;
            }

            .back-to-top-btn {
                width: 40px;
                height: 40px;
                bottom: 20px;
                right: 20px;
            }

            .social-links {
                justify-content: center;
            }

            /* Адаптация модального окна изображений для мобильных */
            .modal-nav-btn {
                display: none;
            }

            .image-modal-img {
                max-width: 95%;
                max-height: 95%;
            }

            .image-close-btn {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 30px;
            }

            .image-counter {
                bottom: 15px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .profile-section {
                padding: 20px 10px;
            }

            .avatar {
                width: 120px;
                height: 120px;
                border-width: 3px;
            }

            .profile-info h1 {
                font-size: 1.5em;
                margin-bottom: 8px;
            }

            .profile-info a {
                font-size: 0.9em;
                margin-bottom: 8px;
            }

            .profile-info p {
                font-size: 0.9em;
            }

            .favorite-works {
                font-size: 1.5em;
                padding: 20px 0 10px;
            }

            .modal-header {
                font-size: 18px;
                padding: 15px 10px;
            }

            .modal-content {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 10px;
            }

            .modal-img {
                height: 150px;
            }

            .close-btn {
                font-size: 30px;
                right: 20px;
            }

            .works-carousel {
                padding: 0 40px;
            }

            .work-thumb {
                width: 150px;
                height: 150px;
            }

            .work-thumb-1 {
                width: 230px;
                height: 150px;
            }

            .work-thumb-2 {
                width: 150px;
                height: 150px;
            }

            .work-thumb-3 {
                width: 150px;
                height: 150px;
            }

            .works-control {
                width: 30px;
                height: 30px;
                font-size: 18px;
            }

            .site-footer {
                padding: 30px 15px 20px;
            }

            .footer-links {
                flex-direction: column;
                gap: 15px;
            }

            .footer-link {
                font-size: 0.9rem;
                padding: 4px 0;
            }

            .update-text {
                font-size: 0.9rem;
            }

            .footer-logo {
                height: 30px;
            }

            .social-link {
                font-size: 1.2rem;
            }

            .social-links {
                gap: 12px;
            }

            .image-modal-img {
                max-width: 95%;
                max-height: 85vh;
            }

            .image-close-btn {
                font-size: 30px;
                right: 20px;
                top: 15px;
            }

            .show-works-btn {
                padding: 8px 20px;
                font-size: 14px;
                margin: 10px auto;
                white-space: normal;
                max-width: 95%;
            }

            .show-works-btn:hover {
                transform: none;
                background: #ffcc00;
            }

            .show-works-btn:active {
                background: #ffdd33;
                transform: translateY(1px);
            }
        }

        /* Добавим начальные стили и анимации */
        .profile-section,
        .favorite-works,
        .works-carousel,
        .show-works-btn {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .profile-section.visible,
        .favorite-works.visible,
        .works-carousel.visible,
        .show-works-btn.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Модифицируем скрытие элементов */
        .profile-section.hidden {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        /* Анимация для модальных окон */
        .modal-content img {
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.3s ease;
        }

        .modal-content img.visible {
            opacity: 1;
            transform: scale(1);
        }

        /* Header Auth Buttons Styles - ОБНОВЛЕННЫЕ СТИЛИ */
        .header-auth {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }

        .auth-btn {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            border: none;
            white-space: nowrap;
        }

        .login-btn {
            background: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .login-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .register-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
        }

        .register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
        }

        /* ОБНОВЛЕННЫЙ СТИЛЬ ДЛЯ КНОПКИ ПОЛЬЗОВАТЕЛЯ */
        .user-profile-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(45deg, #2d2d2d, #3a3a3a);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            border: 1px solid rgba(255, 204, 0, 0.3);
            white-space: nowrap;
            text-decoration: none;
            position: relative;
        }

        .user-profile-btn:hover {
            background: linear-gradient(45deg, #3a3a3a, #4a4a4a);
            border-color: rgba(255, 204, 0, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.2);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ffcc00;
        }

        .user-name {
            font-weight: 600;
            color: #ffcc00;
        }

        /* Выпадающее меню профиля для ПК */
        .user-profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: #2d2d2d;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            width: 200px;
            padding: 10px 0;
            margin-top: 10px;
            display: none;
            z-index: 1000;
            border: 1px solid rgba(255, 204, 0, 0.2);
        }

        .user-profile-dropdown.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .user-profile-dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            color: #e0e0e0;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-family: "Comfortaa", sans-serif;
            font-size: 14px;
        }

        .user-profile-dropdown-item:hover {
            background: rgba(255, 204, 0, 0.1);
            color: #ffcc00;
        }

        .user-profile-dropdown-item svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        .user-profile-dropdown-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 5px 0;
        }

        /* Mobile auth in menu */
        .mobile-auth {
            display: none;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
        }

        .mobile-auth .auth-btn {
            width: 100%;
            text-align: center;
            padding: 12px;
        }

        /* Registration Modal Styles */
        .registration-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
            -webkit-overflow-scrolling: touch;
        }

        .registration-modal-content {
            position: relative;
            background: linear-gradient(135deg, #2d2d2d 0%, #1f1f1f 100%);
            margin: 5% auto;
            padding: 25px 20px;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            animation: modalSlideIn 0.4s ease-out;
            border: 1px solid rgba(255, 204, 0, 0.2);
            min-height: auto;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .registration-modal-header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .registration-modal-title {
            font-size: clamp(1.4em, 5vw, 1.8em);
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: bold;
            line-height: 1.3;
            padding: 0 10px;
        }

        .registration-modal-subtitle {
            color: #e0e0e0;
            font-size: clamp(0.9em, 3.5vw, 1em);
            line-height: 1.4;
            padding: 0 10px;
        }

        .registration-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .form-group {
            text-align: left;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            color: #ffcc00;
            font-weight: bold;
            font-size: clamp(0.9em, 3.5vw, 0.95em);
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #444;
            border-radius: 10px;
            background: #333;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: "Comfortaa", sans-serif;
            box-sizing: border-box;
            -webkit-appearance: none;
        }

        .form-input:focus {
            outline: none;
            border-color: #ffcc00;
            box-shadow: 0 0 0 3px rgba(255, 204, 0, 0.2);
            background: #3a3a3a;
        }

        .submit-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 16px;
            font-size: clamp(1em, 4vw, 1.1em);
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            min-height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .submit-btn:hover {
            background: linear-gradient(45deg, #ffdd33, #ffcc00);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.3);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .submit-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .instructions {
            background: rgba(51, 51, 51, 0.7);
            padding: 18px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
            border-left: 3px solid #ffcc00;
        }

        .instructions-title {
            color: #ffcc00;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: clamp(1em, 4vw, 1.1em);
        }

        .instructions-list {
            list-style-type: decimal;
            padding-left: 20px;
            color: #e0e0e0;
            margin-bottom: 0;
            font-size: clamp(0.85em, 3.5vw, 0.9em);
        }

        .instructions-list li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .instructions-link {
            color: #ffcc00;
            text-decoration: none;
            transition: all 0.2s ease;
            word-break: break-all;
        }

        .instructions-link:hover {
            text-decoration: underline;
            color: #ffdd33;
        }

        .close-modal {
            position: absolute;
            top: 12px;
            right: 15px;
            font-size: 24px;
            color: #aaa;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            z-index: 10;
        }

        .close-modal:hover {
            color: #ffcc00;
            background: rgba(255, 204, 0, 0.1);
        }

        .message {
            padding: 12px 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
            font-weight: bold;
            animation: fadeIn 0.3s ease;
            font-size: clamp(0.9em, 3.5vw, 1em);
        }

        .message.success {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .message.error {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        .bot-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 12px 0;
            padding: 10px;
            background: rgba(255, 204, 0, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 204, 0, 0.2);
            flex-wrap: wrap;
        }

        .bot-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .bot-link {
            color: #ffcc00;
            font-weight: bold;
            text-decoration: none;
            word-break: break-all;
            text-align: center;
        }

        .bot-link:hover {
            text-decoration: underline;
        }

        /* УЛУЧШЕННАЯ АДАПТИВНОСТЬ ДЛЯ МОБИЛЬНЫХ УСТРОЙСТВ */
        @media (max-width: 768px) {
            .header-auth {
                display: none;
            }

            .mobile-auth {
                display: flex;
            }

            .registration-modal-content {
                margin: 10% auto;
                padding: 20px 16px;
                width: 95%;
                max-width: 400px;
                border-radius: 14px;
            }

            .registration-modal-title {
                margin-bottom: 6px;
            }

            .form-input {
                padding: 12px 14px;
                font-size: 16px;
            }

            .submit-btn {
                padding: 14px;
                min-height: 52px;
            }

            .instructions {
                padding: 15px;
                margin-top: 15px;
            }

            .instructions-list {
                padding-left: 18px;
            }

            .bot-info {
                padding: 8px;
                gap: 6px;
            }

            .user-profile-btn {
                padding: 6px 12px;
                font-size: 12px;
            }

            .user-avatar {
                width: 28px;
                height: 28px;
            }
        }

        @media (max-width: 480px) {
            .registration-modal-content {
                margin: 5% auto;
                padding: 18px 14px;
                border-radius: 12px;
                width: 92%;
            }

            .registration-modal-title {
                font-size: 1.3em;
            }

            .registration-modal-subtitle {
                font-size: 0.9em;
            }

            .registration-form {
                gap: 15px;
            }

            .form-input {
                padding: 11px 13px;
            }

            .submit-btn {
                padding: 13px;
                min-height: 50px;
                font-size: 1em;
            }

            .instructions {
                padding: 12px;
                margin-top: 12px;
            }

            .instructions-list {
                padding-left: 16px;
            }

            .instructions-list li {
                margin-bottom: 6px;
            }

            .close-modal {
                top: 8px;
                right: 12px;
                width: 28px;
                height: 28px;
                font-size: 20px;
            }

            .bot-info {
                flex-direction: column;
                text-align: center;
                gap: 5px;
            }
        }

        @media (max-width: 360px) {
            .registration-modal-content {
                padding: 15px 12px;
                margin: 3% auto;
            }

            .form-input {
                padding: 10px 12px;
            }

            .submit-btn {
                padding: 12px;
                min-height: 48px;
                font-size: 0.95em;
            }
        }

        /* Специальные стили для очень высоких экранов */
        @media (min-height: 800px) and (max-width: 768px) {
            .registration-modal-content {
                margin: 15% auto;
            }
        }

        /* Предотвращение масштабирования на iOS при фокусе */
        @media screen and (max-width: 768px) {
            .form-input {
                font-size: 16px !important;
            }
        }

        /* Улучшение для landscape режима на мобильных */
        @media (max-height: 500px) and (orientation: landscape) {
            .registration-modal-content {
                margin: 2% auto;
                max-height: 90vh;
                overflow-y: auto;
            }
        }

        /* Для очень маленьких экранов в portrait режиме */
        @media (max-width: 320px) {
            .registration-modal-content {
                padding: 12px 10px;
            }

            .form-input {
                padding: 9px 11px;
            }

            .submit-btn {
                padding: 11px;
                min-height: 46px;
            }
        }

        /* Плавная анимация для всех интерактивных элементов */
        .auth-btn,
        .submit-btn,
        .form-input,
        .close-modal {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Улучшение доступности для фокуса */
        .auth-btn:focus-visible,
        .submit-btn:focus-visible,
        .form-input:focus-visible {
            outline: 2px solid #ffcc00;
            outline-offset: 2px;
        }

        /* Поддержка prefers-reduced-motion */
        @media (prefers-reduced-motion: reduce) {

            .auth-btn,
            .submit-btn,
            .form-input,
            .close-modal,
            .message {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }

            .auth-btn:hover,
            .submit-btn:hover {
                transform: none;
            }
        }

        /* Profile Setup Modal Styles */
        .profile-setup-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
            -webkit-overflow-scrolling: touch;
        }

        .profile-setup-content {
            position: relative;
            background: linear-gradient(135deg, #2d2d2d 0%, #1f1f1f 100%);
            margin: 2% auto;
            padding: 30px 25px;
            border-radius: 16px;
            max-width: 700px;
            width: 95%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            animation: modalSlideIn 0.4s ease-out;
            border: 1px solid rgba(255, 204, 0, 0.3);
            min-height: auto;
        }

        .profile-setup-header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .profile-setup-title {
            font-size: clamp(1.6em, 5vw, 2em);
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: bold;
            line-height: 1.3;
        }

        .profile-setup-subtitle {
            color: #e0e0e0;
            font-size: clamp(0.95em, 3.5vw, 1.1em);
            line-height: 1.4;
        }

        .profile-setup-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-section {
            background: rgba(51, 51, 51, 0.6);
            padding: 20px;
            border-radius: 12px;
            border-left: 3px solid #ffcc00;
        }

        .section-title {
            color: #ffcc00;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: clamp(1.1em, 4vw, 1.3em);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title svg {
            width: 20px;
            height: 20px;
        }

        .avatar-upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .avatar-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ffcc00;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .avatar-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .avatar-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #444;
            color: #888;
            font-size: 14px;
            text-align: center;
            padding: 10px;
        }

        .upload-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: clamp(0.9em, 3.5vw, 1em);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
            text-align: left;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            color: #ffcc00;
            font-weight: bold;
            font-size: clamp(0.9em, 3.5vw, 0.95em);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #444;
            border-radius: 8px;
            background: #333;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: "Comfortaa", sans-serif;
            box-sizing: border-box;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #ffcc00;
            box-shadow: 0 0 0 3px rgba(255, 204, 0, 0.2);
            background: #3a3a3a;
        }

        /* Стили для заблокированного поля описания */
        .form-textarea.disabled {
            background: #2a2a2a;
            color: #888;
            border-color: #555;
            cursor: not-allowed;
            resize: none;
        }

        .form-textarea.disabled::placeholder {
            color: #666;
        }

        /* Стили для социальных сетей */
        .social-link-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(68, 68, 68, 0.3);
            border-radius: 8px;
            border: 1px solid #555;
            transition: all 0.3s ease;
        }

        .social-link-input:hover {
            border-color: #777;
        }

        .social-platform-select {
            min-width: 140px;
            flex-shrink: 0;
            background: #444;
            border: 2px solid #555;
            border-radius: 6px;
            padding: 10px;
            color: white;
            font-family: "Comfortaa", sans-serif;
            cursor: pointer;
        }

        .social-platform-select:focus {
            outline: none;
            border-color: #ffcc00;
        }

        .social-link-input-group {
            display: flex;
            flex: 1;
            gap: 8px;
            align-items: center;
        }

        .social-link-prefix {
            color: #aaa;
            font-size: 14px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .social-link-input-field {
            flex: 1;
            min-width: 0;
        }

        .social-limit-warning {
            color: #ff6b6b;
            font-size: 12px;
            margin-top: 5px;
            text-align: center;
            display: none;
        }

        .social-limit-warning.show {
            display: block;
        }

        .add-social-btn.disabled {
            background: transparent;
            color: #666;
            border: 2px dashed #666;
            cursor: not-allowed;
        }

        .add-social-btn.disabled:hover {
            background: transparent;
            transform: none;
            box-shadow: none;
        }

        /* Стили для счетчика работ */
        .works-counter {
            color: #aaa;
            font-size: 12px;
            text-align: right;
            margin-top: 5px;
        }

        .works-counter.warning {
            color: #ffcc00;
        }

        .works-counter.error {
            color: #ff6b6b;
        }

        /* Автоматическое изменение высоты текстового поля */
        .form-textarea {
            min-height: 80px;
            resize: none;
            overflow-y: hidden;
            line-height: 1.5;
            transition: height 0.2s ease-out;
        }

        .social-links-setup {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .social-link-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .social-icon-select {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: #444;
            border: 2px solid #555;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .social-icon-select.active {
            border-color: #ffcc00;
            background: rgba(255, 204, 0, 0.1);
        }

        .social-icon-select img {
            width: 20px;
            height: 20px;
            filter: brightness(0.8);
        }

        .social-icon-select.active img {
            filter: brightness(1);
        }

        .add-social-btn {
            background: transparent;
            color: #ffcc00;
            border: 2px dashed #ffcc00;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin-top: 5px;
        }

        .add-social-btn:hover {
            background: rgba(255, 204, 0, 0.1);
        }

        /* Стили для загрузки работ по ссылкам */
        .works-link-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .work-link-preview {
            width: 100%;
            height: 100px;
            border-radius: 8px;
            background: #444;
            border: 2px solid #666;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .work-link-preview:hover {
            border-color: #ffcc00;
        }

        .work-link-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .work-link-placeholder {
            color: #888;
            font-size: 12px;
            text-align: center;
            padding: 10px;
        }

        .work-link-input-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .work-link-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .work-link-input {
            flex: 1;
        }

        .add-work-link-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .add-work-link-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
        }

        .add-work-link-btn.disabled {
            background: #666;
            color: #aaa;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .work-link-hint {
            color: #aaa;
            font-size: 12px;
            margin-top: 5px;
            text-align: center;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .save-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: clamp(1em, 4vw, 1.1em);
            min-width: 160px;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }

        .skip-btn {
            background: transparent;
            color: #aaa;
            border: 2px solid #666;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: clamp(1em, 4vw, 1.1em);
        }

        .skip-btn:hover {
            color: #ffcc00;
            border-color: #ffcc00;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 5px;
        }

        .remove-btn:hover {
            background: #d32f2f;
        }

        /* Адаптация для мобильных устройств */
        @media (max-width: 768px) {
            .profile-setup-content {
                margin: 5% auto;
                padding: 20px 15px;
                width: 95%;
                max-width: 500px;
            }

            .form-row {
                flex-direction: column;
                gap: 10px;
            }

            .form-section {
                padding: 15px;
            }

            .avatar-preview {
                width: 100px;
                height: 100px;
            }

            .works-link-container {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }

            .work-link-preview {
                height: 80px;
            }

            .form-actions {
                flex-direction: column;
            }

            .save-btn,
            .skip-btn {
                width: 100%;
                min-width: auto;
            }

            .social-link-input {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }

            .social-platform-select {
                min-width: 100%;
            }

            .social-link-input-group {
                flex-direction: column;
                align-items: stretch;
                gap: 5px;
            }

            .social-link-prefix {
                text-align: center;
            }

            .work-link-input-group {
                flex-direction: column;
                align-items: stretch;
            }

            .add-work-link-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .profile-setup-content {
                margin: 3% auto;
                padding: 15px 12px;
            }

            .social-link-input {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .social-icon-select {
                width: 35px;
                height: 35px;
            }

            .works-link-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {

            /* Скрываем стрелки навигации в модальных окнах изображений */
            .modal-nav-btn,
            .works-control,
            .profile-works-modal-nav,
            .cabinet-fullscreen-nav {
                display: none !important;
            }

            /* Увеличиваем область для свайпа */
            .image-modal-img,
            .profile-works-modal-img,
            .cabinet-fullscreen-img {
                cursor: default;
            }

            /* Улучшаем отображение на мобильных */
            .image-modal-content,
            .profile-works-modal-content,
            .cabinet-fullscreen-content {
                padding: 10px;
            }
        }

        /* Дополнительные улучшения для мобильного UX */
        @media (max-width: 480px) {

            .image-close-btn,
            .profile-works-modal-close,
            .cabinet-fullscreen-close {
                top: 10px;
                right: 10px;
                width: 35px;
                height: 35px;
                font-size: 24px;
            }

            .image-counter,
            .profile-works-modal-counter,
            .cabinet-fullscreen-counter {
                bottom: 10px;
                font-size: 12px;
                padding: 3px 10px;
            }
        }

        /* Стили для полноэкранного просмотра работ в модальном окне регистрации */
        .profile-works-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 4000;
            overflow: hidden;
        }

        .profile-works-modal-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-works-modal-img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
            cursor: grab;
        }

        .profile-works-modal-img:active {
            cursor: grabbing;
        }

        .profile-works-modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .profile-works-modal-close:hover {
            background: rgba(255, 0, 0, 0.7);
            transform: scale(1.1);
        }

        .profile-works-modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .profile-works-modal-nav:hover {
            background: rgba(255, 204, 0, 0.7);
            transform: translateY(-50%) scale(1.1);
        }

        .profile-works-modal-prev {
            left: 30px;
        }

        .profile-works-modal-next {
            right: 30px;
        }

        .profile-works-modal-counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
        }

        /* Адаптация для мобильных устройств */
        @media (max-width: 768px) {
            .profile-works-modal-nav {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .profile-works-modal-prev {
                left: 15px;
            }

            .profile-works-modal-next {
                right: 15px;
            }

            .profile-works-modal-close {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 30px;
            }

            .profile-works-modal-counter {
                bottom: 20px;
                font-size: 14px;
            }
        }

        /* ОБНОВЛЕННЫЙ ДИЗАЙН ЛИЧНОГО КАБИНЕТА */
        .personal-cabinet-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 5000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        .personal-cabinet-content {
            position: relative;
            background: linear-gradient(135deg, #2d2d2d 0%, #1f1f1f 100%);
            margin: 2% auto;
            padding: 30px 25px;
            border-radius: 16px;
            max-width: 800px;
            width: 95%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            animation: modalSlideIn 0.4s ease-out;
            border: 1px solid rgba(255, 204, 0, 0.3);
        }

        .personal-cabinet-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .personal-cabinet-title {
            font-size: clamp(1.6em, 5vw, 2em);
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .personal-cabinet-subtitle {
            color: #e0e0e0;
            font-size: clamp(0.95em, 3.5vw, 1.1em);
            line-height: 1.4;
        }

        /* ОБНОВЛЕННЫЙ ДИЗАЙН ЛИЧНОГО КАБИНЕТА */
        .cabinet-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
            padding: 20px 0;
        }

        .cabinet-profile-section {
            background: rgba(51, 51, 51, 0.7);
            border-radius: 12px;
            padding: 25px;
            border-left: 3px solid #ffcc00;
        }

        .cabinet-profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            position: relative;
        }

        .cabinet-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ffcc00;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .cabinet-user-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .cabinet-username {
            font-size: 1.8em;
            color: #ffcc00;
            margin-bottom: 0;
            font-weight: bold;
        }

        .cabinet-user-id {
            color: #aaa;
            font-size: 0.9em;
            margin-bottom: 0;
        }

        .cabinet-telegram-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #ffcc00;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            padding: 8px 15px;
            background: rgba(255, 204, 0, 0.1);
            border-radius: 20px;
            border: 1px solid rgba(255, 204, 0, 0.3);
            width: fit-content;
        }

        .cabinet-telegram-link:hover {
            background: rgba(255, 204, 0, 0.2);
            transform: translateY(-2px);
        }

        .cabinet-telegram-icon {
            width: 20px;
            height: 20px;
        }

        .cabinet-section {
            background: rgba(51, 51, 51, 0.7);
            border-radius: 12px;
            padding: 20px;
            border-left: 3px solid #ffcc00;
        }

        .cabinet-section-title {
            font-size: 1.3em;
            color: #ffcc00;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cabinet-section-title svg {
            width: 20px;
            height: 20px;
        }

        .cabinet-social-links {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .cabinet-social-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #e0e0e0;
            text-decoration: none;
            padding: 8px 15px;
            background: rgba(68, 68, 68, 0.5);
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .cabinet-social-link:hover {
            background: rgba(255, 204, 0, 0.2);
            color: #ffcc00;
        }

        .cabinet-social-icon {
            width: 20px;
            height: 20px;
        }

        .cabinet-description {
            color: #e0e0e0;
            line-height: 1.6;
            padding: 15px;
            background: rgba(68, 68, 68, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 150px;
            /* Ограничиваем высоту */
            overflow: hidden;
            /* Скрываем выходящий за пределы текст */
            position: relative;
        }

        .cabinet-description.premium-locked {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 120px;
            color: #888;
            background: rgba(68, 68, 68, 0.3);
            border: 2px dashed #666;
        }

        /* Градиент для плавного скрытия текста (если нужно показать начало) */
        .cabinet-description.free-tier::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: linear-gradient(transparent, rgba(45, 45, 45, 0.9));
            pointer-events: none;
        }

        /* Обновленные стили для текстового поля описания в форме */
        .form-textarea.disabled {
            background: #2a2a2a !important;
            color: #888 !important;
            border-color: #555 !important;
            cursor: not-allowed !important;
            resize: none !important;
            max-height: 120px !important;
            overflow: hidden !important;
        }

        /* Стили для сообщения о премиум-доступе */
        .premium-locked .premium-text {
            color: #aaa;
            font-size: 0.9em;
            max-width: 80%;
            margin: 0 auto;
        }

        .premium-locked {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: rgba(68, 68, 68, 0.3);
            border-radius: 8px;
            border: 2px dashed #666;
            text-align: center;
        }

        .premium-icon {
            font-size: 2em;
            color: #ffcc00;
        }

        .premium-text {
            color: #aaa;
            font-size: 0.9em;
        }

        .cabinet-works-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px auto 0;
        }

        .cabinet-works-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }

        .cabinet-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .cabinet-action-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: clamp(1em, 4vw, 1.1em);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cabinet-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }

        .cabinet-action-btn.secondary {
            background: transparent;
            color: #aaa;
            border: 2px solid #666;
        }

        .cabinet-action-btn.secondary:hover {
            color: #ffcc00;
            border-color: #ffcc00;
        }

        /* Модальное окно для работ в личном кабинете */
        .cabinet-works-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 6000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        .cabinet-works-content {
            position: relative;
            background: linear-gradient(135deg, #2d2d2d 0%, #1f1f1f 100%);
            margin: 2% auto;
            padding: 30px 25px;
            border-radius: 16px;
            max-width: 1000px;
            width: 95%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            animation: modalSlideIn 0.4s ease-out;
            border: 1px solid rgba(255, 204, 0, 0.3);
        }

        .cabinet-works-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .cabinet-works-title {
            font-size: clamp(1.6em, 5vw, 2em);
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .cabinet-works-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .cabinet-work-item {
            width: 100%;
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .cabinet-work-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .cabinet-work-item:hover img {
            transform: scale(1.05);
        }

        .cabinet-work-item:hover {
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.3);
        }

        /* Модальное окно для полноэкранного просмотра работ в личном кабинете */
        .cabinet-fullscreen-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 7000;
            overflow: hidden;
            touch-action: none;
        }

        .cabinet-fullscreen-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cabinet-fullscreen-img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            transition: transform 0.3s ease;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            cursor: grab;
        }

        .cabinet-fullscreen-img:active {
            cursor: grabbing;
        }

        .cabinet-fullscreen-close {
            position: fixed;
            top: 20px;
            right: 35px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 7001;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cabinet-fullscreen-close:hover {
            color: #ffcc00;
            background: rgba(255, 204, 0, 0.2);
        }

        .cabinet-fullscreen-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 7001;
            opacity: 0.6;
            transition: opacity 0.2s;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            width: 60px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .cabinet-fullscreen-nav:hover {
            opacity: 1;
            background: rgba(0, 0, 0, 0.7);
        }

        .cabinet-fullscreen-prev {
            left: 20px;
        }

        .cabinet-fullscreen-next {
            right: 20px;
        }

        .cabinet-fullscreen-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 15px;
            border-radius: 20px;
            z-index: 7001;
        }

        @media (max-width: 768px) {
            .personal-cabinet-content {
                margin: 5% auto;
                padding: 20px 15px;
            }

            .cabinet-profile-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .cabinet-avatar {
                width: 80px;
                height: 80px;
            }

            .cabinet-username {
                font-size: 1.5em;
            }

            .cabinet-actions {
                flex-direction: column;
            }

            .cabinet-action-btn {
                width: 100%;
                justify-content: center;
            }

            .cabinet-works-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .cabinet-work-item {
                height: 120px;
            }

            /* Стили для кнопки просмотра пароля в форме входа */
            #loginModal .password-input-wrapper {
                position: relative;
                display: flex;
                align-items: center;
            }

            #loginModal .password-toggle {
                position: absolute;
                right: 12px;
                top: 50%;
                transform: translateY(-50%);
                background: none;
                border: none;
                color: #aaa;
                cursor: pointer;
                padding: 5px;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2;
            }

            #loginModal .password-toggle:hover {
                color: #ffcc00;
            }

            #loginModal .password-toggle svg {
                width: 20px;
                height: 20px;
            }

            /* Убедитесь, что поле ввода пароля имеет правильный отступ */
            #loginModal #loginPassword {
                width: 100%;
                padding-right: 45px;
                /* Место для иконки */
            }

            /* Адаптация для модального окна полноэкранного просмотра */
            .cabinet-fullscreen-nav {
                display: none;
            }

            .cabinet-fullscreen-img {
                max-width: 95%;
                max-height: 95%;
            }

            .cabinet-fullscreen-close {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 30px;
            }

            .cabinet-fullscreen-counter {
                bottom: 15px;
                font-size: 14px;
            }
        }

        @media (max-width: 768px) {
            .header-right {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .header-auth {
                display: none;
            }

            .mobile-search-btn {
                display: block;
            }

            .search-container {
                display: none;
            }
        }

        /* Новое расположение поисковой строки на ПК */
        @media (min-width: 769px) {
            header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 10px 20px;
            }

            .header-left {
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .header-right {
                display: flex;
                align-items: center;
                gap: 25px;
                flex: 1;
                justify-content: flex-end;
            }

            .search-container {
                flex: 0 0 350px;
                margin: 0;
            }

            .header-auth {
                margin-left: 0;
            }

            .mobile-user-profile {
                display: none !important;
            }

            .mobile-auth {
                display: none !important;
            }
        }

        /* Стили для поисковой строки */
        .search-container {
            position: relative;
        }

        .search-box {
            display: flex;
            width: 100%;
            position: relative;
        }

        #searchInput {
            flex-grow: 1;
            padding: 12px 20px 12px 45px;
            border: none;
            border-radius: 30px;
            background-color: #333;
            color: #e0e0e0;
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
            font-family: "Comfortaa", sans-serif;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        #searchInput:focus {
            background-color: #3a3a3a;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            pointer-events: none;
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #ffcc00;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            color: #262626;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .search-btn:hover {
            background-color: #ffdd33;
            transform: translateY(-50%) scale(1.05);
        }

        .search-results {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            right: 0;
            background: #2d2d2d;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .search-results.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .search-result-item {
            padding: 12px 20px;
            border-bottom: 1px solid #3a3a3a;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
        }

        .search-result-item:hover {
            background-color: #3a3a3a;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 12px;
            object-fit: cover;
        }

        .search-result-item .info {
            flex: 1;
        }

        .search-result-item .name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .search-result-item .style {
            font-size: 0.85em;
            color: #aaa;
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: #ff6b6b;
            font-weight: bold;
        }

        .mobile-search-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            margin-left: 10px;
        }

        .search-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
        }

        /* Improved Mobile Search */
        @media (max-width: 768px) {
            .search-container {
                position: fixed;
                top: 10px;
                left: 10px;
                right: 10px;
                margin: 0;
                padding: 0;
                background: transparent;
                display: none;
                z-index: 1001;
                max-width: none;
                width: auto;
            }

            .search-container.active {
                display: block;
                animation: slideDown 0.3s ease-out;
            }

            .mobile-search-btn {
                display: block;
            }

            #searchInput {
                padding: 14px 20px 14px 50px;
                font-size: 16px;
                border-radius: 30px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            }

            .search-icon {
                left: 20px;
                font-size: 18px;
            }

            .search-btn {
                width: 40px;
                height: 40px;
            }

            .search-results {
                position: fixed;
                top: 80px;
                left: 10px;
                right: 10px;
                max-height: calc(100vh - 100px);
                border-radius: 10px;
            }

            .search-backdrop.active {
                display: block;
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .mobile-user-profile {
                display: flex;
            }

            .mobile-auth {
                display: flex;
            }
        }

        /* НОВЫЕ СТИЛИ ДЛЯ ПОЛЯ ПАРОЛЯ */
        .password-section {
            background: rgba(51, 51, 51, 0.6);
            padding: 20px;
            border-radius: 12px;
            border-left: 3px solid #ffcc00;
            margin-top: 20px;
        }

        .password-container {
            position: relative;
            width: 100%;
        }

        .password-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .password-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #444;
            border-radius: 8px;
            background: #333;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: "Comfortaa", sans-serif;
            box-sizing: border-box;
            letter-spacing: 1px;
        }

        .password-input:focus {
            outline: none;
            border-color: #ffcc00;
            box-shadow: 0 0 0 3px rgba(255, 204, 0, 0.2);
            background: #3a3a3a;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            padding: 5px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }

        .password-toggle:hover {
            color: #ffcc00;
            background: rgba(255, 204, 0, 0.1);
            border-radius: 4px;
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
        }

        #profilePassword {
            width: 100%;
            padding-right: 45px;
        }

        /* Стили для иконки в зависимости от состояния */
        .password-toggle .eye-open,
        .password-toggle .eye-closed {
            display: none;
        }

        .password-toggle.show .eye-open,
        .password-toggle.hide .eye-closed {
            display: block;
        }

        .password-toggle.hide .eye-open,
        .password-toggle.show .eye-closed {
            display: none;
        }

        .password-requirements {
            margin-top: 10px;
            padding: 10px;
            background: rgba(68, 68, 68, 0.3);
            border-radius: 6px;
            font-size: 12px;
            color: #aaa;
        }

        .requirement {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
        }

        .requirement.valid {
            color: #4CAF50;
        }

        .requirement.invalid {
            color: #ff6b6b;
        }

        .requirement-icon {
            width: 12px;
            height: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Модальное окно с кодом профиля */
        .code-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 6000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        .code-modal-content {
            position: relative;
            background: linear-gradient(135deg, #2d2d2d 0%, #1f1f1f 100%);
            margin: 5% auto;
            padding: 30px 25px;
            border-radius: 16px;
            max-width: 600px;
            width: 95%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            animation: modalSlideIn 0.4s ease-out;
            border: 1px solid rgba(255, 204, 0, 0.3);
            text-align: center;
        }

        .code-modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .code-modal-title {
            font-size: clamp(1.6em, 5vw, 2em);
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .code-modal-subtitle {
            color: #e0e0e0;
            font-size: clamp(0.95em, 3.5vw, 1.1em);
            line-height: 1.4;
        }

        /* Стиль для уведомления об ошибке */
        .link-copied-notification.error {
            background: linear-gradient(45deg, #f44336, #d32f2f) !important;
        }

        .code-container {
            background: rgba(51, 51, 51, 0.7);
            border-radius: 10px;
            padding: 30px 20px;
            margin: 20px 0;
            border-left: 3px solid #ffcc00;
            position: relative;
        }

        .code-text {
            color: #e0e0e0;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .code-hidden {
            color: #e0e0e0;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.5;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .code-hidden::before {
            content: 'Копируйте код и отправляйте';
            letter-spacing: 2px;
            font-size: 16px;
            color: #888;
        }

        .copy-btn {
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: clamp(1em, 4vw, 1.1em);
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 auto;
            min-width: 200px;
            justify-content: center;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }

        .copy-btn.copied {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }

        .copy-btn.copied::before {
            content: '✓ ';
            font-weight: bold;
        }

        .instructions-box {
            background: rgba(51, 51, 51, 0.7);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 3px solid #ffcc00;
            text-align: left;
        }

        .instructions-title {
            color: #ffcc00;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: clamp(1.1em, 4vw, 1.3em);
            text-align: center;
        }

        .instructions-list {
            list-style-type: decimal;
            padding-left: 20px;
            color: #e0e0e0;
            margin-bottom: 0;
        }

        .instructions-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .instructions-link {
            color: #ffcc00;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .instructions-link:hover {
            text-decoration: underline;
            color: #ffdd33;
        }

        .success-message {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid #4CAF50;
            text-align: center;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @media (max-width: 768px) {
            .code-modal-content {
                margin: 10% auto;
                padding: 20px 15px;
            }

            .code-text {
                font-size: 12px;
                max-height: 300px;
            }

            .copy-btn {
                width: 100%;
                min-width: auto;
            }
        }

        .char-counter {
            transition: color 0.3s ease;
        }

        .char-counter.warning {
            color: #ffcc00;
        }

        .char-counter.error {
            color: #ff6b6b;
            font-weight: bold;
        }

        .form-label.required::after {
            content: ' *';
            color: #ff6b6b;
        }

        .form-input:required,
        .form-select:required {
            border-left: 3px solid #ffcc00;
        }

        .works-counter.minimum-warning {
            color: #ff6b6b;
            font-weight: bold;
        }

        .social-limit-warning {
            color: #ff6b6b;
            font-size: 12px;
            margin-top: 5px;
            text-align: center;
            display: none;
            font-weight: bold;
            padding: 8px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .social-limit-warning.show {
            display: block;
            animation: shake 0.5s ease-in-out;
        }

        .social-counter {
            transition: all 0.3s ease;
        }

        .social-counter.warning {
            color: #ff6b6b;
            font-weight: bold;
        }

        /* Анимация тряски для обязательных полей */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* Подсветка секции при ошибке */
        .form-section.error {
            border-left-color: #ff6b6b !important;
            background: rgba(255, 107, 107, 0.05) !important;
        }

        /* Стиль для кнопки "Войти" когда регистрация уже выполнена */
        .register-btn.registered {
            background: linear-gradient(45deg, #4CAF50, #45a049) !important;
        }

        .register-btn.registered:hover {
            background: linear-gradient(45deg, #45a049, #4CAF50) !important;
        }

        /* Обновленные стили для кнопок личного кабинета на мобильных устройствах */
        @media (max-width: 768px) {
            .cabinet-actions {
                flex-direction: column;
                gap: 10px;
                margin-top: 20px;
            }

            .cabinet-action-btn {
                width: 100%;
                justify-content: center;
                padding: 10px 15px;
                font-size: 14px;
                min-height: 44px;
                /* Минимальная высота для удобного нажатия */
            }

            .cabinet-action-btn.secondary {
                background: transparent;
                color: #aaa;
                border: 1px solid #666;
            }

            .cabinet-action-btn.secondary:hover {
                color: #ffcc00;
                border-color: #ffcc00;
            }

            /* Новый контейнер для кнопок закрыть/выйти */
            .cabinet-bottom-actions {
                display: flex;
                gap: 10px;
                width: 100%;
            }

            .cabinet-bottom-actions .cabinet-action-btn {
                flex: 1;
                margin: 0;
            }
        }

        @media (max-width: 768px) {
            .cabinet-works-btn {
                padding: 10px 15px !important;
                font-size: 14px !important;
                min-height: 44px !important;
                width: 90% !important;
                margin: 10px auto 0 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                text-align: center !important;
                white-space: normal !important;
                line-height: 1.3 !important;
            }

            .cabinet-works-btn svg {
                width: 14px !important;
                height: 14px !important;
                flex-shrink: 0 !important;
            }
        }

        @media (max-width: 480px) {
            .cabinet-works-btn {
                padding: 8px 12px !important;
                font-size: 13px !important;
                min-height: 40px !important;
                width: 80% !important;
            }

            .cabinet-works-btn svg {
                width: 12px !important;
                height: 12px !important;
            }
        }

        @media (max-width: 360px) {
            .cabinet-works-btn {
                padding: 6px 10px !important;
                font-size: 12px !important;
                min-height: 36px !important;
            }
        }

        /* Добавьте в существующие стили */
        #cabinetUserId:hover {
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }

        /* Для мобильных устройств - отключаем выделение при долгом нажатии */
        @media (max-width: 768px) {
            #cabinetUserId {
                -webkit-tap-highlight-color: transparent;
                user-select: none;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
            }
        }

        /* Стили для динамической валидации */
        .form-input:valid,
        .form-select:valid,
        .password-input:valid {
            border-color: #4CAF50 !important;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2) !important;
        }

        .form-input:invalid:not(:focus):not(:placeholder-shown),
        .form-select:invalid:not(:focus),
        .password-input:invalid:not(:focus):not(:placeholder-shown) {
            border-color: #f44336 !important;
            box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.2) !important;
        }

        .form-section.valid {
            border-left-color: #4CAF50 !important;
        }

        .form-section.invalid {
            border-left-color: #f44336 !important;
        }

        /* Анимации для плавных переходов */
        .form-input,
        .form-select,
        .password-input,
        .form-section {
            transition: all 0.3s ease;
        }

        /* Стили для счетчиков */
        .char-counter.valid {
            color: #4CAF50 !important;
        }

        .char-counter.invalid {
            color: #f44336 !important;
        }

        /* Стили для требований пароля */
        .requirement.valid {
            color: #4CAF50;
        }

        .requirement.invalid {
            color: #f44336;
        }

        .requirement.valid .requirement-icon::before {
            content: '✓';
            color: #4CAF50;
        }

        .requirement.invalid .requirement-icon::before {
            content: '✗';
            color: #f44336;
        }

        /* ДОБАВИМ СТИЛИ ДЛЯ ЗАБЛОКИРОВАННЫХ ПОЛЕЙ */
        .form-input:read-only,
        .form-select:disabled {
            background-color: #2a2a2a !important;
            color: #888 !important;
            cursor: not-allowed !important;
            border-color: #555 !important;
        }

        .form-input:read-only:focus,
        .form-select:disabled:focus {
            box-shadow: none !important;
            border-color: #555 !important;
        }

        .locked-field-hint {
            color: #ffcc00;
            font-size: 0.8em;
            margin-left: 5px;
        }

        .locked-info-message {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Стили для заблокированных полей в секции основной информации */
        #mainInfoSection .form-input:read-only,
        #mainInfoSection .form-select:disabled {
            background: #2a2a2a !important;
            border: 2px solid #555 !important;
            color: #888 !important;
        }

        #mainInfoSection .form-group {
            position: relative;
        }

        /* Индикатор заблокированного поля */
        .locked-indicator {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffcc00;
            font-size: 14px;
        }

        /* Стили для отображения статуса шифрования */
        .encryption-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #4CAF50;
            font-size: 0.9em;
        }

        .encryption-status.encrypted {
            background: rgba(33, 150, 243, 0.1);
            border-left-color: #2196F3;
        }

        .encryption-icon {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        /* Стили для кнопки копирования ссылки на профиль */
        .avatar-with-share {
            position: relative;
            display: inline-block;
        }

        .share-link-btn {
            position: absolute;
            top: -18px;
            left: -10px;
            background: linear-gradient(45deg, #ffcc00, #ffdd33);
            color: #262626;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            border: 2px solid #262626;
        }

        .share-link-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.4);
            background: linear-gradient(45deg, #ffdd33, #ffcc00);
        }

        .share-link-btn:active {
            transform: scale(0.95);
        }

        /* Уведомление об успешном копировании */
        .link-copied-notification {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            display: none;
            align-items: center;
            gap: 10px;
            animation: slideInLeft 0.3s ease-out;
            max-width: calc(100% - 40px);
            font-size: 14px;
            font-weight: 500;
        }

        .link-copied-notification.show {
            display: flex;
        }

        .link-copied-notification svg {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .link-copied-notification span {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Анимация появления снизу слева */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Анимация исчезновения */
        @keyframes slideOutLeft {
            from {
                opacity: 1;
                transform: translateX(0);
            }

            to {
                opacity: 0;
                transform: translateX(-20px);
            }
        }

        /* Адаптация для мобильных устройств */
        @media (max-width: 768px) {
            .link-copied-notification {
                bottom: 15px;
                left: 15px;
                right: 15px;
                max-width: calc(100% - 30px);
                padding: 10px 16px;
                font-size: 13px;
                border-radius: 20px;
                justify-content: center;
                text-align: center;
            }

            .link-copied-notification span {
                white-space: normal;
            }
        }

        @media (max-width: 480px) {
            .link-copied-notification {
                bottom: 10px;
                left: 10px;
                right: 10px;
                max-width: calc(100% - 20px);
                padding: 8px 14px;
                font-size: 12px;
            }
        }

        /* Адаптация для мобильных */
        @media (max-width: 768px) {
            .share-link-btn {
                position: absolute;
                top: auto;
                /* Убираем top позиционирование */
                left: auto;
                /* Убираем left позиционирование */
                bottom: -8px;
                /* Располагаем снизу */
                right: -8px;
                /* Располагаем справа */
                width: 28px;
                height: 28px;
                transform: none;
                /* Убираем трансформацию для мобильных */
                border: 2px solid #1f1f1f;
                /* Темная граница для контраста */
            }

            .share-link-btn svg {
                width: 16px;
                height: 16px;
            }


            /* Убираем hover эффект для тач-устройств */
            .share-link-btn:hover {
                transform: none;
                background: linear-gradient(45deg, #ffcc00, #ffdd33);
            }

            /* Добавляем активное состояние при нажатии */
            .share-link-btn:active {
                transform: scale(0.95);
                background: linear-gradient(45deg, #ffaa00, #ffcc33);
            }

            
        }

        @media (max-width: 480px) {
            .share-link-btn {
                width: 26px;
                height: 26px;
                bottom: -6px;
                right: -6px;
            }

            .share-link-btn svg {
                width: 14px;
                height: 14px;
            }
        }

        /* Для портретной ориентации на мобильных */
        @media (max-width: 768px) and (orientation: portrait) {
            .share-link-btn {
                /* Увеличиваем для удобства нажатия пальцем */
                width: 30px;
                height: 30px;
                bottom: -10px;
                right: -10px;
            }
        }

        /* Для ландшафтной ориентации на мобильных */
        @media (max-width: 768px) and (orientation: landscape) {
            .share-link-btn {
                /* Сделаем немного больше для ландшафтного режима */
                width: 26px;
                height: 26px;
                bottom: -5px;
                right: -5px;
            }
        }
    </style>

</head>

<body>
    <!-- Header с поисковой строкой -->
    <header>
        <div class="header-left">
            <div class="menu-icon" id="menuIcon" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <a href="../index.html"> <img src="https://i.postimg.cc/hjBzgfqS/1.png" alt="Логотип" class="logo"> </a>
        </div>

        <div class="header-right">
            <!-- Поисковая строка теперь в правой части -->
            <div class="search-container" id="searchContainer">
                <div class="search-box">
                    <div class="search-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="#aaa" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                        </svg>
                    </div>
                    <input type="text" id="searchInput" placeholder="Поиск художников..." autocomplete="off">
                    <button class="search-btn" onclick="searchArtists()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#262626"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                        </svg>
                    </button>
                </div>
                <div class="search-results" id="searchResults"></div>
            </div>

            <!-- Кнопки авторизации для ПК -->
            <div class="header-auth">
                <button href="?modal=login" class="auth-btn login-btn" onclick="openLoginModal()">Войти</button>
                <button href="?modal=register" class="auth-btn register-btn" onclick="openRegistrationModal()"
                    data-default-text="Регистрация" data-alternate-text="Войти">
                    Регистрация
                </button>
            </div>

            <button class="mobile-search-btn" id="mobileSearchBtn" onclick="toggleSearch()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                </svg>
            </button>
        </div>
        <div class="search-backdrop" id="searchBackdrop" onclick="toggleSearch()"></div>
    </header>

    <!-- Menu Drawer -->
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="drawer" id="drawer">
        <!-- Мобильный профиль пользователя (только для мобильных) -->
        <div class="mobile-user-profile" id="mobileUserProfile">
            <img src="" alt="Аватар" class="mobile-user-avatar" id="mobileUserAvatar">
            <div class="mobile-user-info">
                <div class="mobile-user-name" id="mobileUserName"></div>
                <div class="mobile-user-telegram" id="mobileUserTelegram"></div>
            </div>
            <div class="mobile-user-actions">
                <button class="mobile-profile-btn" onclick="openPersonalCabinetModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                    Профиль
                </button>
                <button class="mobile-logout-btn" onclick="logout()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    Выйти
                </button>
            </div>
        </div>

        <!-- Кнопки авторизации для мобильных -->
        <div class="mobile-auth" id="mobileAuth">
            <button href="?modal=login" class="auth-btn login-btn" onclick="openLoginModal()">Войти</button>
            <button href="?modal=register" class="auth-btn register-btn" onclick="openRegistrationModal()"
                data-default-text="Регистрация" data-alternate-text="Войти">
                Регистрация
            </button>
        </div>

        <ul class="menu">
            <li><a href="PREM18(1).html">
                    <img src="https://i.postimg.cc/6p8Gfk0N/home.png" alt="Главная">
                    Главная
                </a>
            </li>

            <li>
                <a href="index.html">
                    <img src="https://i.postimg.cc/Z5Y5rqkg/prem-art.png" alt="Художники">
                    Prem Artist
                </a>
            </li>

            <li>
                <a href="Artist.html">
                    <img src="https://i.postimg.cc/MGRMh1NP/man-14816778.png" alt="Художники">
                    Художники
                </a>
            </li>

            <li>
                <a href="Design.html">
                    <img src="https://i.postimg.cc/t4xNXgTY/free-icon-pen-tablet-4861056.png" alt="Художники">
                    Дизайнеры
                </a>
            </li>

            <li>
                <a href="#" class="has-submenu" onclick="toggleSubmenu(event)">
                    <img src="https://i.postimg.cc/85mFCN1L/mobile-shopping.png" alt="">
                    Услуги
                </a>

                <ul class="submenu">
                    <li>
                        <a href="Services.html#Commission" class="submenu-link" onclick="openTabByLink('Commission')">
                            COMMISSION ART
                        </a>
                    </li>
                    <li>
                        <a href="Services.html#Yunchy" class="submenu-link" onclick="openTabByLink('Yunchy')">
                            YCH
                        </a>
                    </li>
                    <li>
                        <a href="Services.html#art" class="submenu-link" onclick="openTabByLink('art')">
                            ADOPT
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="#">
                    <img src="https://i.postimg.cc/bYRbyHJ4/draw.png" alt="">
                    Комиксы
                </a>
            </li>

            <li class="separator-menu"></li>

            <li><a href="AboutUs.html#about-site">
                    Подробности о сайте
                </a>
            </li>

            <li><a href="AboutUs.html#publish-work">
                    Опубликовать работу
                </a>
            </li>

            <li><a href="AboutUs.html#guarantees">
                    Гаранты
                </a>
            </li>

            <li class="separator-menu"></li>

            <li>
                <a href="#" class="has-submenu" onclick="toggleSubmenu(event)">
                    <img src="https://i.postimg.cc/sDXB3kbZ/image.png" alt="">
                    Документы
                </a>
                <ul class="submenu">
                    <li><a href="Document.html#user-agreement" class="submenu-link">Соглашение</a></li>
                    <li><a href="Document.html#usage-rules" class="submenu-link">Правила использования</a></li>
                    <li><a href="Document.html#guaranteed-deals" class="submenu-link">Гарантийные сделки</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Баннер -->
    <section>
        <div class="banner">
            <img src="https://i.postimg.cc/DfSNsVrN/2.png" alt="Баннер">
        </div>
        <div class="black-stripe"></div>
    </section>

    <!-- Фильтры -->
    <section>
        <div class="filters-container">
            <button class="filters-button" onclick="toggleFilters(event)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M4 21V14" stroke="currentColor" stroke-width="2" />
                    <path d="M4 10V3" stroke="currentColor" stroke-width="2" />
                    <path d="M12 21V12" stroke="currentColor" stroke-width="2" />
                    <path d="M12 8V3" stroke="currentColor" stroke-width="2" />
                    <path d="M20 21V16" stroke="currentColor" stroke-width="2" />
                    <path d="M20 12V3" stroke="currentColor" stroke-width="2" />
                    <path d="M1 14H7" stroke="currentColor" stroke-width="2" />
                    <path d="M9 8H15" stroke="currentColor" stroke-width="2" />
                    <path d="M17 16H23" stroke="currentColor" stroke-width="2" />
                </svg>
                Фильтры
            </button>
            <div class="filters-dropdown" id="filtersDropdown">
                <a href="#" onclick="applyFilter('all', event)" class="active-filter">Все стили</a>
                <a href="#" onclick="applyFilter('prem', event)">Prem Artist</a>
            </div>
        </div>
    </section>

    <!-- Модальное окно регистрации -->
    <div id="registrationModal" class="registration-modal">
        <div class="registration-modal-content">
            <span class="close-modal" onclick="closeRegistrationModal()">&times;</span>

            <div class="registration-modal-header">
                <h3 class="registration-modal-title">Регистрация в Artemisia</h3>
                <p class="registration-modal-subtitle">Введите код подтверждения с Telegram-канала</p>

                <div class="bot-info">
                    <svg class="bot-icon" viewBox="0 0 24 24" fill="#ffcc00">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" />
                    </svg>
                    <a href="https://t.me/Artemisia_website" class="bot-link" target="_blank">
                        @Artemisia_website
                    </a>
                </div>
            </div>

            <form class="registration-form" onsubmit="submitRegistration(event)">
                <div class="form-group">
                    <label class="form-label" for="registrationCode">Код подтверждения:</label>
                    <input type="text" id="registrationCode" class="form-input" placeholder="Введите код из бота"
                        required maxlength="10" autocomplete="off" inputmode="text">
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    Получить доступ к анкете
                </button>

                <div id="message" class="message"></div>
            </form>

            <div class="instructions">
                <h4 class="instructions-title">Как получить код подтверждения:</h4>
                <ol class="instructions-list">
                    <li>Перейдите в наш Telegram-канал:
                        <a href="https://t.me/Artemisia_website?direct" class="instructions-link" target="_blank">
                            @Artemisia_website
                        </a>
                    </li>
                    <li>Напишите в предложку канала</li>
                    <li>Вам пришлют код и инструкцию</li>
                    <li>После введите полученный код в поле выше</li>
                    <li>Нажмите "Получить доступ к анкете"</li>
                    <li>Следуйте дальше по инструкции</li>
                </ol>
                <p style="color: #ffcc00; margin-top: 12px; font-size: 0.85em; text-align: center;">
                    💡 Если у вас возникли проблемы с получением кода, напишите в
                    <a href="https://t.me/Artemisia_website?direct" class="instructions-link" target="_blank"
                        style="color: #4a90e2; font-weight: 600;">
                        техническую поддержку
                    </a>
                </p>
            </div>
        </div>
    </div>

    <!-- Модальное окно входа -->
    <div id="loginModal" class="registration-modal">
        <div class="registration-modal-content">
            <span class="close-modal" onclick="closeLoginModal()">&times;</span>

            <div class="registration-modal-header">
                <h3 class="registration-modal-title">Вход в Artemisia</h3>
                <p class="registration-modal-subtitle">Войдите в свой аккаунт</p>
            </div>

            <form class="registration-form" onsubmit="submitLogin(event)">
                <div class="form-group">
                    <label class="form-label" for="loginEmail">Никнейм:</label>
                    <input type="text" id="loginEmail" class="form-input" placeholder="Введите ваш никнейм" required
                        autocomplete="username">
                </div>

                <div class="form-group">
                    <label class="form-label" for="loginPassword">Пароль:</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="loginPassword" class="form-input" placeholder="Введите пароль"
                            required autocomplete="current-password">
                        <button type="button" class="password-toggle" onclick="toggleLoginPasswordVisibility()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="loginBtn">
                    Войти
                </button>

                <div id="loginMessage" class="message"></div>
            </form>

            <div class="instructions" style="text-align: center;">
                <h4 class="instructions-title">Нет аккаунта?</h4>
                <p style="color: #e0e0e0; margin-top: 10px; text-align: center;">
                    Зарегистрируйтесь, чтобы получить доступ ко всем возможностям Artemisia
                </p>
                <button class="submit-btn"
                    style="background: transparent; border: 2px solid #ffcc00; color: #ffcc00; margin-top: 10px; display: block; margin-left: auto; margin-right: auto;"
                    onclick="closeLoginModal(); openRegistrationModal();">
                    Зарегистрироваться
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно настройки профиля -->
    <div id="profileSetupModal" class="profile-setup-modal">
        <div class="profile-setup-content">
            <span class="close-modal" onclick="closeProfileSetupModal()">&times;</span>

            <div class="profile-setup-header">
                <h3 class="profile-setup-title">Настройте ваш профиль</h3>
                <p class="profile-setup-subtitle">Заполните информацию, чтобы другие пользователи могли вас найти</p>
            </div>

            <form class="profile-setup-form" onsubmit="saveProfile(event)">
                <!-- Секция аватарки -->
                <div class="form-section" id="avatarSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 5.5V7H9V5.5L3 7V9L9 10.5V12L3 13.5V15.5L9 14V16L3 17.5V19.5L9 18V22H15V18L21 19.5V17.5L15 16V14L21 15.5V13.5L15 12V10.5L21 9Z" />
                        </svg>
                        Аватар профиля
                    </h4>
                    <div class="avatar-upload-container">
                        <div class="avatar-preview" id="avatarPreview">
                            <div class="avatar-placeholder">Аватар не выбран</div>
                        </div>
                        <div class="work-link-input-container">
                            <div class="work-link-input-group">
                                <input type="text" id="avatarLinkInput" class="form-input work-link-input"
                                    placeholder="Введите ссылку на изображение с хостинга">
                                <button type="button" class="add-work-link-btn" onclick="loadAvatarFromLink()">
                                    Загрузить
                                </button>
                            </div>
                            <div class="work-link-hint">
                                Поддерживаются: PostImage, ImgBB, Imgur и другие хостинги изображений 
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Секция основной информации -->
                <div class="form-section" id="mainInfoSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" />
                        </svg>
                        Основная информация
                    </h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required" for="profileName">Имя/Псевдоним</label>
                            <input type="text" id="profileName" class="form-input"
                                placeholder="Введите ваше имя (максимум 20 символов)" required maxlength="20">
                            <div class="char-counter" id="nameCharCounter"
                                style="color: #aaa; font-size: 12px; text-align: right; margin-top: 5px;">
                                Осталось символов: 20
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required" for="profileNickname">Никнейм в Telegram</label>
                            <input type="text" id="profileNickname" class="form-input" placeholder="@username" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required" for="profileStyle">Специальность</label>
                            <select id="profileStyle" class="form-select" required>
                                <option value="">Выберите специальность</option>
                                <option value="Дизайн">Дизайн</option>
                                <option value="Веб-дизайн">Веб-дизайн</option>
                                <option value="Графический дизайн">Графический дизайн</option>
                                <option value="Иллюстрация">Иллюстрация</option>
                                <option value="Другое">Другое</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required" for="profileCustomStyle">Другая специальность</label>
                            <input type="text" id="profileCustomStyle" class="form-input"
                                placeholder="Укажите вашу специальность" disabled required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="profileDescription">Описание профиля</label>
                        <textarea id="profileDescription" class="form-textarea disabled"
                            placeholder="Доступно только в премиум-версии" disabled></textarea>
                        <div style="color: #ffcc00; font-size: 12px; margin-top: 5px;">
                            ⭐ Для добавления описания профиля приобретите Prem Artist 
                        </div>
                    </div>
                </div>

                <div class="password-section" id="passwordSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                        </svg>
                        Пароль для сайта
                    </h4>
                    <div class="password-container">
                        <div class="password-input-wrapper">
                            <input type="password" id="profilePassword" class="password-input"
                                placeholder="Придумайте пароль (6-12 символов)" required minlength="6" maxlength="12"
                                autocomplete="new-password" oninput="validatePassword(this.value)">
                            <button type="button" class="password-toggle hide" onclick="togglePasswordVisibility()"
                                title="Показать пароль">
                                <svg viewBox="0 0 24 24" fill="currentColor" class="eye-closed">
                                    <path
                                        d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                                </svg>
                                <svg viewBox="0 0 24 24" fill="currentColor" class="eye-open">
                                    <path
                                        d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z" />
                                </svg>
                            </button>
                        </div>
                        <div class="password-requirements" id="passwordRequirements">
                            <div class="requirement" id="reqLength">
                                <span class="requirement-icon"></span>
                                <span>От 6 до 12 символов</span>
                            </div>
                            <div class="requirement" id="reqChars">
                                <span class="requirement-icon"></span>
                                <span>Только английские буквы и цифры</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Секция социальных сетей -->
                <div class="form-section" id="socialSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.35C15.11 18.56 15.08 18.78 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" />
                        </svg>
                        Социальные сети <span style="color: #ff6b6b;">*</span>
                    </h4>

                    <!-- Счетчик социальных сетей -->
                    <div class="social-counter" id="socialCounter"
                        style="color: #ff6b6b; font-size: 12px; margin-bottom: 10px; font-weight: bold;">
                        Обязательно: минимум 1 соцсеть | Добавлено: 0/3
                    </div>

                    <div class="social-links-setup" id="socialLinksContainer">
                        <!-- Социальные сети будут добавляться динамически -->
                    </div>

                    <div class="social-limit-warning" id="socialLimitWarning">
                        ✘ <strong>Обязательно:</strong> Добавьте хотя бы одну социальную сеть
                    </div>

                    <button type="button" class="add-social-btn" id="addSocialBtn" onclick="addSocialLink()">
                        + Добавить социальную сеть
                    </button>
                </div>

                <!-- Секция работ -->
                <div class="form-section" id="worksSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM9 17H7V10H9V17ZM13 17H11V7H13V17ZM17 17H15V13H17V17Z" />
                        </svg>
                        Примеры работ
                    </h4>
                    <div class="works-link-container" id="worksContainer">
                        <!-- Работы будут добавляться динамически -->
                    </div>
                    <div class="works-counter minimum-warning" id="worksCounter">
                        Минимум: 5 работ | Добавлено: 0/20 работ
                    </div>
                    <div class="work-link-input-container">
                        <div class="work-link-input-group">
                            <input type="text" id="workLinkInput" class="form-input work-link-input"
                                placeholder="Введите ссылку на изображение с хостинга">
                            <button type="button" class="add-work-link-btn" id="addWorkLinkBtn"
                                onclick="addWorkFromLink()">
                                Добавить работу
                            </button>
                        </div>
                        <div class="work-link-hint">
                            Поддерживаются: PostImage, ImgBB, Imgur и другие хостинги изображений
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="skip-btn" onclick="skipProfileSetup()">
                        Пропустить
                    </button>
                    <button type="submit" class="save-btn" id="saveProfileBtn">
                        Сохранить профиль
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для полноэкранного просмотра работ в профиле -->
    <div id="profileWorksModal" class="profile-works-modal">
        <span class="profile-works-modal-close" onclick="closeProfileWorksModal()">&times;</span>
        <div class="profile-works-modal-content">
            <!-- СТРЕЛКИ СКРЫТЫ НА МОБИЛЬНЫХ ЧЕРЕЗ CSS -->
            <button class="profile-works-modal-nav profile-works-modal-prev"
                onclick="navigateProfileWork(-1)">&#10094;</button>
            <img id="profileWorksModalImg" class="profile-works-modal-img" src="" alt="Работа">
            <button class="profile-works-modal-nav profile-works-modal-next"
                onclick="navigateProfileWork(1)">&#10095;</button>
            <div class="profile-works-modal-counter" id="profileWorksModalCounter"></div>
        </div>
    </div>

    <!-- Модальное окно с кодом профиля -->
    <div id="codeModal" class="code-modal">
        <div class="code-modal-content">
            <span class="close-modal" onclick="closeCodeModal()">&times;</span>

            <div class="code-modal-header">
                <h3 class="code-modal-title">Ваш код профиля готов!</h3>
                <p class="code-modal-subtitle">Скопируйте код и отправьте его в предложку канала для проверки</p>
            </div>

            <div class="code-action-container">
                <div class="code-hidden" id="codeHidden">
                </div>

                <button class="copy-btn" id="copyCodeBtn" onclick="copyProfileCode()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                    </svg>
                    Скопировать код
                </button>

                <div class="success-message" id="successMessage">
                    ✔ Код успешно скопирован в буфер обмена!
                </div>
            </div>

            <div class="instructions-box">
                <h4 class="instructions-title">Что делать дальше:</h4>
                <ol class="instructions-list">
                    <li>Нажмите кнопку <strong>"Скопировать код"</strong> выше</li>
                    <li>Перейдите в предложку канала 
                        <a href="https://t.me/Artemisia_website?direct" class="instructions-link" target="_blank">
                            @Artemisia_website
                        </a>
                    </li>
                    <li>Отправьте скопированный код </li>
                    <li>Ожидайте проверки вашей анкеты модераторами</li>
                    <li>После проверки ваш профиль появится на сайте и в личном профиле выводится статус публикации </li>
                </ol>
                <p style="color: #ffcc00; margin-top: 15px; font-size: 0.9em; text-align: center;">
                    ⏳ Обычно проверка занимает от 1 до 3 дней
                </p>
            </div>
        </div>
    </div>


    <!-- Личный профиль -->
    <div id="personalCabinetModal" class="personal-cabinet-modal">
        <div class="personal-cabinet-content">
            <span class="close-modal" onclick="closePersonalCabinetModal()">&times;</span>

            <div class="personal-cabinet-header">
                <h3 class="personal-cabinet-title">Личный кабинет</h3>
                <p class="personal-cabinet-subtitle">Управление вашим профилем и настройками</p>
            </div>

            <div class="cabinet-content">
                <!-- Профиль пользователя -->
                <div class="cabinet-profile-section">
                    <div class="cabinet-profile-header">
                        <!-- Аватарка -->
                        <div class="avatar-with-share">
                            <div class="share-link-btn" onclick="copyProfileLink()"
                                title="Копировать ссылку на профиль">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                                </svg>
                            </div>
                            <img id="cabinetAvatar" src="" alt="Аватар" class="cabinet-avatar">
                        </div>

                        <div class="cabinet-user-info">
                            <h2 id="cabinetUsername" class="cabinet-username"></h2>
                            <p id="cabinetUserId" class="cabinet-user-id"></p>
                            <a id="cabinetTelegramLink" href="#" target="_blank" class="cabinet-telegram-link">
                                <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram"
                                    class="cabinet-telegram-icon">
                                <span id="cabinetTelegramText"></span>
                            </a>
                        </div>

                        <!-- СТАТУС ПУБЛИКАЦИИ -->
                        <div class="publication-status" id="publicationStatus">
                            <div class="status-text">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                </svg>
                                Проходит проверку
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Социальные сети -->
                <div class="cabinet-section">
                    <h3 class="cabinet-section-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.35C15.11 18.56 15.08 18.78 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" />
                        </svg>
                        Социальные сети
                    </h3>
                    <div id="cabinetSocialLinks" class="cabinet-social-links">
                        <!-- Социальные сети будут загружены динамически -->
                    </div>
                </div>

                <!-- Описание профиля -->
                <div class="cabinet-section">
                    <h3 class="cabinet-section-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                        </svg>
                        Описание профиля
                    </h3>
                    <div id="cabinetDescription" class="cabinet-description">
                        <!-- Описание будет загружено динамически -->
                    </div>
                </div>

                <!-- Работы -->
                <div class="cabinet-section">
                    <h3 class="cabinet-section-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM9 17H7V10H9V17ZM13 17H11V7H13V17ZM17 17H15V13H17V17Z" />
                        </svg>
                        Мои работы
                    </h3>
                    <button class="cabinet-works-btn" onclick="openCabinetWorksModal()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                        </svg>
                        Ознакомиться с работами
                    </button>
                </div>
            </div>

            <div class="cabinet-actions">
                <button class="cabinet-action-btn" onclick="editProfile()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                    </svg>
                    Редактировать профиль
                </button>
                <button class="cabinet-action-btn secondary" onclick="closePersonalCabinetModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                    Закрыть
                </button>
                <button class="cabinet-action-btn secondary" onclick="logout()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    Выйти
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно для работ в личном кабинете -->
    <div id="cabinetWorksModal" class="cabinet-works-modal">
        <div class="cabinet-works-content">
            <span class="close-modal" onclick="closeCabinetWorksModal()">&times;</span>

            <div class="cabinet-works-header">
                <h3 class="cabinet-works-title">Мои работы</h3>
                <p class="cabinet-works-subtitle">Все добавленные работы</p>
            </div>

            <div id="cabinetWorksGrid" class="cabinet-works-grid">
                <!-- Работы будут загружены динамически -->
            </div>
        </div>
    </div>

    <!-- Модальное окно для полноэкранного просмотра работ в личном кабинете -->
    <div id="cabinetFullscreenModal" class="cabinet-fullscreen-modal">
        <span class="cabinet-fullscreen-close" onclick="closeCabinetFullscreenModal()">&times;</span>
        <div class="cabinet-fullscreen-content">
            <!-- СТРЕЛКИ СКРЫТЫ НА МОБИЛЬНЫХ ЧЕРЕЗ CSS -->
            <button class="cabinet-fullscreen-nav cabinet-fullscreen-prev"
                onclick="navigateCabinetWork(-1)">&#10094;</button>
            <img id="cabinetFullscreenImg" class="cabinet-fullscreen-img" src="" alt="Работа">
            <button class="cabinet-fullscreen-nav cabinet-fullscreen-next"
                onclick="navigateCabinetWork(1)">&#10095;</button>
            <div class="cabinet-fullscreen-counter" id="cabinetFullscreenCounter"></div>
        </div>
    </div>

    <!-- Дизайнеры -->
    <section>

        <!-- Алексия -->
        <section id="Alexia">
            <section class="profile-section" data-style="Дизайн" data-prem="true"
                style="background-image: linear-gradient(to right, rgba(30, 30, 30, 0.85), rgba(30, 30, 30, 0.9)), url('')">
                <div class="avatar-container">
                    <div class="avatar-border"></div>
                    <img src="https://i.postimg.cc/K81gkwBL/photo-5226705699080367487-x.jpg" alt="Аватар"
                        class="avatar">

                </div>

                <div class="profile-info">
                    <h1>Алексия</h1>
                    <a href="https://t.me/Ha0ruka" class="profile-link">
                        <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="profile-link-icon">
                        @Ha0ruka
                    </a>
                    <p>Специальность: Дизайн </p>


                    <div class="social-links">
                        <a href="https://t.me/A0lexyaa0" class="social-link" target="_blank" title="Telegram">
                            <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="social-icon">
                        </a>
                    </div>
                </div>
            </section>

            <h2 class="favorite-works">Публикации автора</h2>
            <div class="works-carousel" id="artist1Carousel">
                <div class="works-inner" id="artist1Works">
                    <img src="https://i.postimg.cc/DwQtzWBf/photo-5244699232638725577-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/Pf9GVnCH/photo-5244699232638725578-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/NfH3WCXH/photo-5244699232638725579-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/Cxp3YCC6/photo-5244699232638725580-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/xTxzdnJn/photo-5226705699080367474-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/pVBjgDP9/photo-5226705699080367475-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/d3Jyh0jt/photo-5226705699080367476-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/5NNz16ts/photo-5226705699080367477-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/J0KBZWp3/photo-5226705699080367478-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/13bVpBrd/photo-5226705699080367485-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/K81gkwBL/photo-5226705699080367487-x.jpg" class="work-thumb-2"
                        alt="">
                </div>
                <button class="works-control prev" onclick="prevWork('artist1Works')">&#10094;</button>
                <button class="works-control next" onclick="nextWork('artist1Works')">&#10095;</button>
            </div>
            <button class="show-works-btn" onclick="openModal('modal1')">Ознакомиться со всеми работами</button>

            <!-- Модальное окно для второго художника -->
            <div id="modal1" class="modal">
                <span class="close-btn" onclick="closeModal('modal1')">&times;</span>
                <div class="modal-header">
                    <h2>Галерея работ</h2>
                </div>
                <div class="modal-content">
                    <img src="https://i.postimg.cc/DwQtzWBf/photo-5244699232638725577-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/Pf9GVnCH/photo-5244699232638725578-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/NfH3WCXH/photo-5244699232638725579-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/Cxp3YCC6/photo-5244699232638725580-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/xTxzdnJn/photo-5226705699080367474-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/pVBjgDP9/photo-5226705699080367475-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/d3Jyh0jt/photo-5226705699080367476-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/5NNz16ts/photo-5226705699080367477-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/J0KBZWp3/photo-5226705699080367478-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/13bVpBrd/photo-5226705699080367485-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/K81gkwBL/photo-5226705699080367487-x.jpg" class="modal-img" alt="">

                </div>
            </div>
        </section>

        <!-- Rikoto -->
        <section id="3">
            <section class="profile-section" data-style="Дизайн">
                <img src="https://i.postimg.cc/6qvPXv17/photo-5305270117032127745-y.jpg" alt="Аватар" class="avatar">
                <div class="profile-info">
                    <h1>Rikoto </h1>
                    <a href="https://t.me/riikoto" class="profile-link">
                        <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="profile-link-icon">
                        @riikoto
                    </a>
                    <p>Специальность: Дизайн </p>
                    <div class="social-links">
                        <a href="https://t.me/portriikoto" class="social-link" target="_blank" title="Telegram">
                            <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="social-icon">
                        </a>
                        <a href="https://pin.it/12X1xzRJa" class="social-link" target="_blank" rel="noopener noreferrer"
                            aria-label="Pin">
                            <img src="https://i.postimg.cc/T3B57t75/icons8-pinterest-48.png" alt="Pin" width="32"
                                height="32" loading="lazy" class="social-icon">
                        </a>

                        <!-- ТТ -->
                        <a href="https://www.tiktok.com/@riikoto?_t=ZS-8wekeUsZwAr&_r=1" class="social-link"
                            target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                            <img src="https://i.postimg.cc/sD6hSj5c/free-icon-video-13670382.png" alt="TT" width="32"
                                height="32" loading="lazy" class="social-icon">
                        </a>

                    </div>
                </div>
            </section>

            <h2 class="favorite-works">Публикации автора</h2>
            <div class="works-carousel" id="artist3Carousel">
                <div class="works-inner" id="artist3Works">
                    <img src="https://i.postimg.cc/XYcTq9Nd/photo-5305270117032127729-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/SKSHMjj5/photo-5305270117032127730-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/xd6hyYzd/photo-5305270117032127731-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/hGvpnmXS/photo-5305270117032127748-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/dV44g6tH/photo-5305270117032127749-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/6p9MHgw4/photo-5305270117032127751-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/8PdymN8V/photo-5305270117032127752-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/rpHgwp45/photo-5305270117032127758-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/C1dtctGs/photo-5330442873109346267-y.jpg" class="work-thumb-1"
                        alt="">

                </div>
                <button class="works-control prev" onclick="prevWork('artist3Works')">&#10094;</button>
                <button class="works-control next" onclick="nextWork('artist3Works')">&#10095;</button>
            </div>
            <button class="show-works-btn" onclick="openModal('modal3')">Ознакомиться со всеми работами</button>

            <!-- Modal -->
            <div id="modal3" class="modal">
                <span class="close-btn" onclick="closeModal('modal3')">&times;</span>
                <div class="modal-header">
                    <h2>Галерея работ</h2>
                </div>
                <div class="modal-content">
                    <img src="https://i.postimg.cc/XYcTq9Nd/photo-5305270117032127729-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/SKSHMjj5/photo-5305270117032127730-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/xd6hyYzd/photo-5305270117032127731-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/hGvpnmXS/photo-5305270117032127748-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/dV44g6tH/photo-5305270117032127749-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/6p9MHgw4/photo-5305270117032127751-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/8PdymN8V/photo-5305270117032127752-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/rpHgwp45/photo-5305270117032127758-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/C1dtctGs/photo-5330442873109346267-y.jpg" class="modal-img" alt="">


                </div>
            </div>
        </section>



    </section>


    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="image-close-btn" onclick="closeImageModal()">&times;</span>
        <div class="image-modal-content" id="imageModalContent">
            <!-- СТРЕЛКИ СКРЫТЫ НА МОБИЛЬНЫХ ЧЕРЕЗ CSS -->
            <button class="modal-nav-btn modal-prev" onclick="navigateImage(-1)">&#10094;</button>
            <img id="expandedImg" class="image-modal-img" src="" alt="Expanded Image">
            <button class="modal-nav-btn modal-next" onclick="navigateImage(1)">&#10095;</button>
            <div class="image-counter" id="imageCounter"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-container">
        <section class="footer-main-section">
            <a href="index.html" class="footer-brand-link">
                <img src="https://i.postimg.cc/hjBzgfqS/1.png" alt="Artemisia" class="footer-brand-logo">
            </a>

            <nav class="footer-navigation">
                <a href="AboutUs.html#about-site" class="footer-nav-item">Подробности о сайте</a>
                <a href="https://t.me/Artemisia_publicationBot" class="footer-nav-item">Опубликовать работу</a>
                <a href="https://t.me/Gg00Se" class="footer-nav-item">Связь с гарантом</a>
            </nav>
        </section>

        <section class="footer-secondary-section">
            <p class="footer-copyright">
                Следите за обновлениями
                <a href="https://t.me/Artemisia_website" class="footer-nav-item" target="_blank">@Artemisia_website</a>
            </p>

            <div class="footer-social-links">
                <!-- Telegram -->
                <a href="https://t.me/Artemisia_website" class="social-media-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM15.53 8.23C15.73 8.13 15.93 8.15 16.09 8.28C16.25 8.41 16.31 8.62 16.25 8.82L14.81 15.44C14.66 16.03 14.3 16.19 13.81 15.93L11.05 13.85L9.8 15.08C9.66 15.22 9.54 15.34 9.28 15.34L9.53 12.54L14.44 8.34C14.66 8.15 14.8 8.24 14.63 8.41L10.63 11.93L7.83 10.91C7.26 10.71 7.25 10.31 7.94 10.01L15.03 7.17C15.5 6.99 15.9 7.21 15.53 8.23Z" />
                    </svg>
                </a>

                <!-- VK -->
                <a href="https://vk.com/artemisia_website" class="social-media-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M18.15 16.27H16.69C16.14 16.27 15.97 15.82 15 14.83C14.12 14 13.74 13.88 13.53 13.88C13.24 13.88 13.15 13.96 13.15 14.38V15.69C13.15 16.04 13.04 16.26 12.11 16.26C10.57 16.26 8.86 15.32 7.66 13.59C5.85 11.05 5.36 9.13 5.36 8.75C5.36 8.54 5.43 8.34 5.85 8.34H7.32C7.69 8.34 7.83 8.5 7.97 8.9C8.69 11 9.89 12.8 10.38 12.8C10.57 12.8 10.65 12.71 10.65 12.25V10.1C10.6 9.12 10.07 9.03 10.07 8.68C10.07 8.5 10.21 8.34 10.44 8.34H12.73C13.04 8.34 13.15 8.5 13.15 8.88V11.77C13.15 12.08 13.28 12.19 13.38 12.19C13.56 12.19 13.72 12.08 14.05 11.74C15.1 10.57 15.85 8.76 15.85 8.76C15.95 8.55 16.11 8.34 16.48 8.34H17.93C18.37 8.34 18.47 8.58 18.37 8.89C18.19 9.74 16.41 12.25 16.43 12.25C16.27 12.5 16.21 12.61 16.43 12.9C16.58 13.13 17.09 13.55 17.43 13.94C18.05 14.65 18.53 15.24 18.66 15.65C18.77 16.06 18.57 16.27 18.15 16.27Z" />
                    </svg>
                </a>

                <!-- YouTube -->
                <a href="https://youtube.com/@artemisia_website?si=gOfyLPoGY8a4QrFF" class="social-media-icon"
                    target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
                    </svg>
                </a>

                <!-- TikTok -->
                <a href="https://www.tiktok.com/@artemisia_web_tt?_t=ZS-8xgqwBPHwfJ&_r=1" class="social-media-icon"
                    target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z" />
                    </svg>
                </a>
            </div>
        </section>
    </footer>

    <!-- Стрлека вверх -->
    <div id="backToTopBtn" class="back-to-top-btn" onclick="scrollToTop()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" />
        </svg>
    </div>

    <script>
        // ========== УПРАВЛЕНИЕ ПОЛЬЗОВАТЕЛЯМИ И ПРОФИЛЯМИ ==========

        // Глобальные переменные для управления профилем
        let socialLinksCount = 0;
        let uploadedWorksCount = 0;
        const MAX_SOCIAL_LINKS = 3;
        const MAX_WORKS = 20;

        // Переменные для полноэкранного просмотра работ в профиле
        let profileWorks = [];
        let currentProfileWorkIndex = 0;

        // Переменные для полноэкранного просмотра изображений
        let currentImages = [];
        let currentImageIndex = 0;

        // Переменные для полноэкранного просмотра работ в личном кабинете
        let cabinetWorks = [];
        let currentCabinetWorkIndex = 0;

        // Текущий пользователь
        let currentUser = null;

        // Проверка статуса авторизации
        function checkAuthStatus() {
            const userData = localStorage.getItem('currentUser');
            if (userData) {
                try {
                    currentUser = JSON.parse(userData);
                    updateAuthUI();
                } catch (e) {
                    console.error('Ошибка при чтении данных пользователя:', e);
                    currentUser = null;
                }
            } else {
                currentUser = null;
                updateAuthUI(); // Важно вызвать даже если пользователя нет
            }

            // Обновляем кнопки регистрации/входа
            updateRegistrationButton();
        }

        // Обновление интерфейса в зависимости от статуса авторизации
        function updateAuthUI() {
            const headerAuth = document.querySelector('.header-auth');
            const mobileAuth = document.querySelector('.mobile-auth');
            const mobileUserProfile = document.querySelector('.mobile-user-profile');
            const drawer = document.getElementById('drawer');

            if (currentUser) {
                // Пользователь авторизован
                const userProfile = localStorage.getItem('userProfile_' + currentUser.username);
                let profileData = {};

                if (userProfile) {
                    profileData = JSON.parse(userProfile);
                }

                const avatarSrc = profileData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg';
                const displayName = profileData.profileName || currentUser.username;
                const telegramNickname = profileData.profileNickname || '@username';

                // Header для ПК
                headerAuth.innerHTML = `
            <div class="user-profile-container" style="position: relative;">
                <button class="user-profile-btn" onclick="toggleProfileDropdown()">
                    <img src="${avatarSrc}" alt="Аватар" class="user-avatar">
                    <span class="user-name">${displayName}</span>
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" style="margin-left: 5px;">
                        <path d="M7 10l5 5 5-5z" />
                    </svg>
                </button>
                <div class="user-profile-dropdown" id="userProfileDropdown">
                    <button class="user-profile-dropdown-item" onclick="openPersonalCabinetModal()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        Личный профиль
                    </button>
                    <button class="user-profile-dropdown-item" onclick="editProfile()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                        </svg>
                        Редактировать
                    </button>
                    <div class="user-profile-dropdown-divider"></div>
                    <button class="user-profile-dropdown-item" onclick="logout()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                        </svg>
                        Выйти
                    </button>
                </div>
            </div>
        `;

                // Мобильное меню - показываем профиль пользователя
                if (mobileUserProfile) {
                    mobileUserProfile.style.display = 'flex';
                    mobileUserProfile.querySelector('#mobileUserAvatar').src = avatarSrc;
                    mobileUserProfile.querySelector('#mobileUserName').textContent = displayName;
                    mobileUserProfile.querySelector('#mobileUserTelegram').textContent = telegramNickname;
                }

                if (mobileAuth) {
                    mobileAuth.style.display = 'none';
                }
            } else {
                // Пользователь НЕ авторизован
                headerAuth.innerHTML = `
            <button class="auth-btn login-btn" onclick="openLoginModal()">Войти</button>
            <button class="auth-btn register-btn" onclick="openRegistrationModal()">Регистрация</button>
        `;

                // Мобильное меню - показываем кнопки входа/регистрации
                if (mobileUserProfile) {
                    mobileUserProfile.style.display = 'none';
                }

                if (mobileAuth) {
                    mobileAuth.style.display = 'flex';
                    mobileAuth.innerHTML = `
                <button class="auth-btn login-btn" onclick="openLoginModal()">Войти</button>
                <button class="auth-btn register-btn" onclick="openRegistrationModal()">Регистрация</button>
            `;
                }
            }

            // Также обновляем кнопку регистрации
            updateRegistrationButton();
        }

        // Новая функция для обновления кнопок действий в личном кабинете
        function updateCabinetActionsForMobile() {
            const actionsContainer = document.querySelector('.cabinet-actions');
            if (!actionsContainer) return;

            // Очищаем контейнер
            actionsContainer.innerHTML = '';

            if (window.innerWidth <= 768) {
                // Мобильная версия: кнопка редактирования сверху, закрыть и выйти снизу
                actionsContainer.innerHTML = `
            <button class="cabinet-action-btn" onclick="editProfile()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Редактировать профиль
            </button>
            <div class="cabinet-bottom-actions">
                <button class="cabinet-action-btn secondary" onclick="closePersonalCabinetModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                    Закрыть
                </button>
                <button class="cabinet-action-btn secondary" onclick="logout()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    Выйти
                </button>
            </div>
        `;
            } else {
                // Десктопная версия: все кнопки в ряд
                actionsContainer.innerHTML = `
            <button class="cabinet-action-btn" onclick="editProfile()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Редактировать профиль
            </button>
            <button class="cabinet-action-btn secondary" onclick="closePersonalCabinetModal()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
                Закрыть
            </button>
            <button class="cabinet-action-btn secondary" onclick="logout()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                </svg>
                Выйти
            </button>
        `;
            }
        }

        // Добавляем обработчик изменения размера окна
        window.addEventListener('resize', function () {
            if (document.getElementById('personalCabinetModal').style.display === 'block') {
                updateCabinetActionsForMobile();
            }
        });

        // Функция для переключения выпадающего меню профиля
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('userProfileDropdown');
            dropdown.classList.toggle('active');

            // Закрываем другие открытые выпадающие меню
            document.querySelectorAll('.user-profile-dropdown').forEach(menu => {
                if (menu !== dropdown) {
                    menu.classList.remove('active');
                }
            });

            // Закрываем меню при клике вне его
            if (dropdown.classList.contains('active')) {
                document.addEventListener('click', closeProfileDropdownOnClickOutside);
            } else {
                document.removeEventListener('click', closeProfileDropdownOnClickOutside);
            }
        }

        // Функция для закрытия выпадающего меню при клике вне его
        function closeProfileDropdownOnClickOutside(event) {
            const profileContainer = document.querySelector('.user-profile-container');
            if (!profileContainer.contains(event.target)) {
                document.getElementById('userProfileDropdown').classList.remove('active');
                document.removeEventListener('click', closeProfileDropdownOnClickOutside);
            }
        }

        // Выход из системы
        function logout() {
            // Не удаляем данные пользователя, только выходим из системы
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthUI();
            closePersonalCabinetModal();
            showProfileSuccess('Вы успешно вышли из системы');

            // Показываем кнопку входа вместо регистрации
            updateRegistrationButton();
        }

        // Функция для обновления отображения кнопки регистрации
        function updateRegistrationButton() {
            const registerButtons = document.querySelectorAll('.register-btn, .auth-btn.register-btn');
            const loginButtons = document.querySelectorAll('.login-btn, .auth-btn.login-btn');

            if (checkRegistrationStatus()) {
                // Если пользователь уже зарегистрирован, меняем текст и поведение
                registerButtons.forEach(btn => {
                    btn.textContent = 'Войти';
                    btn.onclick = openLoginModal;
                    btn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                });

                loginButtons.forEach(btn => {
                    btn.style.display = 'none'; // Скрываем кнопку входа, т.к. регистрация теперь ведет на вход
                });
            } else {
                // Обычное состояние
                registerButtons.forEach(btn => {
                    btn.textContent = 'Регистрация';
                    btn.onclick = openRegistrationModal;
                    btn.style.background = 'linear-gradient(45deg, #ffcc00, #ffdd33)';
                });

                loginButtons.forEach(btn => {
                    btn.style.display = 'block';
                });
            }
        }

        // ========== ФУНКЦИИ РЕГИСТРАЦИИ И ВХОДА ==========

        function openRegistrationModal() {
            // Проверяем, не зарегистрирован ли пользователь уже
            if (checkRegistrationStatus()) {
                // Если пользователь уже зарегистрирован, показываем сообщение и открываем вход
                showRegistrationStatusMessage();
                setTimeout(() => {
                    closeRegistrationModal();
                    openLoginModal();
                }, 2000);
                return;
            }

            const modal = document.getElementById('registrationModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.width = '100%';

            // Очищаем предыдущие сообщения
            document.getElementById('message').style.display = 'none';
            document.getElementById('registrationCode').value = '';

            // Фокусируемся на поле ввода с задержкой для мобильных устройств
            setTimeout(() => {
                const input = document.getElementById('registrationCode');
                input.focus();

                // Для iOS - дополнительная проверка фокуса
                if (document.activeElement !== input) {
                    input.setAttribute('style', 'font-size: 16px;');
                    setTimeout(() => input.focus(), 100);
                }
            }, 350);
        }

        // Функция для показа статуса регистрации
        function showRegistrationStatusMessage() {
            const registeredUsers = getRegisteredUsers();

            if (registeredUsers.length > 0) {
                if (registeredUsers.length === 1) {
                    const user = registeredUsers[0];
                    showMessage(`Вы уже зарегистрированы как "${user.profileName}"! Перенаправляем на вход...`, 'success');
                } else {
                    showMessage(`На этом устройстве уже зарегистрировано ${registeredUsers.length} пользователя. Перенаправляем на вход...`, 'success');
                }
            } else if (currentUser) {
                showMessage(`Вы уже авторизованы как "${currentUser.profileName}"!`, 'success');
            }
        }

        function closeRegistrationModal() {
            const modal = document.getElementById('registrationModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.body.style.position = 'static';
            document.body.style.width = 'auto';
        }

        function openLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.width = '100%';

            // Очищаем предыдущие сообщения
            document.getElementById('loginMessage').style.display = '';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';

            // Фокусируемся на поле ввода
            setTimeout(() => {
                const input = document.getElementById('loginEmail');
                input.focus();

                if (document.activeElement !== input) {
                    input.setAttribute('style', 'font-size: 16px;');
                    setTimeout(() => input.focus(), 100);
                }
            }, 350);
        }

        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.body.style.position = 'static';
            document.body.style.width = 'auto';
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';

            // Прокручиваем к сообщению на мобильных устройствах
            if (window.innerWidth <= 768) {
                setTimeout(() => {
                    messageDiv.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'nearest'
                    });
                }, 100);
            }

            // Автоматически скрываем сообщение через 5 секунд (кроме успешных)
            if (type !== 'success') {
                setTimeout(() => {
                    if (messageDiv.style.display === 'block') {
                        messageDiv.style.display = 'none';
                    }
                }, 5000);
            }
        }

        function showLoginMessage(text, type) {
            const messageDiv = document.getElementById('loginMessage');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';

            // Прокручиваем к сообщению на мобильных устройствах
            if (window.innerWidth <= 768) {
                setTimeout(() => {
                    messageDiv.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'nearest'
                    });
                }, 100);
            }

            // Автоматически скрываем сообщение через 5 секунд (кроме успешных)
            if (type !== 'success') {
                setTimeout(() => {
                    if (messageDiv.style.display === 'block') {
                        messageDiv.style.display = 'none';
                    }
                }, 5000);
            }
        }

        function showWelcomeNotification() {
            // Создаем красивое уведомление о успешной регистрации
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #4CAF50, #45a049);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                max-width: 300px;
                font-family: "Comfortaa", sans-serif;
                animation: slideInRight 0.5s ease-out;
            `;

            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">🎉 Добро пожаловать!</div>
                <div style="font-size: 0.9em;">Регистрация в Artemisia завершена успешно!</div>
            `;

            document.body.appendChild(notification);

            // Удаляем уведомление через 5 секунд
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 500);
            }, 5000);
        }

        // Добавляем CSS анимации для уведомления
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOutRight {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);


        // ========== ОБРАБОТКА URL-ПАРАМЕТРОВ ДЛЯ ОТКРЫТИЯ МОДАЛЬНЫХ ОКОН ==========

        // Функция для получения параметров из URL
        function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            const results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Функция для открытия модальных окон по параметрам URL
        function openModalFromUrl() {
            const modalParam = getUrlParameter('modal');

            if (modalParam === 'login') {
                openLoginModal();
            } else if (modalParam === 'register') {
                openRegistrationModal();
            } else if (modalParam === 'profile') {
                openProfileSetupModal();
            } else if (modalParam === 'cabinet') {
                openPersonalCabinetModal();
            }
        }

        // Функция для обновления URL без перезагрузки страницы
        function updateUrl(parameters) {
            const url = new URL(window.location);

            // Удаляем существующие параметры модальных окон
            const paramsToRemove = ['modal', 'action', 'tab'];
            paramsToRemove.forEach(param => {
                url.searchParams.delete(param);
            });

            // Добавляем новые параметры
            Object.keys(parameters).forEach(key => {
                if (parameters[key]) {
                    url.searchParams.set(key, parameters[key]);
                }
            });

            window.history.replaceState({}, '', url);
        }

        // Функция для генерации ссылок с параметрами
        function generateModalLink(modalType) {
            const url = new URL(window.location);
            url.searchParams.set('modal', modalType);
            return url.toString();
        }

        // Обновляем функции открытия модальных окон
        function openRegistrationModalWithUrl() {
            openRegistrationModal();
            updateUrl({ modal: 'register' });
        }

        function openLoginModalWithUrl() {
            openLoginModal();
            updateUrl({ modal: 'login' });
        }

        function openProfileSetupModalWithUrl() {
            openProfileSetupModal();
            updateUrl({ modal: 'profile' });
        }

        function openPersonalCabinetModalWithUrl() {
            openPersonalCabinetModal();
            updateUrl({ modal: 'cabinet' });
        }

        // Обновляем функции закрытия модальных окон
        function closeRegistrationModalWithUrl() {
            closeRegistrationModal();
            updateUrl({});
        }

        function closeLoginModalWithUrl() {
            closeLoginModal();
            updateUrl({});
        }

        function closeProfileSetupModalWithUrl() {
            closeProfileSetupModal();
            updateUrl({});
        }

        function closePersonalCabinetModalWithUrl() {
            closePersonalCabinetModal();
            updateUrl({});
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function () {
            // Инициализация модального окна изображений
            initImageModal();

            // Обрабатываем параметры URL при загрузке
            setTimeout(openModalFromUrl, 100);

            // Обновляем все ссылки на странице
            updateModalLinks();
        });

        // Функция для обновления всех ссылок на модальные окна
        function updateModalLinks() {
            // Обновляем ссылки в header
            const headerLoginBtn = document.querySelector('.header-auth .login-btn');
            const headerRegisterBtn = document.querySelector('.header-auth .register-btn');

            if (headerLoginBtn) {
                headerLoginBtn.onclick = openLoginModalWithUrl;
            }
            if (headerRegisterBtn) {
                headerRegisterBtn.onclick = openRegistrationModalWithUrl;
            }

            // Обновляем ссылки в мобильном меню
            const mobileLoginBtn = document.querySelector('.mobile-auth .login-btn');
            const mobileRegisterBtn = document.querySelector('.mobile-auth .register-btn');

            if (mobileLoginBtn) {
                mobileLoginBtn.onclick = openLoginModalWithUrl;
            }
            if (mobileRegisterBtn) {
                mobileRegisterBtn.onclick = openRegistrationModalWithUrl;
            }

            // Обновляем ссылки в других местах (если есть)
            const profileSetupLinks = document.querySelectorAll('[onclick*="openProfileSetupModal"]');
            profileSetupLinks.forEach(link => {
                link.onclick = openProfileSetupModalWithUrl;
            });

            const cabinetLinks = document.querySelectorAll('[onclick*="openPersonalCabinetModal"]');
            cabinetLinks.forEach(link => {
                link.onclick = openPersonalCabinetModal; // Убрали WithUrl
            });
        }

        // Добавляем обработчики для кнопок закрытия
        document.addEventListener('DOMContentLoaded', function () {
            // Переопределяем обработчики закрытия модальных окон
            const closeRegistrationBtn = document.querySelector('#registrationModal .close-modal');
            const closeLoginBtn = document.querySelector('#loginModal .close-modal');
            const closeProfileSetupBtn = document.querySelector('#profileSetupModal .close-modal');
            const closeCabinetBtn = document.querySelector('#personalCabinetModal .close-modal');

            if (closeRegistrationBtn) {
                closeRegistrationBtn.onclick = closeRegistrationModalWithUrl;
            }
            if (closeLoginBtn) {
                closeLoginBtn.onclick = closeLoginModalWithUrl;
            }
            if (closeProfileSetupBtn) {
                closeProfileSetupBtn.onclick = closeProfileSetupModalWithUrl;
            }
            if (closeCabinetBtn) {
                closeCabinetBtn.onclick = closePersonalCabinetModalWithUrl;
            }
        });

        // Обработка кнопки "Назад" в браузере
        window.addEventListener('popstate', function (event) {
            // Закрываем все модальные окна при нажатии "Назад"
            closeAllModals();
            // Снова проверяем URL на наличие параметров
            setTimeout(openModalFromUrl, 50);
        });

        function closeAllModals() {
            closeRegistrationModal();
            closeLoginModal();
            closeProfileSetupModal();
            closePersonalCabinetModal();
            updateUrl({});
        }

        // ОСНОВНАЯ ФУНКЦИЯ РЕГИСТРАЦИИ
        function submitRegistration(event) {
            event.preventDefault();

            // Проверяем, не авторизован ли пользователь уже
            if (currentUser) {
                showMessage('Вы уже зарегистрированы и авторизованы!', 'success');
                closeRegistrationModal();
                return;
            }

            const code = document.getElementById('registrationCode').value.trim();
            const submitBtn = document.getElementById('submitBtn');

            if (!code) {
                showMessage('Пожалуйста, введите код подтверждения', 'error');
                document.getElementById('registrationCode').focus();
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Проверка...';

            // Проверка кода - ТОЛЬКО 888666
            setTimeout(() => {
                if (code === '888666') {
                    showMessage('Код подтвержден! Теперь вы можете заполнить анкету.', 'success');

                    // Через 2 секунды закрываем модальное окно и открываем настройку профиля
                    setTimeout(() => {
                        closeRegistrationModal();
                        openProfileSetupModal();
                    }, 2000);
                } else {
                    showMessage('Неверный код подтверждения. Введите правильный код: 888666', 'error');
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Получить доступ к анкете';
                    document.getElementById('registrationCode').focus();
                    document.getElementById('registrationCode').select();
                }
            }, 1500);
        }

        // Функция для проверки статуса регистрации
        function checkRegistrationStatus() {
            // Проверяем, есть ли зарегистрированные пользователи в localStorage
            const registeredUsers = Object.keys(localStorage).filter(key =>
                key.startsWith('user_') && key !== 'currentUser'
            );

            return registeredUsers.length > 0 || currentUser !== null;
        }

        // Функция для получения всех зарегистрированных пользователей
        function getRegisteredUsers() {
            const users = [];
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('user_') && key !== 'currentUser') {
                    try {
                        const userData = JSON.parse(localStorage.getItem(key));
                        users.push({
                            id: key.replace('user_', ''),
                            username: userData.username,
                            profileName: userData.profileName
                        });
                    } catch (e) {
                        console.error('Ошибка при чтении пользователя:', key, e);
                    }
                }
            });
            return users;
        }

        // ФУНКЦИЯ ВХОДА
        // ОБНОВЛЕННАЯ ФУНКЦИЯ ВХОДА С ПРОВЕРКОЙ ЗАШИФРОВАННОГО ПАРОЛЯ
        function submitLogin(event) {
            event.preventDefault();

            const username = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');

            if (!username || !password) {
                showLoginMessage('Пожалуйста, заполните все поля', 'error');
                return;
            }

            loginBtn.disabled = true;
            loginBtn.textContent = 'Проверка пароля...';

            // Проверяем пользователя через базу данных
            setTimeout(() => {
                const user = findUserInDatabase(username);

                if (user && user.encryptedPassword) {
                    // Проверяем пароль через зашифрованную версию
                    const isPasswordValid = verifyEncryptedPassword(user.encryptedPassword, password);

                    if (isPasswordValid) {
                        // Синхронизируем данные с базы данных
                        syncUserDataFromDatabase(username);

                        // Успешный вход
                        const userData = {
                            username: username,
                            registrationDate: user.registrationDate || new Date().toISOString(),
                            profileComplete: true,
                            profileName: user.profileName,
                            hasPassword: true
                        };

                        localStorage.setItem('currentUser', JSON.stringify(userData));
                        currentUser = userData;
                        updateAuthUI();

                        showLoginMessage('Вход выполнен успешно!', 'success');

                        // Закрываем модальное окно через 1.5 секунды
                        setTimeout(() => {
                            closeLoginModal();
                            // Показываем личный кабинет после успешного входа
                            openPersonalCabinetModal();
                        }, 1500);
                    } else {
                        showLoginMessage('Неверный логин или пароль', 'error');
                        loginBtn.disabled = false;
                        loginBtn.textContent = 'Войти';
                    }
                } else {
                    showLoginMessage('Пользователь не найден или пароль не установлен', 'error');
                    loginBtn.disabled = false;
                    loginBtn.textContent = 'Войти';
                }
            }, 1500);
        }

        // ФУНКЦИИ ДЛЯ МОДЕРАТОРОВ (добавление зашифрованных паролей в базу данных)

        // Функция для добавления зашифрованного пароля в базу данных (для модераторов)
        function addEncryptedUserPassword(username, encryptedPassword) {
            if (!username || !encryptedPassword) {
                console.error('Неверные данные для добавления пароля');
                return false;
            }

            // Ищем пользователя в базе данных
            const user = findUserInDatabase(username);

            if (user) {
                // Обновляем запись с зашифрованным паролем
                user.encryptedPassword = encryptedPassword;
                user.hasPassword = true;

                // Обновляем базу данных (в реальном проекте здесь был бы запрос на сервер)
                userDatabase[username] = user;

                console.log(`✅ Зашифрованный пароль добавлен для пользователя: ${username}`);

                // Обновляем информацию для пользователя
                updateUserPasswordStatus(username, true);

                return true;
            } else {
                console.error(`Пользователь ${username} не найден в базе данных`);
                return false;
            }
        }

        // Функция для обновления статуса пароля пользователя
        function updateUserPasswordStatus(username, hasPassword) {
            // Обновляем информацию в localStorage если пользователь зарегистрирован
            const userProfile = localStorage.getItem('userProfile_' + username);
            if (userProfile) {
                const profileData = JSON.parse(userProfile);
                profileData.hasPassword = hasPassword;
                localStorage.setItem('userProfile_' + username, JSON.stringify(profileData));
            }

            // Обновляем текущего пользователя если он авторизован
            if (currentUser && currentUser.username === username) {
                currentUser.hasPassword = hasPassword;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }

        // Функция для проверки статуса пароля
        function checkPasswordStatus(username) {
            const user = findUserInDatabase(username);
            if (user) {
                return {
                    hasPassword: !!user.encryptedPassword,
                    isEncrypted: true
                };
            }
            return { hasPassword: false, isEncrypted: false };
        }


        // ========== ИНСТРУКЦИИ ДЛЯ МОДЕРАТОРОВ ==========

        // Функция для отображения инструкций модераторам
        function showModeratorInstructions() {
            const usersWithoutPasswords = getUsersWithoutPasswords();

            console.log(`
=== ИНСТРУКЦИЯ ДЛЯ МОДЕРАТОРА ===

Пользователи без паролей (${usersWithoutPasswords.length}):
${usersWithoutPasswords.map(user => `- ${user}`).join('\n')}

Добавление пароля для пользователя:
addUserPassword("user_id", "password")

Публикация профиля:
publishUserProfile("user_id")

Пример:
addUserPassword("user_abc123", "mypassword123")
publishUserProfile("user_abc123")
    `);
        }

        // Автоматически показываем инструкции при загрузке (в консоли)
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(showModeratorInstructions, 2000);
        });

        // ========== ФУНКЦИИ ЛИЧНОГО КАБИНЕТА ==========

        function openPersonalCabinetModal() {
            if (!currentUser) {
                openLoginModal();
                return;
            }

            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Добавляем элемент статуса публикации если его нет
            updatePersonalCabinetHTML();

            // Загружаем данные профиля
            loadPersonalCabinetData();
        }

        function closePersonalCabinetModal() {
            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function loadCabinetSocialLinks(socialLinks) {
            const container = document.getElementById('cabinetSocialLinks');
            container.innerHTML = '';

            if (socialLinks && socialLinks.length > 0) {
                socialLinks.forEach(link => {
                    const socialLink = document.createElement('a');
                    socialLink.href = getSocialPrefix(link.platform) + link.username;
                    socialLink.target = '_blank';
                    socialLink.className = 'cabinet-social-link';

                    const iconSrc = getSocialIconSrc(link.platform);
                    socialLink.innerHTML = `
                <img src="${iconSrc}" alt="${link.platform}" class="cabinet-social-icon">
                <span>${link.username}</span>
            `;

                    container.appendChild(socialLink);
                });
            } else {
                container.innerHTML = '<p style="color: #aaa; text-align: center;">Социальные сети не добавлены</p>';
            }
        }

        function getSocialIconSrc(platform) {
            const icons = {
                'telegram': 'https://i.postimg.cc/cJXCqTTc/icons8-48.png',
                'instagram': 'https://i.postimg.cc/8zq7J7J7/icons8-instagram-48.png',
                'pinterest': 'https://i.postimg.cc/T3B57t75/icons8-pinterest-48.png',
                'youtube': 'https://i.postimg.cc/7Yr7y0J0/icons8-youtube-48.png',
                'artstation': 'https://i.postimg.cc/8C3Q3Q3Q/icons8-artstation-48.png',
                'behance': 'https://i.postimg.cc/8C3Q3Q3Q/icons8-behance-48.png'
            };

            return icons[platform] || 'https://i.postimg.cc/cJXCqTTc/icons8-48.png';
        }


        function loadCabinetDescription(description) {
            const container = document.getElementById('cabinetDescription');

            if (description && description.trim() !== '') {
                // Для бесплатных пользователей показываем только начало текста
                container.textContent = description.length > 200 ?
                    description.substring(0, 200) + '...' : description;
                container.classList.remove('premium-locked');
                container.classList.add('free-tier'); // Добавляем класс для бесплатного доступа
            } else {
                container.innerHTML = `
            <div class="premium-locked">
                <div class="premium-icon">🔒</div>
                <p class="premium-text">Описание профиля доступно только в премиум-версии</p>
            </div>
        `;
            }
        }

        function loadCabinetWorks(works) {
            const container = document.getElementById('cabinetWorksGrid');
            container.innerHTML = '';

            if (works && works.length > 0) {
                works.forEach(work => {
                    const workItem = document.createElement('div');
                    workItem.className = 'cabinet-work-item';
                    workItem.innerHTML = `<img src="${work}" alt="Работа" onclick="openCabinetFullscreenModal('${work}')">`;
                    container.appendChild(workItem);
                });
            } else {
                container.innerHTML = '<p style="color: #aaa; text-align: center; grid-column: 1 / -1;">Работы не добавлены</p>';
            }
        }

        function openCabinetWorksModal() {
            const modal = document.getElementById('cabinetWorksModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeCabinetWorksModal() {
            const modal = document.getElementById('cabinetWorksModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ========== ФУНКЦИИ ДЛЯ ПОЛНОЭКРАННОГО ПРОСМОТРА РАБОТ В ЛИЧНОМ КАБИНЕТЕ ==========

        function openCabinetFullscreenModal(workSrc) {
            // Получаем все работы из личного кабинета
            const worksContainer = document.getElementById('cabinetWorksGrid');
            const workItems = worksContainer.querySelectorAll('.cabinet-work-item img');

            // Собираем все URL изображений
            cabinetWorks = Array.from(workItems).map(img => img.src);

            // Находим индекс текущей работы
            currentCabinetWorkIndex = cabinetWorks.indexOf(workSrc);

            if (currentCabinetWorkIndex === -1) {
                currentCabinetWorkIndex = 0;
            }

            // Открываем модальное окно
            const modal = document.getElementById('cabinetFullscreenModal');
            const modalImg = document.getElementById('cabinetFullscreenImg');

            modalImg.src = cabinetWorks[currentCabinetWorkIndex];
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Обновляем счетчик
            updateCabinetFullscreenCounter();

            // Добавляем обработчики событий для навигации
            setupCabinetFullscreenModalEvents();
        }


        function closeCabinetFullscreenModal() {
            const modal = document.getElementById('cabinetFullscreenModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // Удаляем обработчики событий
            removeCabinetFullscreenModalEvents();
        }

        function navigateCabinetWork(direction) {
            if (cabinetWorks.length === 0 || cabinetWorks.length === 1) return;

            currentCabinetWorkIndex += direction;

            // Проверяем границы
            if (currentCabinetWorkIndex < 0) {
                currentCabinetWorkIndex = cabinetWorks.length - 1;
            } else if (currentCabinetWorkIndex >= cabinetWorks.length) {
                currentCabinetWorkIndex = 0;
            }

            const modalImg = document.getElementById('cabinetFullscreenImg');

            // Плавная смена изображения
            modalImg.style.opacity = '0';

            setTimeout(() => {
                modalImg.src = cabinetWorks[currentCabinetWorkIndex];
                modalImg.style.opacity = '1';

                // Обновляем счетчик
                updateCabinetFullscreenCounter();
            }, 200);
        }


        function updateCabinetFullscreenCounter() {
            const counter = document.getElementById('cabinetFullscreenCounter');
            if (cabinetWorks.length > 1) {
                counter.textContent = `${currentCabinetWorkIndex + 1} / ${cabinetWorks.length}`;
                counter.style.display = 'block';

                // Показываем стрелки навигации
                document.querySelectorAll('.cabinet-fullscreen-nav').forEach(btn => {
                    btn.style.display = 'flex';
                });
            } else {
                counter.style.display = 'none';

                // Скрываем стрелки навигации
                document.querySelectorAll('.cabinet-fullscreen-nav').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        // ========== ДОБАВИТЬ В CSS ДЛЯ КОРРЕКТНОГО ОТОБРАЖЕНИЯ СТРЕЛОК ==========

        // Добавьте эти стили в ваш CSS
        const navigationFixStyles = `
@media (min-width: 769px) {
    .modal-nav-btn,
    .profile-works-modal-nav,
    .cabinet-fullscreen-nav {
        display: flex !important;
        align-items: center;
        justify-content: center;
    }
}

@media (max-width: 768px) {
    .modal-nav-btn,
    .profile-works-modal-nav,
    .cabinet-fullscreen-nav {
        display: none !important;
    }
}

/* Плавные переходы для изображений */
.image-modal-img,
.profile-works-modal-img,
.cabinet-fullscreen-img {
    transition: opacity 0.3s ease-in-out;
}
`;

        // Добавляем стили в документ
        const styleElement = document.createElement('style');
        styleElement.textContent = navigationFixStyles;
        document.head.appendChild(styleElement);

        function setupCabinetFullscreenModalEvents() {
            // Обработчики для клавиатуры (только для десктопов)
            if (window.innerWidth > 768) {
                document.addEventListener('keydown', handleCabinetFullscreenKeydown);
            }

            // Обработчики для свайпа (работают на всех устройствах)
            const modalContent = document.querySelector('.cabinet-fullscreen-content');
            modalContent.addEventListener('touchstart', handleCabinetFullscreenTouchStart, { passive: false });
            modalContent.addEventListener('touchmove', handleCabinetFullscreenTouchMove, { passive: false });
            modalContent.addEventListener('touchend', handleCabinetFullscreenTouchEnd);
        }

        function removeCabinetFullscreenModalEvents() {
            document.removeEventListener('keydown', handleCabinetFullscreenKeydown);

            const modalContent = document.querySelector('.cabinet-fullscreen-content');
            modalContent.removeEventListener('touchstart', handleCabinetFullscreenTouchStart);
            modalContent.removeEventListener('touchmove', handleCabinetFullscreenTouchMove);
            modalContent.removeEventListener('touchend', handleCabinetFullscreenTouchEnd);
        }

        function handleCabinetFullscreenKeydown(e) {
            if (e.key === 'Escape') {
                closeCabinetFullscreenModal();
            } else if (e.key === 'ArrowLeft') {
                navigateCabinetWork(-1);
            } else if (e.key === 'ArrowRight') {
                navigateCabinetWork(1);
            }
        }

        let cabinetFullscreenTouchStartX = 0;
        let cabinetFullscreenTouchEndX = 0;

        function handleCabinetFullscreenTouchStart(e) {
            cabinetFullscreenTouchStartX = e.touches[0].clientX;
            e.preventDefault();
        }

        function handleCabinetFullscreenTouchMove(e) {
            if (!cabinetFullscreenTouchStartX) return;
            cabinetFullscreenTouchEndX = e.touches[0].clientX;
            const diff = cabinetFullscreenTouchStartX - cabinetFullscreenTouchEndX;

            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }

        function handleCabinetFullscreenTouchEnd() {
            if (!cabinetFullscreenTouchStartX || !cabinetFullscreenTouchEndX) return;

            const diff = cabinetFullscreenTouchStartX - cabinetFullscreenTouchEndX;
            const threshold = 50;

            if (diff > threshold) {
                navigateCabinetWork(1);
            } else if (diff < -threshold) {
                navigateCabinetWork(-1);
            }

            cabinetFullscreenTouchStartX = 0;
            cabinetFullscreenTouchEndX = 0;
        }

        function editProfile() {
            closePersonalCabinetModal();
            openProfileSetupModal();
        }

        // ========== ФУНКЦИИ НАСТРОЙКИ ПРОФИЛЯ ==========

        function openProfileSetupModal() {
            const modal = document.getElementById('profileSetupModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Инициализация при открытии
            initializeProfileSetup();

            // Если пользователь авторизован, загружаем его существующий профиль
            if (currentUser) {
                setTimeout(() => {
                    loadExistingProfile();
                }, 100);
            }

            // Сбрасываем состояние кнопки переключения видимости пароля
            const passwordToggle = document.querySelector('#passwordSection .password-toggle');
            if (passwordToggle) {
                passwordToggle.classList.remove('show');
                passwordToggle.classList.add('hide');
                passwordToggle.setAttribute('title', 'Показать пароль');

                const passwordInput = document.getElementById('profilePassword');
                if (passwordInput) {
                    passwordInput.type = 'password';
                }
            }
        }

        // ========== СИСТЕМА ШИФРОВАНИЯ ПАРОЛЕЙ ==========

        // Ключ для шифрования (в реальном проекте должен быть более сложным и храниться на сервере)
        const ENCRYPTION_KEY = 'artemisia_secure_key_2024';

        // Функция для шифрования пароля
        function encryptPassword(password) {
            try {
                // Простое шифрование Base64 с добавлением соли
                const salt = Math.random().toString(36).substring(2, 15);
                const encrypted = btoa(password + '::' + salt + '::' + ENCRYPTION_KEY);
                return encrypted;
            } catch (error) {
                console.error('Ошибка шифрования пароля:', error);
                return null;
            }
        }

        // Функция для расшифровки пароля
        function decryptPassword(encryptedPassword) {
            try {
                const decrypted = atob(encryptedPassword);
                const parts = decrypted.split('::');

                if (parts.length === 3 && parts[2] === ENCRYPTION_KEY) {
                    return parts[0]; // Возвращаем только оригинальный пароль
                }
                return null;
            } catch (error) {
                console.error('Ошибка дешифровки пароля:', error);
                return null;
            }
        }

        // Функция для проверки пароля без его расшифровки
        function verifyEncryptedPassword(encryptedPassword, inputPassword) {
            try {
                const decrypted = atob(encryptedPassword);
                const parts = decrypted.split('::');

                if (parts.length === 3 && parts[2] === ENCRYPTION_KEY) {
                    const originalPassword = parts[0];
                    return originalPassword === inputPassword;
                }
                return false;
            } catch (error) {
                console.error('Ошибка проверки пароля:', error);
                return false;
            }
        }

        // Функция для создания зашифрованного профиля
        function createEncryptedProfile(profileData, username, userPassword) {
            // Шифруем пароль
            const encryptedPassword = encryptPassword(userPassword);

            // Создаем профиль с зашифрованным паролем
            const profileId = profileData.profileName.toLowerCase().replace(/\s+/g, '');

            // Генерируем код профиля с зашифрованным паролем
            const profileCode = generateProfileCodeWithEncryption(profileData, username, encryptedPassword);

            return {
                username: username,
                profileData: profileData,
                encryptedPassword: encryptedPassword,
                profileCode: profileCode
            };
        }


        // ========== ПАНЕЛЬ МОДЕРАТОРА С ИНФОРМАЦИЕЙ О ПОСТОЯННЫХ ID ==========

        function showModeratorPanel() {
            const pendingUsers = getPendingUsers();

            console.log(`
╔═══════════════════════════════════════════════╗
║           ПАНЕЛЬ МОДЕРАТОРА                   ║
╠═══════════════════════════════════════════════╣
║ Пользователей ожидает публикации: ${pendingUsers.length}
║ Система: ПОСТОЯННЫЕ ID (на основе никнейма)
╚═══════════════════════════════════════════════╝
    `);

            pendingUsers.forEach((user, index) => {
                const nickname = user.id.split('_')[1]; // Извлекаем никнейм из ID

                console.log(`
${index + 1}. ${user.name}
   ├─ User ID: ${user.id}
   ├─ Никнейм: ${nickname}
   ├─ Telegram: ${user.telegram}
   ├─ Пароль: ${user.password}
   ├─ Специальность: ${user.style}
   ├─ Работ: ${user.worksCount}
   ├─ Соц. сетей: ${user.socialCount}
   └─ Статус: ${user.hasPassword ? '✅ Пароль добавлен' : '❌ Ожидает пароль'}
   
   КОМАНДЫ ДЛЯ АКТИВАЦИИ:
   addUserPassword("${user.id}", "${user.password}");
   publishUserProfile("${user.id}");
        `);
            });

            if (pendingUsers.length === 0) {
                console.log('✅ Все пользователи опубликованы!');
            }


        }

        function unlockBasicInfoFields() {
            const nameInput = document.getElementById('profileName');
            const nicknameInput = document.getElementById('profileNickname');
            const styleSelect = document.getElementById('profileStyle');
            const customStyleInput = document.getElementById('profileCustomStyle');

            // Разблокируем поля
            nameInput.readOnly = false;
            nicknameInput.readOnly = false;
            styleSelect.disabled = false;

            // Восстанавливаем стандартные стили
            nameInput.style.backgroundColor = '';
            nameInput.style.color = '';
            nameInput.style.cursor = '';

            nicknameInput.style.backgroundColor = '';
            nicknameInput.style.color = '';
            nicknameInput.style.cursor = '';

            styleSelect.style.backgroundColor = '';
            styleSelect.style.color = '';
            styleSelect.style.cursor = '';

            customStyleInput.style.backgroundColor = '';
            customStyleInput.style.color = '';
            customStyleInput.style.cursor = '';

            // Убираем подсказки о блокировке
            removeLockedFieldHints();
        }

        function removeLockedFieldHints() {
            // Удаляем подсказки с полей
            document.querySelectorAll('.locked-field-hint').forEach(hint => {
                hint.remove();
            });

            // Удаляем информационное сообщение
            const infoMessage = document.querySelector('.locked-info-message');
            if (infoMessage) {
                infoMessage.remove();
            }

            // Удаляем индикаторы блокировки
            document.querySelectorAll('.locked-indicator').forEach(indicator => {
                indicator.remove();
            });
        }


        function closeProfileSetupModal() {
            const modal = document.getElementById('profileSetupModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function initializeProfileSetup() {
            // Сбрасываем счетчики
            socialLinksCount = 0;
            uploadedWorksCount = 0;

            // Загружаем существующие данные профиля
            const userProfile = localStorage.getItem('userProfile_' + (currentUser ? currentUser.username : 'guest'));
            if (userProfile) {
                const profileData = JSON.parse(userProfile);

                // Заполняем поля формы
                document.getElementById('profileName').value = profileData.profileName || '';
                document.getElementById('profileNickname').value = profileData.profileNickname || '';
                document.getElementById('profileStyle').value = profileData.profileStyle || '';

                if (profileData.profileStyle === 'Другое') {
                    document.getElementById('profileCustomStyle').value = profileData.profileCustomStyle || '';
                    document.getElementById('profileCustomStyle').disabled = false;
                }

                document.getElementById('profileDescription').value = profileData.profileDescription || '';
                document.getElementById('profilePassword').value = profileData.userPassword || '';

                // ВАЖНОЕ ИЗМЕНЕНИЕ: Блокируем основные поля для существующего профиля
                if (currentUser) {
                    lockBasicInfoFields();
                }

                // Загружаем аватар
                if (profileData.avatar) {
                    const preview = document.getElementById('avatarPreview');
                    preview.innerHTML = `<img src="${profileData.avatar}" alt="Аватар">`;
                }

                // Загружаем социальные сети
                if (profileData.socialLinks && profileData.socialLinks.length > 0) {
                    initializeSocialLinksWithData(profileData.socialLinks);
                }

                // Загружаем работы
                if (profileData.works && profileData.works.length > 0) {
                    initializeWorksWithData(profileData.works);
                }
            } else {
                // Для нового профиля - разблокируем все поля
                unlockBasicInfoFields();
                initializeSocialLinks();
                initializeWorks();
            }

            setupEventListeners();
            setupDynamicValidation();
            updateWorksCounter();

            // Запускаем первоначальную валидацию
            setTimeout(() => {
                validateName();
                validateNickname();
                validateStyle();
                validatePassword();
                validateSocialLinks();
                validateWorks();
                validateAvatar();
                updateOverallValidation();
            }, 200);
        }

        function initializeSocialLinksWithData(socialLinks) {
            const container = document.getElementById('socialLinksContainer');
            container.innerHTML = '';
            socialLinksCount = 0;

            socialLinks.forEach(link => {
                addSocialLinkWithData(link.platform, link.username);
            });

            updateSocialLimitWarning();
            updateAddSocialButton();
        }

        function addSocialLinkWithData(platform, username) {
            if (socialLinksCount >= MAX_SOCIAL_LINKS) return;

            const container = document.getElementById('socialLinksContainer');
            const socialId = 'social_' + Date.now();

            const socialHtml = `
                <div class="social-link-input" id="${socialId}">
                    <select class="social-platform-select" onchange="updateSocialLinkPrefix(this)">
                        <option value="telegram" ${platform === 'telegram' ? 'selected' : ''}>Telegram</option>
                        <option value="instagram" ${platform === 'instagram' ? 'selected' : ''}>Instagram</option>
                        <option value="pinterest" ${platform === 'pinterest' ? 'selected' : ''}>Pinterest</option>
                        <option value="youtube" ${platform === 'youtube' ? 'selected' : ''}>YouTube</option>
                        <option value="artstation" ${platform === 'artstation' ? 'selected' : ''}>ArtStation</option>
                        <option value="behance" ${platform === 'behance' ? 'selected' : ''}>Behance</option>
                    </select>
                    <div class="social-link-input-group">
                        <span class="social-link-prefix" id="${socialId}_prefix">${getSocialPrefix(platform)}</span>
                        <input type="text" class="form-input social-link-input-field" 
                               placeholder="username" value="${username || ''}"
                               oninput="validateSocialLink(this)">
                    </div>
                    <button type="button" class="remove-btn" onclick="removeSocialLink('${socialId}')">Удалить</button>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', socialHtml);
            socialLinksCount++;
            updateSocialLimitWarning();
            updateAddSocialButton();
        }

        function getSocialPrefix(platform) {
            const prefixes = {
                'telegram': 'https://t.me/',
                'instagram': 'https://instagram.com/',
                'pinterest': 'https://pinterest.com/',
                'youtube': 'https://youtube.com/',
                'artstation': 'https://artstation.com/',
                'behance': 'https://behance.net/'
            };

            return prefixes[platform] || 'https://';
        }

        function initializeWorksWithData(works) {
            const container = document.getElementById('worksContainer');
            container.innerHTML = '';
            uploadedWorksCount = 0;

            works.forEach(workSrc => {
                addWorkWithData(workSrc);
            });

            updateWorksCounter();
            updateAddWorkButton();
        }

        function addWorkWithData(workSrc) {
            if (uploadedWorksCount >= MAX_WORKS) return;

            const container = document.getElementById('worksContainer');
            const workId = 'work_' + Date.now();

            const workHtml = `
                <div class="work-link-preview" id="${workId}">
                    <img src="${workSrc}" alt="Работа" onerror="handleImageError(this, 'work')" onclick="openProfileWorksModal('${workId}')">
                    <button type="button" class="remove-btn" onclick="removeWork('${workId}')" style="position: absolute; top: 5px; right: 5px; padding: 2px 6px;">×</button>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', workHtml);
            uploadedWorksCount++;
            updateWorksCounter();
            updateAddWorkButton();
        }

        function initializeSocialLinks() {
            const container = document.getElementById('socialLinksContainer');
            container.innerHTML = '';
            socialLinksCount = 0;
            updateSocialLimitWarning();
            updateAddSocialButton();
        }

        function initializeWorks() {
            const container = document.getElementById('worksContainer');
            container.innerHTML = '';
            uploadedWorksCount = 0;
        }

        function setupEventListeners() {
            // Обработчик для специальности
            document.getElementById('profileStyle').addEventListener('change', function () {
                const customStyleInput = document.getElementById('profileCustomStyle');
                if (this.value === 'Другое') {
                    customStyleInput.disabled = false;
                    customStyleInput.required = true;
                } else {
                    customStyleInput.disabled = true;
                    customStyleInput.required = false;
                    customStyleInput.value = '';
                }
            });

            // Обработчик для формы
            document.getElementById('profileSetupForm').addEventListener('submit', saveProfile);

            // Обработчик для Enter в поле ссылки на работу
            document.getElementById('workLinkInput').addEventListener('keypress', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    addWorkFromLink();
                }
            });

            // Обработчик для Enter в поле ссылки на аватар
            document.getElementById('avatarLinkInput').addEventListener('keypress', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    loadAvatarFromLink();
                }
            });
        }

        function addSocialLink() {
            if (socialLinksCount >= MAX_SOCIAL_LINKS) {
                showSocialLimitWarning();
                return;
            }

            const container = document.getElementById('socialLinksContainer');
            const socialId = 'social_' + Date.now();

            const socialHtml = `
        <div class="social-link-input" id="${socialId}">
            <select class="social-platform-select" onchange="updateSocialLinkPrefix(this)">
                <option value="telegram">Telegram</option>
                <option value="instagram">Instagram</option>
                <option value="pinterest">Pinterest</option>
                <option value="youtube">YouTube</option>
                <option value="artstation">ArtStation</option>
                <option value="behance">Behance</option>
            </select>
            <div class="social-link-input-group">
                <span class="social-link-prefix" id="${socialId}_prefix">https://t.me/</span>
                <input type="text" class="form-input social-link-input-field" 
                       placeholder="username" 
                       oninput="validateSocialLink(this); validateSocialLinks(); updateOverallValidation();">
            </div>
            <button type="button" class="remove-btn" onclick="removeSocialLink('${socialId}')">Удалить</button>
        </div>
    `;

            container.insertAdjacentHTML('beforeend', socialHtml);
            socialLinksCount++;
            updateSocialLimitWarning();
            updateAddSocialButton();

            // Запускаем валидацию после добавления
            setTimeout(() => {
                validateSocialLinks();
                updateOverallValidation();
            }, 100);
        }


        function updateSocialLinkPrefix(selectElement) {
            const platform = selectElement.value;
            const socialInput = selectElement.closest('.social-link-input');
            const prefixElement = socialInput.querySelector('.social-link-prefix');

            const prefixes = {
                'telegram': 'https://t.me/',
                'instagram': 'https://instagram.com/',
                'pinterest': 'https://pinterest.com/',
                'youtube': 'https://youtube.com/',
                'artstation': 'https://artstation.com/',
                'behance': 'https://behance.net/'
            };

            prefixElement.textContent = prefixes[platform] || 'https://';
        }

        function validateSocialLink(inputElement) {
            const socialInput = inputElement.closest('.social-link-input');
            const platformSelect = socialInput.querySelector('.social-platform-select');
            const platform = platformSelect.value;
            const value = inputElement.value.trim();

            if (!value) {
                inputElement.style.borderColor = '#444';
                return;
            }

            const patterns = {
                'telegram': /^[a-zA-Z0-9_]{5,32}$/,
                'instagram': /^[a-zA-Z0-9._]{1,30}$/,
                'pinterest': /^[a-zA-Z0-9._-]{3,30}$/,
                'youtube': /^@[a-zA-Z0-9._-]{3,30}$/,
                'artstation': /^[a-zA-Z0-9_-]{3,30}$/,
                'behance': /^[a-zA-Z0-9_-]{3,30}$/
            };

            const pattern = patterns[platform];
            if (pattern && pattern.test(value)) {
                inputElement.style.borderColor = '#4CAF50';
            } else {
                inputElement.style.borderColor = '#f44336';
            }
        }

        function removeSocialLink(socialId) {
            const element = document.getElementById(socialId);
            if (element) {
                element.remove();
                socialLinksCount--;
                updateSocialLimitWarning();
                updateAddSocialButton();

                // Запускаем валидацию после удаления
                setTimeout(() => {
                    validateSocialLinks();
                    updateOverallValidation();
                }, 100);
            }
        }

        function updateSocialLimitWarning() {
            const warning = document.getElementById('socialLimitWarning');
            const socialCounter = document.getElementById('socialCounter');

            if (socialLinksCount === 0) {
                warning.classList.add('show');
                warning.innerHTML = '❌ <strong>Обязательно:</strong> Добавьте хотя бы одну социальную сеть';
                warning.style.color = '#ff6b6b';
            } else if (socialLinksCount >= MAX_SOCIAL_LINKS) {
                warning.classList.add('show');
                warning.innerHTML = `Максимум ${MAX_SOCIAL_LINKS} социальных сетей в бесплатном профиле`;
                warning.style.color = '#ffcc00';
            } else {
                warning.classList.remove('show');
            }

            // Обновляем счетчик
            if (socialCounter) {
                socialCounter.innerHTML = socialLinksCount === 0
                    ? `<span style="color: #ff6b6b;">Обязательно: минимум 1 соцсеть | Добавлено: 0/${MAX_SOCIAL_LINKS}</span>`
                    : `Добавлено: ${socialLinksCount}/${MAX_SOCIAL_LINKS} соцсетей`;
            }
        }

        function updateAddSocialButton() {
            const button = document.getElementById('addSocialBtn');
            if (socialLinksCount >= MAX_SOCIAL_LINKS) {
                button.classList.add('disabled');
                button.disabled = true;
            } else {
                button.classList.remove('disabled');
                button.disabled = false;
            }
        }

        function showSocialLimitWarning() {
            const warning = document.getElementById('socialLimitWarning');
            warning.classList.add('show');

            // Анимация предупреждения
            warning.style.animation = 'none';
            setTimeout(() => {
                warning.style.animation = 'shake 0.5s ease-in-out';
            }, 10);

            setTimeout(() => {
                warning.classList.remove('show');
            }, 3000);
        }

        function loadAvatarFromLink() {
            const linkInput = document.getElementById('avatarLinkInput');
            const link = linkInput.value.trim();

            if (!link) {
                alert('Пожалуйста, введите ссылку на изображение');
                return;
            }

            if (!isValidImageUrl(link)) {
                alert('Пожалуйста, введите корректную ссылку на изображение');
                return;
            }

            const preview = document.getElementById('avatarPreview');
            preview.innerHTML = `<img src="${link}" alt="Аватар" onerror="handleImageError(this, 'avatar')">`;

            // Очищаем поле ввода
            linkInput.value = '';

            // Показываем сообщение об успехе
            showAvatarSuccess();

            // Запускаем валидацию
            setTimeout(() => {
                validateAvatar();
                updateOverallValidation();
            }, 100);
        }

        function addWorkFromLink() {
            if (uploadedWorksCount >= MAX_WORKS) {
                showWorksLimitWarning();
                return;
            }

            const linkInput = document.getElementById('workLinkInput');
            const link = linkInput.value.trim();

            if (!link) {
                alert('Пожалуйста, введите ссылку на изображение');
                return;
            }

            if (!isValidImageUrl(link)) {
                alert('Пожалуйста, введите корректную ссылку на изображение');
                return;
            }

            const container = document.getElementById('worksContainer');
            const workId = 'work_' + Date.now();

            const workHtml = `
        <div class="work-link-preview" id="${workId}">
            <img src="${link}" alt="Работа" onerror="handleImageError(this, 'work')" onclick="openProfileWorksModal('${workId}')">
            <button type="button" class="remove-btn" onclick="removeWork('${workId}')" style="position: absolute; top: 5px; right: 5px; padding: 2px 6px;">×</button>
        </div>
    `;

            container.insertAdjacentHTML('beforeend', workHtml);
            uploadedWorksCount++;
            updateWorksCounter();

            // Очищаем поле ввода
            linkInput.value = '';

            // Обновляем состояние кнопки
            updateAddWorkButton();

            // Запускаем валидацию
            setTimeout(() => {
                validateWorks();
                updateOverallValidation();
            }, 100);
        }

        function isValidImageUrl(url) {
            // Простая проверка на корректность URL изображения
            const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp'];
            const urlLower = url.toLowerCase();

            // Проверяем, содержит ли URL расширение изображения
            const hasImageExtension = imageExtensions.some(ext => urlLower.includes(ext));

            // Проверяем, является ли URL валидным
            try {
                new URL(url);
                return hasImageExtension;
            } catch {
                return false;
            }
        }

        function handleImageError(imgElement, type) {
            if (type === 'work') {
                // Удаляем работу при ошибке загрузки
                const workId = imgElement.closest('.work-link-preview').id;
                removeWork(workId);
                alert('Не удалось загрузить изображение. Проверьте ссылку и попробуйте снова.');
            } else if (type === 'avatar') {
                // Сбрасываем аватар при ошибке загрузки
                const preview = document.getElementById('avatarPreview');
                preview.innerHTML = '<div class="avatar-placeholder">Аватар не выбран</div>';
                alert('Не удалось загрузить аватар. Проверьте ссылку и попробуйте снова.');
            }
        }

        function removeWork(workId) {
            const preview = document.getElementById(workId);
            if (preview) {
                preview.remove();
                uploadedWorksCount--;
                updateWorksCounter();
                updateAddWorkButton();

                // Запускаем валидацию после удаления
                setTimeout(() => {
                    validateWorks();
                    updateOverallValidation();
                }, 100);
            }
        }

        function updateWorksCounter() {
            const counter = document.getElementById('worksCounter');
            counter.textContent = `Добавлено: ${uploadedWorksCount}/${MAX_WORKS} работ`;

            if (uploadedWorksCount >= MAX_WORKS) {
                counter.classList.add('error');
            } else if (uploadedWorksCount >= MAX_WORKS - 5) {
                counter.classList.add('warning');
                counter.classList.remove('error');
            } else {
                counter.classList.remove('warning', 'error');
            }
        }

        function updateAddWorkButton() {
            const button = document.getElementById('addWorkLinkBtn');
            if (uploadedWorksCount >= MAX_WORKS) {
                button.classList.add('disabled');
                button.disabled = true;
            } else {
                button.classList.remove('disabled');
                button.disabled = false;
            }
        }

        function showWorksLimitWarning() {
            alert(`Максимальное количество работ в бесплатном профиле: ${MAX_WORKS}`);
        }

        function showAvatarSuccess() {
            // Показываем временное сообщение об успехе
            const preview = document.getElementById('avatarPreview');
            const originalBorder = preview.style.border;

            preview.style.border = '3px solid #4CAF50';
            setTimeout(() => {
                preview.style.border = originalBorder || '3px solid #ffcc00';
            }, 2000);
        }

        // НОВАЯ ФУНКЦИЯ ДЛЯ ПРОВЕРКИ ПАРОЛЯ
        function validatePassword(password) {
            const lengthReq = document.getElementById('reqLength');
            const charsReq = document.getElementById('reqChars');

            // Проверка длины
            const isValidLength = password.length >= 6 && password.length <= 12;
            if (isValidLength) {
                lengthReq.classList.add('valid');
                lengthReq.classList.remove('invalid');
            } else {
                lengthReq.classList.remove('valid');
                lengthReq.classList.add('invalid');
            }

            // Проверка символов (только английские буквы и цифры)
            const isValidChars = /^[a-zA-Z0-9]+$/.test(password);
            if (isValidChars) {
                charsReq.classList.add('valid');
                charsReq.classList.remove('invalid');
            } else {
                charsReq.classList.remove('valid');
                charsReq.classList.add('invalid');
            }

            return isValidLength && isValidChars;
        }

        // Функция для копирования ID профиля при клике
        function setupIdCopyFunctionality() {
            const cabinetUserId = document.getElementById('cabinetUserId');
            if (cabinetUserId) {
                cabinetUserId.style.cursor = 'pointer';
                cabinetUserId.title = 'Кликните чтобы скопировать ID';
                cabinetUserId.addEventListener('click', copyUserId);
            }
        }

        // Функция копирования ID
        function copyUserId(event) {
            event.preventDefault();
            event.stopPropagation();

            const userIdText = this.textContent.replace('ID: ', '');

            // Создаем временный textarea для копирования
            const textArea = document.createElement('textarea');
            textArea.value = userIdText;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.select();
            textArea.setSelectionRange(0, 99999); // Для мобильных устройств

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    // Временно меняем текст для подтверждения
                    const originalText = this.textContent;
                    this.textContent = '✔ ID скопирован!';
                    this.style.color = '#4CAF50';

                    // Возвращаем исходный текст через 2 секунды
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.style.color = '';
                    }, 2000);

                    console.log('✅ ID профиля скопирован в буфер обмена:', userIdText);
                }
            } catch (err) {
                console.error('❌ Ошибка при копировании ID:', err);

                // Альтернативный метод
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(userIdText).then(() => {
                        const originalText = this.textContent;
                        this.textContent = '✔ ID скопирован!';
                        this.style.color = '#4CAF50';

                        setTimeout(() => {
                            this.textContent = originalText;
                            this.style.color = '';
                        }, 2000);
                    });
                }
            }

            document.body.removeChild(textArea);
        }

        // НОВАЯ ФУНКЦИЯ ДЛЯ ПЕРЕКЛЮЧЕНИЯ ВИДИМОСТИ ПАРОЛЯ
        // Функция для переключения видимости пароля в форме настройки профиля
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('profilePassword');
            const toggleButton = document.querySelector('#passwordSection .password-toggle');

            if (passwordInput.type === 'password') {
                // Показываем пароль
                passwordInput.type = 'text';
                toggleButton.classList.remove('hide');
                toggleButton.classList.add('show');
                toggleButton.setAttribute('title', 'Скрыть пароль');
            } else {
                // Скрываем пароль
                passwordInput.type = 'password';
                toggleButton.classList.remove('show');
                toggleButton.classList.add('hide');
                toggleButton.setAttribute('title', 'Показать пароль');
            }

            // Фокусируемся обратно на поле ввода для удобства пользователя
            passwordInput.focus();
        }

        // ФУНКЦИЯ ДЛЯ СОХРАНЕНИЯ ПРОФИЛЯ
        function saveProfile(event) {
            event.preventDefault();

            // Проверяем лимиты перед сохранением
            if (socialLinksCount > MAX_SOCIAL_LINKS) {
                alert(`Максимум ${MAX_SOCIAL_LINKS} социальных сетей в бесплатном профиле`);
                return;
            }

            if (uploadedWorksCount > MAX_WORKS) {
                alert(`Максимум ${MAX_WORKS} работ в бесплатном профиле`);
                return;
            }

            const saveBtn = document.getElementById('saveProfileBtn');
            saveBtn.disabled = true;
            saveBtn.textContent = 'Сохранение...';

            // Проверяем пароль
            const password = document.getElementById('profilePassword').value;
            if (!validatePassword(password)) {
                alert('Пожалуйста, проверьте требования к паролю:\n- От 6 до 12 символов\n- Только английские буквы и цифры');
                saveBtn.disabled = false;
                saveBtn.textContent = 'Сохранить профиль';
                return;
            }

            // Собираем данные профиля
            const profileData = {
                profileName: document.getElementById('profileName').value,
                profileNickname: document.getElementById('profileNickname').value,
                profileStyle: document.getElementById('profileStyle').value === 'Другое'
                    ? document.getElementById('profileCustomStyle').value
                    : document.getElementById('profileStyle').value,
                profileCustomStyle: document.getElementById('profileStyle').value === 'Другое'
                    ? document.getElementById('profileCustomStyle').value
                    : '',
                profileDescription: document.getElementById('profileDescription').value,
                profilePassword: password,
                avatar: getAvatarSrc(),
                socialLinks: collectSocialLinks(),
                works: collectWorks(),
                lastUpdated: new Date().toISOString()
            };

            // Генерируем случайный никнейм для пользователя
            const username = 'user_' + Math.random().toString(36).substring(2, 8);

            // Сохраняем профиль в localStorage
            localStorage.setItem('userProfile_' + username, JSON.stringify(profileData));

            // Создаем пользователя
            const userData = {
                username: username,
                password: profileData.profilePassword,
                registrationDate: new Date().toISOString(),
                profileComplete: true,
                profileName: profileData.profileName
            };

            localStorage.setItem('currentUser', JSON.stringify(userData));
            localStorage.setItem('user_' + username, JSON.stringify(userData));

            // Обновляем текущего пользователя
            currentUser = userData;

            // Обновляем UI
            updateAuthUI();

            // Генерируем HTML-код профиля
            const profileCode = generateProfileCode(profileData);

            // Показываем сообщение об успехе
            setTimeout(() => {
                showProfileSuccess('Профиль успешно сохранен!');
                saveBtn.disabled = false;
                saveBtn.textContent = 'Сохранить профиль';

                // Закрываем модальное окно и открываем окно с кодом
                setTimeout(() => {
                    closeProfileSetupModal();
                    openCodeModal(profileCode);
                }, 1500);
            }, 1500);
        }

        // ФУНКЦИЯ ДЛЯ ГЕНЕРАЦИИ HTML-КОДА ПРОФИЛЯ
        function generateProfileCodeWithEncryption(profileData, username, encryptedPassword) {
            const profileId = profileData.profileName.toLowerCase().replace(/\s+/g, '');

            // Генерируем HTML для социальных сетей
            let socialLinksHtml = '';
            if (profileData.socialLinks && profileData.socialLinks.length > 0) {
                profileData.socialLinks.forEach(link => {
                    const socialIcon = getSocialIcon(link.platform);
                    socialLinksHtml += `
                <a href="${getSocialPrefix(link.platform)}${link.username}" class="social-link" target="_blank" title="${link.platform}">
                    ${socialIcon}
                </a>\n            `;
                });
            }

            // Генерируем HTML для работ
            let worksHtml = '';
            if (profileData.works && profileData.works.length > 0) {
                profileData.works.forEach((work, index) => {
                    let workClass = 'work-thumb-3';
                    if (index % 3 === 0) workClass = 'work-thumb-1';
                    else if (index % 3 === 1) workClass = 'work-thumb-2';

                    worksHtml += `            <img src="${work}" class="${workClass}" alt="">\n`;
                });
            }

            // Определяем страницу публикации
            let publicationPage = 'artist';
            if (profileData.profileStyle && profileData.profileStyle.toLowerCase().includes('дизайн')) {
                publicationPage = 'design';
            }
            if (profileData.isPrem) {
                publicationPage = 'prem_artist';
            }

            // Генерируем код с ЗАШИФРОВАННЫМ паролем
            const profileCode = `<!-- 
╔═══════════════════════════════════════════════╗
║             ИНФОРМАЦИЯ ДЛЯ МОДЕРАТОРА  888666       
╠═══════════════════════════════════════════════╣
║ User ID: ${username}
║ **ПАРОЛЬ ДЛЯ ВХОДА: ${profileData.userPassword}** <-- ДОБАВЬ ЭТУ СТРОКУ
║ Зашифрованный пароль: ${encryptedPassword}
║ Имя: ${profileData.profileName}
║ Telegram: @${profileData.profileNickname}
║ Специальность: ${profileData.profileStyle}
║ Рекомендуемая страница: ${getPageDisplayName(publicationPage)}
║ Дата создания: ${new Date().toLocaleDateString()}
║ Кол-во работ: ${profileData.works ? profileData.works.length : 0}
║ Кол-во соц. сетей: ${profileData.socialLinks ? profileData.socialLinks.length : 0}
║ Постоянный ID: ДА (на основе никнейма)
╚═══════════════════════════════════════════════╝

ДЛЯ АКТИВАЦИИ ВХОДА И ПУБЛИКАЦИИ:

// Добавление зашифрованного пароля в систему (КОМАНДА ДЛЯ КОНСОЛИ)
addEncryptedUserPassword("${username}", "${encryptedPassword}");

// Публикация профиля
publishUserProfile("${username}");

После этого пользователь сможет войти с логином: ${username}
-->

<!-- ${profileData.profileName} -->
<section id="${profileId}">
    <section class="profile-section" data-style="${profileData.profileStyle}">
        <img src="${profileData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg'}" alt="Аватар" class="avatar">
        <div class="profile-info">
            <h1>${profileData.profileName}</h1>
            <a href="https://t.me/${profileData.profileNickname.replace('@', '')}" class="profile-link">
                <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="profile-link-icon"> 
                @${profileData.profileNickname}
            </a>
            <p>Специальность: ${profileData.profileStyle}</p>
            <div class="social-links">
${socialLinksHtml}            </div>
        </div>
    </section>

    <h2 class="favorite-works">Публикации автора</h2>
    <div class="works-carousel" id="artist${profileId}Carousel">
        <div class="works-inner" id="artist${profileId}Works">
${worksHtml}        </div>
        <button class="works-control prev" onclick="prevWork('artist${profileId}Works')">&#10094;</button>
        <button class="works-control next" onclick="nextWork('artist${profileId}Works')">&#10095;</button>
    </div>
    <button class="show-works-btn" onclick="openModal('modal${profileId}')">Ознакомиться со всеми работами</button>

    <!-- Modal -->
    <div id="modal${profileId}" class="modal">
        <span class="close-btn" onclick="closeModal('modal${profileId}')">&times;</span>
        <div class="modal-header">
            <h2>Галерея работ</h2>
        </div>
        <div class="modal-content">
${profileData.works ? profileData.works.map(work => `            <img src="${work}" class="modal-img" alt="">`).join('\n') : ''}
        </div>
    </div>
</section>     

// JSON ДЛЯ БАЗЫ ДАННЫХ //
{
    "${username}": {
        username: "${username}",
        profileName: "${profileData.profileName}",
        profileNickname: "${profileData.profileNickname.replace('@', '')}",
        profileStyle: "${profileData.profileStyle}",
        avatar: "${profileData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg'}",
        socialLinks: [
            ${profileData.socialLinks ? profileData.socialLinks.map(link =>
                `{ platform: "${link.platform}", username: "${link.username}" }`
            ).join(',\n        ') : '{ platform: "telegram", username: "' + profileData.profileNickname.replace('@', '') + '" }'}
        ],
        works: [
            ${profileData.works ? profileData.works.map(work =>
                `"${work}"`
            ).join(',\n        ') : '""'}
        ],
        publishedOn: "${publicationPage}",
        encryptedPassword: "${encryptedPassword}",
        profileDescription: "${profileData.profileDescription || ''}",
        registrationDate: "${new Date().toISOString()}"
    }
}
`;

            return profileCode;
        }

        // Вспомогательная функция для получения иконки социальной сети
        function getSocialIcon(platform) {
            const icons = {
                'telegram': '<img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="social-icon">',
                'instagram': '<img src="https://i.postimg.cc/8zq7J7J7/icons8-instagram-48.png" alt="Instagram" class="social-icon">',
                'pinterest': '<img src="https://i.postimg.cc/T3B57t75/icons8-pinterest-48.png" alt="Pinterest" class="social-icon">',
                'youtube': '<img src="https://i.postimg.cc/7Yr7y0J0/icons8-youtube-48.png" alt="YouTube" class="social-icon">',
                'artstation': '<img src="https://i.postimg.cc/8C3Q3Q3Q/icons8-artstation-48.png" alt="ArtStation" class="social-icon">',
                'behance': '<img src="https://i.postimg.cc/8C3Q3Q3Q/icons8-behance-48.png" alt="Behance" class="social-icon">'
            };

            return icons[platform] || '<img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Social" class="social-icon">';
        }

        // ФУНКЦИИ ДЛЯ МОДАЛЬНОГО ОКНА С КОДОМ
        function openCodeModal(profileCode, username, userPassword, isExistingUser = false) {
            const modal = document.getElementById('codeModal');
            const codeText = document.getElementById('profileCodeText');

            codeText.textContent = profileCode;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Обновляем инструкции в зависимости от того, новый это пользователь или существующий
            const instructionsBox = modal.querySelector('.instructions-box');
            if (instructionsBox) {
                if (isExistingUser) {
                    instructionsBox.innerHTML = `
                <h4 class="instructions-title">Обновление профиля</h4>
                <div style="background: rgba(33, 150, 243, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #2196F3;">
                    <div style="text-align: center; color: #2196F3; font-weight: bold; margin-bottom: 10px;">
                        ✅ Профиль успешно обновлен!
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div><strong>User ID:</strong> ${username}</div>
                        <div><strong>Пароль:</strong> ${userPassword}</div>
                        <div><strong>Статус:</strong> Постоянный ID</div>
                        <div><strong>Никнейм:</strong> ${username.split('_')[1]}</div>
                    </div>
                </div>
                
                <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #4CAF50;">
                    <p style="color: #e0e0e0; font-size: 0.9em; margin: 0; text-align: center;">
                        Ваш ID остался прежним. Вы можете продолжать использовать те же данные для входа.
                    </p>
                </div>
            `;
                } else {
                    instructionsBox.innerHTML = `
                <h4 class="instructions-title">📋 Информация для модератора</h4>
                <div style="background: rgba(255, 152, 0, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #ff9800;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div><strong>User ID:</strong> ${username}</div>
                        <div><strong>Пароль:</strong> ${userPassword}</div>
                        <div><strong>Логин для входа:</strong> ${username}</div>
                        <div><strong>Постоянный ID:</strong> Да</div>
                    </div>
                </div>
                
                <h4 class="instructions-title">🚀 Что делать дальше:</h4>
                <ol class="instructions-list">
                    <li>Нажмите кнопку "Скопировать код" выше</li>
                    <li>Отправьте код модераторам в Telegram</li>
                    <li>Модератор добавит пароль в систему командой: 
                        <code style="background: #333; padding: 2px 6px; border-radius: 4px; font-family: monospace;">
                            addUserPassword("${username}", "${userPassword}")
                        </code>
                    </li>
                    <li>После добавления пароля профиль будет опубликован</li>
                    <li>Вы сможете войти используя:<br>
                        <strong>Логин:</strong> ${username}<br>
                        <strong>Пароль:</strong> ${userPassword}
                    </li>
                </ol>
                
                <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #4CAF50;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #4CAF50; font-weight: bold; margin-bottom: 5px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        Постоянный ID активирован!
                    </div>
                    <p style="color: #e0e0e0; font-size: 0.9em; margin: 0;">
                        Ваш ID закреплен за никнеймом. При следующих редактированиях ID останется прежним.
                    </p>
                </div>
            `;
                }
            }
        }

        // Функция для публикации на конкретной странице
        function publishUserProfileOnPage(username, page) {
            savePublicationPage(username, page);
            localStorage.setItem('profilePublished_' + username, 'true');

            console.log(`✅ Профиль ${username} опубликован на странице: ${getPageDisplayName(page)}`);
            return page;
        }

        // Функция для получения всех опубликованных профилей на текущей странице
        function getPublishedProfilesOnCurrentPage() {
            const currentPage = getCurrentPage();
            const publishedProfiles = [];

            // Получаем все профили из localStorage
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('profile_page_')) {
                    const username = key.replace('profile_page_', '');
                    const publicationInfo = getPublicationPage(username);

                    if (publicationInfo && publicationInfo.page === currentPage) {
                        const userProfile = localStorage.getItem('userProfile_' + username);
                        if (userProfile) {
                            publishedProfiles.push({
                                username: username,
                                profileData: JSON.parse(userProfile),
                                publicationInfo: publicationInfo
                            });
                        }
                    }
                }
            });

            return publishedProfiles;
        }

        // Функция для отображения информации о публикации в консоли (для модераторов)
        function showPublicationInfo() {
            const currentPage = getCurrentPage();
            const publishedProfiles = getPublishedProfilesOnCurrentPage();

            console.log(`📊 Статистика публикаций на странице: ${getPageDisplayName(currentPage)}`);
            console.log(`📈 Опубликовано профилей: ${publishedProfiles.length}`);

            publishedProfiles.forEach((profile, index) => {
                console.log(`
${index + 1}. ${profile.profileData.profileName}
   ├─ User ID: ${profile.username}
   ├─ Telegram: @${profile.profileData.profileNickname}
   ├─ Специальность: ${profile.profileData.profileStyle}
   ├─ Дата публикации: ${new Date(profile.publicationInfo.timestamp).toLocaleDateString('ru-RU')}
   └─ Статус: ✅ Опубликован
        `);
            });
        }



        // ========== ФУНКЦИЯ ДЛЯ ЗАГРУЗКИ СУЩЕСТВУЮЩЕГО ПРОФИЛЯ ==========
        function loadExistingProfile() {
            if (!currentUser) return;

            // Пытаемся загрузить из базы данных
            const userFromDB = findUserInDatabase(currentUser.username);

            if (userFromDB) {
                // Загружаем данные из базы данных
                loadProfileFromDatabase(userFromDB);
                console.log(`📁 Загружен профиль из базы данных: ${currentUser.username}`);
            } else {
                // Пытаемся загрузить из localStorage
                const userProfile = localStorage.getItem('userProfile_' + currentUser.username);
                if (userProfile) {
                    const profileData = JSON.parse(userProfile);
                    loadProfileForm(profileData);
                    console.log(`📁 Загружен профиль из localStorage: ${currentUser.username}`);
                }
            }
        }

        // Функция для загрузки профиля из базы данных в форму
        function loadProfileFromDatabase(userData) {
            // Заполняем форму данными профиля
            document.getElementById('profileName').value = userData.profileName || '';
            document.getElementById('profileNickname').value = userData.profileNickname || '';
            document.getElementById('profileStyle').value = userData.profileStyle || '';

            if (userData.profileStyle === 'Другое') {
                document.getElementById('profileCustomStyle').value = userData.profileCustomStyle || '';
                document.getElementById('profileCustomStyle').disabled = false;
            }

            document.getElementById('profileDescription').value = userData.profileDescription || '';
            document.getElementById('profilePassword').value = userData.userPassword || '';

            // ОСНОВНАЯ ИНФОРМАЦИЯ ЗАБЛОКИРОВАНА для опубликованных профилей
            lockBasicInfoFields();

            // Загружаем аватар
            if (userData.avatar) {
                const preview = document.getElementById('avatarPreview');
                preview.innerHTML = `<img src="${userData.avatar}" alt="Аватар">`;
            }

            // Загружаем социальные сети
            if (userData.socialLinks && userData.socialLinks.length > 0) {
                initializeSocialLinksWithData(userData.socialLinks);
            }

            // Загружаем работы
            if (userData.works && userData.works.length > 0) {
                initializeWorksWithData(userData.works);
            }
        }


        function lockBasicInfoFields() {
            // Блокируем основные поля
            const nameInput = document.getElementById('profileName');
            const nicknameInput = document.getElementById('profileNickname');
            const styleSelect = document.getElementById('profileStyle');
            const customStyleInput = document.getElementById('profileCustomStyle');

            // Устанавливаем атрибут readonly для текстовых полей
            nameInput.readOnly = true;
            nicknameInput.readOnly = true;

            // Блокируем выпадающий список
            styleSelect.disabled = true;
            customStyleInput.disabled = true;

            // Добавляем визуальные стили для заблокированных полей
            nameInput.style.backgroundColor = '#2a2a2a';
            nameInput.style.color = '#888';
            nameInput.style.cursor = 'not-allowed';

            nicknameInput.style.backgroundColor = '#2a2a2a';
            nicknameInput.style.color = '#888';
            nicknameInput.style.cursor = 'not-allowed';

            styleSelect.style.backgroundColor = '#2a2a2a';
            styleSelect.style.color = '#888';
            styleSelect.style.cursor = 'not-allowed';

            customStyleInput.style.backgroundColor = '#2a2a2a';
            customStyleInput.style.color = '#888';
            customStyleInput.style.cursor = 'not-allowed';

            // Добавляем подсказки для пользователя
            addLockedFieldHints();
        }

        function addLockedFieldHints() {
            // Добавляем подсказки к полям
            const nameLabel = document.querySelector('label[for="profileName"]');
            const nicknameLabel = document.querySelector('label[for="profileNickname"]');
            const styleLabel = document.querySelector('label[for="profileStyle"]');
            const customStyleLabel = document.querySelector('label[for="profileCustomStyle"]');

            if (nameLabel && !nameLabel.querySelector('.locked-hint')) {
                const nameHint = document.createElement('span');
                nameHint.className = 'locked-hint';
                nameHint.innerHTML = ' 🔒';
                nameHint.style.color = '#ffcc00';
                nameHint.style.fontSize = '0.8em';
                nameHint.style.marginLeft = '5px';
                nameLabel.appendChild(nameHint);
            }

            if (nicknameLabel && !nicknameLabel.querySelector('.locked-hint')) {
                const nicknameHint = document.createElement('span');
                nicknameHint.className = 'locked-hint';
                nicknameHint.innerHTML = ' 🔒';
                nicknameHint.style.color = '#ffcc00';
                nicknameHint.style.fontSize = '0.8em';
                nicknameHint.style.marginLeft = '5px';
                nicknameLabel.appendChild(nicknameHint);
            }

            if (styleLabel && !styleLabel.querySelector('.locked-hint')) {
                const styleHint = document.createElement('span');
                styleHint.className = 'locked-hint';
                styleHint.innerHTML = ' 🔒 ';
                styleHint.style.color = '#ffcc00';
                styleHint.style.fontSize = '0.8em';
                styleHint.style.marginLeft = '5px';
                styleLabel.appendChild(styleHint);
            }

            if (customStyleLabel && !customStyleLabel.querySelector('.locked-hint')) {
                const customStyleHint = document.createElement('span');
                customStyleHint.className = 'locked-hint';
                customStyleHint.innerHTML = ' 🔒';
                customStyleHint.style.color = '#ffcc00';
                customStyleHint.style.fontSize = '0.8em';
                customStyleHint.style.marginLeft = '5px';
                customStyleLabel.appendChild(customStyleHint);
            }

            // Добавляем информационное сообщение
            const mainInfoSection = document.getElementById('mainInfoSection');
            if (mainInfoSection && !mainInfoSection.querySelector('.locked-info-message')) {
                const infoMessage = document.createElement('div');
                infoMessage.className = 'locked-info-message';
                infoMessage.innerHTML = `
            <div style="background: rgba(255, 204, 0, 0.1); padding: 10px; border-radius: 8px; margin: 10px 0; border-left: 3px solid #ffcc00;">
                <div style="display: flex; align-items: center; gap: 8px; color: #ffcc00; font-weight: bold;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#ffcc00">
                        <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                    </svg>
                    Основная информация заблокирована
                </div>
                <p style="color: #e0e0e0; font-size: 0.85em; margin: 5px 0 0 0;">
                    Имя, никнейм и специальность нельзя изменить после сохранения профиля. 
                    Это обеспечивает стабильность вашего профиля на платформе.
                </p>
            </div>
        `;
                mainInfoSection.insertBefore(infoMessage, mainInfoSection.firstChild);
            }
        }



        // ФУНКЦИЯ ДЛЯ ЗАКРЫТИЯ МОДАЛЬНОГО ОКНА
        function closeCodeModal() {
            const modal = document.getElementById('codeModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // Очищаем код при закрытии
            currentProfileCode = '';
        }

        function copyProfileCode() {
            const copyBtn = document.getElementById('copyCodeBtn');
            const successMessage = document.getElementById('successMessage');

            // Создаем временный textarea для копирования
            const textArea = document.createElement('textarea');
            textArea.value = currentProfileCode;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.select();
            textArea.setSelectionRange(0, 99999); // Для мобильных устройств

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    // Успешное копирование
                    copyBtn.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Код скопирован!
                `;
                    copyBtn.classList.add('copied');

                    // Показываем сообщение об успехе
                    successMessage.classList.add('show');

                    // Автоматически скрываем сообщение через 3 секунды
                    setTimeout(() => {
                        successMessage.classList.remove('show');
                    }, 3000);

                    // Возвращаем исходный текст кнопки через 5 секунд
                    setTimeout(() => {
                        copyBtn.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        Скопировать код
                    `;
                        copyBtn.classList.remove('copied');
                    }, 5000);

                    console.log('✅ Код профиля успешно скопирован в буфер обмена');
                }
            } catch (err) {
                console.error('❌ Ошибка при копировании: ', err);

                // Альтернативный метод для мобильных устройств
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(currentProfileCode).then(() => {
                        copyBtn.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        Код скопирован!
                    `;
                        copyBtn.classList.add('copied');
                        successMessage.classList.add('show');

                        setTimeout(() => {
                            successMessage.classList.remove('show');
                        }, 3000);

                        setTimeout(() => {
                            copyBtn.innerHTML = `
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            Скопировать код
                        `;
                            copyBtn.classList.remove('copied');
                        }, 5000);
                    }).catch(err => {
                        console.error('❌ Ошибка clipboard API: ', err);
                        alert('Не удалось скопировать код. Пожалуйста, скопируйте его вручную из консоли разработчика (F12).');
                    });
                } else {
                    alert('Не удалось скопировать код автоматически. Пожалуйста, скопируйте его вручную из консоли разработчика (F12).');
                }
            }

            document.body.removeChild(textArea);
        }

        function getAvatarSrc() {
            const avatarImg = document.querySelector('#avatarPreview img');
            return avatarImg && avatarImg.src && !avatarImg.src.includes('data:image/svg+xml')
                ? avatarImg.src
                : '';
        }

        function collectSocialLinks() {
            const socialLinks = [];
            document.querySelectorAll('.social-link-input').forEach(socialInput => {
                const platform = socialInput.querySelector('.social-platform-select').value;
                const username = socialInput.querySelector('.social-link-input-field').value.trim();

                // Проверяем, что поле username не пустое
                if (username && platform) {
                    socialLinks.push({
                        platform,
                        username,
                        fullUrl: getSocialPrefix(platform) + username
                    });
                }
            });
            return socialLinks;
        }

        function collectWorks() {
            const works = [];
            document.querySelectorAll('.work-link-preview img').forEach(img => {
                if (img.src) {
                    works.push(img.src);
                }
            });
            return works;
        }

        function skipProfileSetup() {
            if (confirm('Вы уверены, что хотите пропустить настройку профиля?')) {
                closeProfileSetupModal();
            }
        }

        // Функция для копирования ссылки на профиль
        function copyProfileLink() {
            if (!currentUser) return;

            // Показываем лоадер/состояние загрузки
            const shareBtn = document.querySelector('.share-link-btn');
            if (shareBtn) {
                const originalHTML = shareBtn.innerHTML;
                shareBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="white"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"/></svg>';
                shareBtn.style.transform = 'scale(0.9)';

                setTimeout(() => {
                    shareBtn.innerHTML = originalHTML;
                    shareBtn.style.transform = '';
                }, 300);
            }

            // Получаем ID профиля художника (формируем из имени)
            const profileName = document.getElementById('cabinetUsername').textContent;
            const profileId = profileName.toLowerCase().replace(/\s+/g, '');

            // Формируем полную ссылку на профиль
            const baseUrl = window.location.origin + window.location.pathname;
            const profileUrl = `${baseUrl}#${profileId}`;

            // Используем modern Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(profileUrl).then(() => {
                    // Показываем уведомление об успехе
                    showLinkCopiedNotification();
                    console.log('✅ Ссылка скопирована:', profileUrl);
                }).catch(err => {
                    console.error('❌ Ошибка при копировании ссылки:', err);
                    showErrorNotification('Не удалось скопировать ссылку');
                });
            } else {
                // Fallback для старых браузеров
                const textArea = document.createElement('textarea');
                textArea.value = profileUrl;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();

                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showLinkCopiedNotification();
                        console.log('✅ Ссылка скопирована (fallback):', profileUrl);
                    } else {
                        showErrorNotification('Не удалось скопировать ссылку');
                    }
                } catch (err) {
                    console.error('❌ Ошибка fallback копирования:', err);
                    showErrorNotification('Ошибка копирования');
                } finally {
                    document.body.removeChild(textArea);
                }
            }
        }

        function showErrorNotification(message) {
            const notification = document.createElement('div');
            notification.id = 'errorNotification';
            notification.className = 'link-copied-notification show';
            notification.style.background = 'linear-gradient(45deg, #f44336, #d32f2f)';
            notification.innerHTML = `
        <svg width="18" height="18" viewBox="0 0 24 24" fill="white">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <span>${message}</span>
    `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.remove('show');
                notification.style.animation = 'slideOutLeft 0.3s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Функция для показа уведомления об успешном копировании
        function showLinkCopiedNotification() {
            // Удаляем старое уведомление если есть
            const oldNotification = document.getElementById('linkCopiedNotification');
            if (oldNotification) {
                oldNotification.remove();
            }

            // Создаем новое уведомление
            const notification = document.createElement('div');
            notification.id = 'linkCopiedNotification';
            notification.className = 'link-copied-notification show';
            notification.innerHTML = `
        <svg width="18" height="18" viewBox="0 0 24 24" fill="white">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        <span>Ссылка скопирована в буфер обмена!</span>
    `;

            document.body.appendChild(notification);

            // Автоматически скрываем через 3 секунды
            setTimeout(() => {
                notification.classList.remove('show');
                notification.style.animation = 'slideOutLeft 0.3s ease-in';

                // Удаляем из DOM после анимации
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function showProfileSuccess(message) {
            // Создаем красивое уведомление
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #4CAF50, #45a049);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                max-width: 300px;
                font-family: "Comfortaa", sans-serif;
                animation: slideInRight 0.5s ease-out;
            `;

            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">✅ Успешно!</div>
                <div style="font-size: 0.9em;">${message}</div>
            `;

            document.body.appendChild(notification);

            // Удаляем уведомление через 5 секунд
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 500);
            }, 5000);
        }

        // ========== ОБНОВЛЕННЫЕ ФУНКЦИИ ДЛЯ МОДАЛЬНОГО ОКНА ИЗОБРАЖЕНИЙ ==========

        function initImageModal() {
            // Добавляем обработчики событий для всех изображений в галереях
            document.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3, .modal-img').forEach(img => {
                img.addEventListener('click', function (e) {
                    e.stopPropagation();

                    // Получаем все изображения из текущей галереи
                    const gallery = this.closest('.works-inner') || this.closest('.modal-content');
                    if (gallery) {
                        currentImages = Array.from(gallery.querySelectorAll('img')).map(img => img.src);
                        currentImageIndex = currentImages.indexOf(this.src);

                        if (currentImageIndex === -1) {
                            currentImageIndex = 0;
                        }

                        openImageModal(currentImages[currentImageIndex]);
                    }
                });
            });
        }

        function openImageModal(imgSrc) {
            const imageModal = document.getElementById('imageModal');
            const expandedImg = document.getElementById('expandedImg');

            // Сбрасываем прозрачность
            expandedImg.style.opacity = '1';
            expandedImg.src = imgSrc;
            imageModal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Обновляем счетчик
            updateImageCounter();

            // Добавляем обработчики событий для навигации
            setupImageModalEvents();
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // Удаляем обработчики событий
            removeImageModalEvents();
        }

        function navigateImage(direction) {
            if (currentImages.length === 0 || currentImages.length === 1) return;

            currentImageIndex += direction;

            // Проверяем границы
            if (currentImageIndex < 0) {
                currentImageIndex = currentImages.length - 1;
            } else if (currentImageIndex >= currentImages.length) {
                currentImageIndex = 0;
            }

            const expandedImg = document.getElementById('expandedImg');

            // Плавная смена изображения
            expandedImg.style.opacity = '0';

            setTimeout(() => {
                expandedImg.src = currentImages[currentImageIndex];
                expandedImg.style.opacity = '1';

                // Обновляем счетчик
                updateImageCounter();
            }, 200);
        }


        function updateImageCounter() {
            const counter = document.getElementById('imageCounter');
            if (currentImages.length > 1) {
                counter.textContent = `${currentImageIndex + 1} / ${currentImages.length}`;
                counter.style.display = 'block';

                // Показываем стрелки навигации только если больше 1 изображения
                document.querySelectorAll('.modal-nav-btn').forEach(btn => {
                    btn.style.display = 'flex';
                });
            } else {
                counter.style.display = 'none';

                // Скрываем стрелки навигации если только 1 изображение
                document.querySelectorAll('.modal-nav-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        function setupImageModalEvents() {
            // Обработчики для клавиатуры (только для десктопов)
            if (window.innerWidth > 768) {
                document.addEventListener('keydown', handleImageKeydown);
            }

            // Обработчики для свайпа (работают на всех устройствах)
            const modalContent = document.querySelector('.image-modal-content');
            modalContent.addEventListener('touchstart', handleImageTouchStart, { passive: false });
            modalContent.addEventListener('touchmove', handleImageTouchMove, { passive: false });
            modalContent.addEventListener('touchend', handleImageTouchEnd);
        }

        function removeImageModalEvents() {
            document.removeEventListener('keydown', handleImageKeydown);

            const modalContent = document.querySelector('.image-modal-content');
            modalContent.removeEventListener('touchstart', handleImageTouchStart);
            modalContent.removeEventListener('touchmove', handleImageTouchMove);
            modalContent.removeEventListener('touchend', handleImageTouchEnd);
        }

        function handleImageKeydown(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            } else if (e.key === 'ArrowLeft') {
                navigateImage(-1);
            } else if (e.key === 'ArrowRight') {
                navigateImage(1);
            }
        }

        let imageTouchStartX = 0;
        let imageTouchEndX = 0;

        function handleImageTouchStart(e) {
            imageTouchStartX = e.touches[0].clientX;
            e.preventDefault();
        }

        function handleImageTouchMove(e) {
            if (!imageTouchStartX) return;
            imageTouchEndX = e.touches[0].clientX;
            const diff = imageTouchStartX - imageTouchEndX;

            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }

        function handleImageTouchEnd() {
            if (!imageTouchStartX || !imageTouchEndX) return;

            const diff = imageTouchStartX - imageTouchEndX;
            const threshold = 50;

            if (diff > threshold) {
                navigateImage(1);
            } else if (diff < -threshold) {
                navigateImage(-1);
            }

            imageTouchStartX = 0;
            imageTouchEndX = 0;
        }

        // ========== ОСТАЛЬНЫЕ ФУНКЦИИ САЙТА ==========

        // Menu Functions
        function toggleMenu() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('overlay');
            const menuIcon = document.getElementById('menuIcon');
            const body = document.body;
            const searchInput = document.getElementById('searchInput');

            // Сохраняем позицию прокрутки перед открытием
            if (!body.classList.contains('menu-open')) {
                body.style.top = `-${window.scrollY}px`;
            }

            drawer.classList.toggle('open');
            overlay.classList.toggle('active');
            menuIcon.classList.toggle('active');
            body.classList.toggle('menu-open');
            searchInput.disabled = body.classList.contains('menu-open');

            // Восстанавливаем позицию прокрутки при закрытии
            if (!body.classList.contains('menu-open')) {
                const scrollY = parseInt(body.style.top || '0');
                body.style.top = '';
                window.scrollTo(0, -scrollY);
            }
        }

        function closeMenu() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('overlay');
            const menuIcon = document.getElementById('menuIcon');
            const body = document.body;

            drawer.classList.remove('open');
            overlay.classList.remove('active');
            menuIcon.classList.remove('active');
            body.classList.remove('menu-open');
        }

        // Toggle submenus
        function toggleSubmenu(event) {
            event.preventDefault();
            const link = event.currentTarget;
            const submenu = link.nextElementSibling;

            // Close all other submenus first
            document.querySelectorAll('.submenu').forEach(menu => {
                if (menu !== submenu) {
                    menu.classList.remove('active');
                    menu.previousElementSibling.classList.remove('active');
                }
            });

            // Toggle current submenu
            link.classList.toggle('active');
            submenu.classList.toggle('active');
        }

        // Close menu when clicking on overlay
        document.getElementById('overlay').addEventListener('click', closeMenu);

        // New Search Functionality
        function toggleSearch() {
            const searchContainer = document.getElementById('searchContainer');
            const searchBackdrop = document.getElementById('searchBackdrop');
            const isActive = searchContainer.classList.contains('active');

            if (isActive) {
                searchContainer.classList.remove('active');
                searchBackdrop.classList.remove('active');
                document.getElementById('searchResults').classList.remove('active');
                document.getElementById('searchInput').value = '';
                document.body.style.overflow = 'auto';
            } else {
                searchContainer.classList.add('active');
                searchBackdrop.classList.add('active');
                document.getElementById('searchInput').focus();
                document.body.style.overflow = 'hidden';
            }

            // Close menu if open
            if (document.getElementById('drawer').classList.contains('open')) {
                toggleMenu();
            }
        }

        function searchArtists() {
            const searchText = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');

            if (!searchText) {
                resultsContainer.innerHTML = '<div class="no-results">Введите запрос для поиска</div>';
                resultsContainer.classList.add('active');
                return;
            }

            const artists = document.querySelectorAll('.profile-section');
            let found = false;
            resultsContainer.innerHTML = '';

            artists.forEach(artist => {
                const artistName = artist.querySelector('h1').textContent.toLowerCase();
                const artistStyle = artist.querySelector('p').textContent.toLowerCase();
                const artistLink = artist.querySelector('.profile-link').textContent.toLowerCase();
                const artistAvatar = artist.querySelector('.avatar').src;

                if (artistName.includes(searchText) || artistStyle.includes(searchText) || artistLink.includes(searchText)) {
                    found = true;
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';

                    resultItem.innerHTML = `
                        <img src="${artistAvatar}" alt="${artistName}">
                        <div class="info">
                            <div class="name">${artist.querySelector('h1').textContent}</div>
                            <div class="style">${artist.querySelector('p').textContent}</div>
                        </div>
                    `;

                    resultItem.onclick = () => {
                        document.getElementById('searchInput').value = '';
                        scrollToArtist(artist);
                        toggleSearch();
                    };
                    resultsContainer.appendChild(resultItem);
                }
            });

            if (!found) {
                resultsContainer.innerHTML = '<div class="no-results">Ничего не найдено</div>';
            }
            resultsContainer.classList.add('active');
        }

        // Highlight text
        function highlightText(element, searchText) {
            const text = element.textContent;
            const regex = new RegExp(`(${searchText})`, 'gi');
            element.innerHTML = text.replace(regex, match =>
                `<span class="highlight">${match}</span>`
            );
        }

        // Обновленная функция прокрутки к художнику
        function scrollToArtist(artist) {
            // Удаляем предыдущие подсветки
            document.querySelectorAll('.artist-highlight').forEach(el => {
                el.classList.remove('artist-highlight');
            });

            // Добавляем подсветку
            artist.classList.add('artist-highlight');

            // Прокручиваем плавно к элементу с учетом хедера
            const yOffset = -80;
            const y = artist.getBoundingClientRect().top + window.pageYOffset + yOffset;

            window.scrollTo({
                top: y,
                behavior: 'smooth'
            });

            // Убираем подсветку через 3 секунды
            setTimeout(() => {
                artist.classList.remove('artist-highlight');
            }, 3000);

            // Упрощенная обработка прерывания прокрутки
            const handleInterrupt = () => {
                artist.classList.remove('artist-highlight');
            };

            // Добавляем однократный обработчик
            window.addEventListener('scroll', handleInterrupt, {
                once: true,
                passive: true // Оптимизация для плавной прокрутки
            });

            // Гарантируем восстановление скролла
            setTimeout(() => {
                document.body.style.overflow = 'auto';
                document.body.style.position = 'static';
            }, 500);
        }

        // Обновленный обработчик клика в результатах поиска
        function setupSearchResults() {
            document.querySelectorAll('.search-result-item').forEach(item => {
                item.onclick = (e) => {
                    e.preventDefault();
                    const artist = document.querySelector(
                        `.profile-section:has([alt="${item.querySelector('img').alt}"])`
                    );

                    document.getElementById('searchInput').value = '';
                    toggleSearch();

                    setTimeout(() => {
                        if (artist) {
                            scrollToArtist(artist);

                            // Обработчик прерывания прокрутки
                            const handleInterrupt = () => {
                                artist.classList.remove('artist-highlight');
                                window.removeEventListener('scroll', handleInterrupt);
                            };
                            window.addEventListener('scroll', handleInterrupt, { once: true });
                        }
                    }, 100);
                };
            });
        }

        // Search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                searchArtists();
            }
        });

        // Real-time search on input
        document.getElementById('searchInput').addEventListener('input', function () {
            if (this.value.length > 0) {
                searchArtists();
            } else {
                document.getElementById('searchResults').classList.remove('active');
            }
        });

        // Close search when clicking outside (desktop)
        document.addEventListener('click', function (e) {
            const searchContainer = document.getElementById('searchContainer');
            const searchResults = document.getElementById('searchResults');
            const searchInput = document.getElementById('searchInput');
            const mobileSearchBtn = document.getElementById('mobileSearchBtn');

            if (!searchContainer.contains(e.target) &&
                e.target !== mobileSearchBtn &&
                !searchResults.contains(e.target)) {
                searchResults.classList.remove('active');
            }
        });

        // Close search when scrolling on mobile
        window.addEventListener('scroll', function () {
            if (window.innerWidth <= 768 &&
                document.getElementById('searchContainer').classList.contains('active')) {
                toggleSearch();
            }
        });

        // Filters Functionality
        function initFilters() {
            const styles = new Set();
            const filterDropdown = document.getElementById('filtersDropdown');

            // Collect all artist styles
            document.querySelectorAll('.profile-section').forEach(section => {
                const style = section.getAttribute('data-style');
                if (style) styles.add(style);
            });

            // Clear existing filters
            filterDropdown.innerHTML = '';

            // Add "All" button
            const allItem = document.createElement('a');
            allItem.href = '#';
            allItem.textContent = 'Все стили';
            allItem.onclick = (e) => {
                applyFilter('all', e);
                updateActiveFilter(e.target);
            };
            filterDropdown.appendChild(allItem);

            // Add "Prem Artist" filter
            const premItem = document.createElement('a');
            premItem.href = '#';
            premItem.textContent = 'Prem Artist';
            premItem.onclick = (e) => {
                applyFilter('prem', e);
                updateActiveFilter(e.target);
            };
            filterDropdown.appendChild(premItem);

            // Add filters for each style
            styles.forEach(style => {
                const item = document.createElement('a');
                item.href = '#';
                item.textContent = style;
                item.onclick = (e) => {
                    applyFilter(style, e);
                    updateActiveFilter(e.target);
                };
                filterDropdown.appendChild(item);
            });
        }

        function updateActiveFilter(clickedElement) {
            document.querySelectorAll('.filters-dropdown a').forEach(a => {
                a.classList.remove('active-filter');
            });
            clickedElement.classList.add('active-filter');
        }

        function getNextElements(element) {
            const elements = [];
            let next = element.nextElementSibling;

            while (next) {
                if (next.classList.contains('favorite-works') ||
                    next.classList.contains('works-carousel') ||
                    next.classList.contains('show-works-btn')) {
                    elements.push(next);
                } else if (next.classList.contains('profile-section')) {
                    break;
                }
                next = next.nextElementSibling;
            }

            return elements;
        }

        function toggleFilters(event) {
            event.stopPropagation();
            const filtersDropdown = document.getElementById('filtersDropdown');
            filtersDropdown.classList.toggle('active');
            document.querySelector('.filters-button').classList.toggle('active');

            if (filtersDropdown.classList.contains('active')) {
                document.addEventListener('click', closeFiltersOnClickOutside);
            } else {
                document.removeEventListener('click', closeFiltersOnClickOutside);
            }
        }

        function closeFiltersOnClickOutside(event) {
            const filtersContainer = document.querySelector('.filters-container');
            if (!filtersContainer.contains(event.target)) {
                document.getElementById('filtersDropdown').classList.remove('active');
                document.querySelector('.filters-button').classList.remove('active');
                document.removeEventListener('click', closeFiltersOnClickOutside);
            }
        }

        // Carousel Functionality
        const carouselStates = {};

        function initCarousel(worksInnerId) {
            if (!carouselStates[worksInnerId]) {
                carouselStates[worksInnerId] = {
                    currentTranslate: 0,
                    prevTranslate: 0,
                    isDragging: false,
                    startPos: 0,
                    animationID: 0
                };
            }

            const worksInner = document.getElementById(worksInnerId);
            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');

            // Add event handlers
            worksInner.addEventListener('mousedown', (e) => {
                const state = carouselStates[worksInnerId];
                state.isDragging = true;
                state.startPos = e.clientX;
                state.prevTranslate = state.currentTranslate;
                state.animationID = requestAnimationFrame(() => animation(worksInnerId));
                worksInner.style.cursor = 'grabbing';
                worksInner.style.transition = 'none';
            });

            window.addEventListener('mousemove', (e) => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;
                const currentPosition = e.clientX;
                state.currentTranslate = state.prevTranslate + currentPosition - state.startPos;
            });

            window.addEventListener('mouseup', () => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;
                state.isDragging = false;
                cancelAnimationFrame(state.animationID);
                worksInner.style.cursor = 'grab';

                const movedBy = state.currentTranslate - state.prevTranslate;
                const visibleWorks = getVisibleWorksCount(worksInnerId);

                if (movedBy < -100) nextWork(worksInnerId, visibleWorks);
                else if (movedBy > 100) prevWork(worksInnerId, visibleWorks);
                else setPosition(worksInnerId);

                worksInner.style.transition = 'transform 0.5s ease';
            });

            // Touch events
            worksInner.addEventListener('touchstart', (e) => {
                const state = carouselStates[worksInnerId];
                state.isDragging = true;
                state.startPos = e.touches[0].clientX;
                state.prevTranslate = state.currentTranslate;
                state.animationID = requestAnimationFrame(() => animation(worksInnerId));
                worksInner.style.transition = 'none';
            });

            window.addEventListener('touchmove', (e) => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;

                const currentPosition = e.touches[0].clientX;
                const newTranslate = state.prevTranslate + currentPosition - state.startPos;

                // Для мобильных устройств ограничиваем перетаскивание
                if (window.innerWidth <= 768) {
                    const totalWorksWidth = Array.from(works).reduce((sum, work) => sum + work.offsetWidth + 35, 0);
                    const containerWidth = worksInner.parentElement.offsetWidth;
                    const maxTranslate = -(totalWorksWidth - containerWidth);

                    // Ограничиваем значение newTranslate между 0 и maxTranslate
                    state.currentTranslate = Math.max(Math.min(newTranslate, 0), maxTranslate);
                } else {
                    state.currentTranslate = newTranslate;
                }
            });

            window.addEventListener('touchend', () => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;
                state.isDragging = false;
                cancelAnimationFrame(state.animationID);

                const movedBy = state.currentTranslate - state.prevTranslate;
                const visibleWorks = getVisibleWorksCount(worksInnerId);

                if (movedBy < -100) nextWork(worksInnerId, visibleWorks);
                else if (movedBy > 100) prevWork(worksInnerId, visibleWorks);
                else setPosition(worksInnerId);

                worksInner.style.transition = 'transform 0.5s ease';
            });
        }

        function animation(worksInnerId) {
            setPosition(worksInnerId);
            const state = carouselStates[worksInnerId];
            if (state.isDragging) requestAnimationFrame(() => animation(worksInnerId));
        }

        function setPosition(worksInnerId) {
            const state = carouselStates[worksInnerId];
            const worksInner = document.getElementById(worksInnerId);
            worksInner.style.transform = `translateX(${state.currentTranslate}px)`;
        }

        function getVisibleWorksCount(worksInnerId) {
            const worksInner = document.getElementById(worksInnerId);
            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');
            if (works.length === 0) return 1;

            const containerWidth = worksInner.parentElement.offsetWidth;
            const workWidth = works[0].offsetWidth + 35; // Work width + gap
            return Math.floor(containerWidth / workWidth);
        }

        function nextWork(worksInnerId, step = null) {
            const worksInner = document.getElementById(worksInnerId);
            if (!worksInner) return;

            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');
            const state = carouselStates[worksInnerId];

            if (works.length === 0) return;

            if (step === null) step = getVisibleWorksCount(worksInnerId);

            const containerWidth = worksInner.parentElement.offsetWidth;
            const totalWorksWidth = Array.from(works).reduce((sum, work) => sum + work.offsetWidth + 35, 0);
            const maxPosition = Math.min(0, containerWidth - totalWorksWidth - 35);

            const newPosition = state.currentTranslate - (step * (works[0].offsetWidth + 35));

            // Ограничиваем смещение
            state.currentTranslate = Math.max(newPosition, maxPosition);

            worksInner.style.transition = 'transform 0.5s ease';
            setPosition(worksInnerId);
        }

        function prevWork(worksInnerId, step = null) {
            const worksInner = document.getElementById(worksInnerId);
            if (!worksInner) return;

            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');
            const state = carouselStates[worksInnerId];

            if (works.length === 0) return;

            if (step === null) step = getVisibleWorksCount(worksInnerId);

            const newPosition = state.currentTranslate + (step * (works[0].offsetWidth + 35));

            // Ограничиваем смещение (не больше 0)
            state.currentTranslate = Math.min(newPosition, 0);

            worksInner.style.transition = 'transform 0.5s ease';
            setPosition(worksInnerId);
        }

        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modals when clicking outside
        window.onclick = function (event) {
            document.querySelectorAll('.modal').forEach(modal => {
                if (event.target == modal) {
                    closeModal(modal.id);
                }
            });

            if (event.target === document.getElementById('imageModal')) {
                closeImageModal();
            }
        }

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape' && document.getElementById('codeModal').style.display === 'block') {
                closeCodeModal();
            }
        });


        // Close modals with ESC key
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => {
                    if (modal.style.display === 'block') {
                        closeModal(modal.id);
                    }
                });

                if (document.getElementById('imageModal').style.display === 'block') {
                    closeImageModal();
                }
            }
        });

        // Back to Top Function
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide back to top button on scroll
        window.addEventListener('scroll', function () {
            const backToTopBtn = document.getElementById('backToTopBtn');
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('active');
            } else {
                backToTopBtn.classList.remove('active');
            }
        });

        // Function to open tab by link
        function openTabByLink(tabId) {
            // This function would be implemented in the Services.html page
            console.log('Opening tab:', tabId);
        }

        // Автоматически показываем информацию о публикациях при загрузке страницы
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(showPublicationInfo, 3000);
        });

        // Добавьте в самом начале DOMContentLoaded обработчика
        document.addEventListener('DOMContentLoaded', function () {
            // Проверяем статус авторизации
            checkAuthStatus();

        });

        // Добавим этот код в раздел скриптов
        document.addEventListener('DOMContentLoaded', function () {
            // Настройка Intersection Observer
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');

                        // Для модальных изображений
                        if (entry.target.classList.contains('modal-img')) {
                            setTimeout(() => {
                                entry.target.classList.add('visible');
                            }, 100 * index);
                        }
                    }
                });
            }, observerOptions);

            // Наблюдаем за всеми элементами
            document.querySelectorAll('.profile-section, .favorite-works, .works-carousel, .show-works-btn').forEach(el => {
                observer.observe(el);
            });

            // Для изображений в модалках
            document.querySelectorAll('.modal-img').forEach((img, index) => {
                observer.observe(img);
            });
        });

        // Модифицируем функцию фильтрации
        function applyFilter(selectedStyle, event) {
            event.preventDefault();

            // Закрываем фильтры после выбора
            closeFilters();

            document.querySelectorAll('.profile-section').forEach(profile => {
                const style = profile.getAttribute('data-style');
                const isPrem = profile.getAttribute('data-prem') === 'true';
                const nextElements = getNextElements(profile);

                if (selectedStyle === 'all' ||
                    (selectedStyle === 'prem' && isPrem) ||
                    (selectedStyle !== 'prem' && style === selectedStyle)) {
                    profile.classList.remove('hidden');
                    nextElements.forEach(el => {
                        el.classList.remove('hidden');
                        el.style.transitionDelay = '0.2s';
                    });
                } else {
                    profile.classList.add('hidden');
                    nextElements.forEach(el => el.classList.add('hidden'));
                }
            });

            // Smooth scroll to top after applying filter
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function closeFilters() {
            const filtersDropdown = document.getElementById('filtersDropdown');
            const filtersButton = document.querySelector('.filters-button');

            filtersDropdown.classList.remove('active');
            filtersButton.classList.remove('active');
            document.removeEventListener('click', closeFiltersOnClickOutside);
        }

        // Обновим функцию для модальных окон
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Запуск анимации для изображений
            setTimeout(() => {
                modal.querySelectorAll('.modal-img').forEach((img, index) => {
                    setTimeout(() => img.classList.add('visible'), 50 * index);
                });
            }, 100);
        }

        // Функция для обработки якорных ссылок при загрузке страницы
        function handleAnchorLinks() {
            // Проверяем, есть ли якорь в URL
            if (window.location.hash) {
                const artistId = window.location.hash.substring(1); // Убираем # из начала
                const artistSection = document.getElementById(artistId);

                if (artistSection) {
                    // Прокручиваем к секции художника
                    setTimeout(() => {
                        artistSection.scrollIntoView({ behavior: 'smooth' });

                        // Подсвечиваем профиль художника
                        const profile = artistSection.querySelector('.profile-section');
                        if (profile) {
                            profile.classList.add('artist-highlight');

                            // Убираем подсветку через 3 секунды
                            setTimeout(() => {
                                profile.classList.remove('artist-highlight');
                            }, 3000);
                        }
                    }, 100);
                }
            }
        }

        // Вызываем функцию при загрузке страницы
        window.addEventListener('load', handleAnchorLinks);

        // Также обрабатываем изменения hash (если пользователь кликает на якорные ссылки на той же странице)
        window.addEventListener('hashchange', handleAnchorLinks);

        // ФУНКЦИЯ ДЛЯ АВТОМАТИЧЕСКОГО ИЗМЕНЕНИЯ ВЫСОТЫ ТЕКСТОВОГО ПОЛЯ
        function autoResizeTextarea(textarea) {
            // Сбрасываем высоту до auto для корректного расчета
            textarea.style.height = 'auto';

            // Вычисляем новую высоту на основе scrollHeight
            const newHeight = Math.min(textarea.scrollHeight, 300); // Ограничиваем максимальную высоту 300px

            // Устанавливаем новую высоту
            textarea.style.height = newHeight + 'px';

            // Добавляем плавный переход
            textarea.style.transition = 'height 0.2s ease-out';
        }

        // Инициализация авторасширения для всех текстовых полей при загрузке
        document.addEventListener('DOMContentLoaded', function () {
            const textareas = document.querySelectorAll('.form-textarea');
            textareas.forEach(textarea => {
                // Инициализируем начальную высоту
                autoResizeTextarea(textarea);

                // Добавляем обработчик на ввод текста
                textarea.addEventListener('input', function () {
                    autoResizeTextarea(this);
                });

                // Обработчик для изменения размера окна (на всякий случай)
                textarea.addEventListener('focus', function () {
                    autoResizeTextarea(this);
                });
            });
        });

        // ФУНКЦИИ ДЛЯ ПОЛНОЭКРАННОГО ПРОСМОТРА РАБОТ В ПРОФИЛЕ
        function openProfileWorksModal(workId) {
            // Получаем все работы в контейнере
            const worksContainer = document.getElementById('worksContainer');
            const workPreviews = worksContainer.querySelectorAll('.work-link-preview img');

            // Собираем все URL изображений
            profileWorks = Array.from(workPreviews).map(img => img.src);

            // Находим индекс текущей работы
            currentProfileWorkIndex = Array.from(workPreviews).findIndex(img =>
                img.closest('.work-link-preview').id === workId
            );

            if (currentProfileWorkIndex === -1) {
                currentProfileWorkIndex = 0;
            }

            // Открываем модальное окно
            const modal = document.getElementById('profileWorksModal');
            const modalImg = document.getElementById('profileWorksModalImg');

            modalImg.src = profileWorks[currentProfileWorkIndex];
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Обновляем счетчик
            updateProfileWorksCounter();

            // Добавляем обработчики событий для навигации
            setupProfileWorksModalEvents();
        }

        function closeProfileWorksModal() {
            const modal = document.getElementById('profileWorksModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // Удаляем обработчики событий
            removeProfileWorksModalEvents();
        }

        function navigateProfileWork(direction) {
            if (profileWorks.length === 0 || profileWorks.length === 1) return;

            currentProfileWorkIndex += direction;

            // Проверяем границы
            if (currentProfileWorkIndex < 0) {
                currentProfileWorkIndex = profileWorks.length - 1;
            } else if (currentProfileWorkIndex >= profileWorks.length) {
                currentProfileWorkIndex = 0;
            }

            const modalImg = document.getElementById('profileWorksModalImg');

            // Плавная смена изображения
            modalImg.style.opacity = '0';

            setTimeout(() => {
                modalImg.src = profileWorks[currentProfileWorkIndex];
                modalImg.style.opacity = '1';

                // Обновляем счетчик
                updateProfileWorksCounter();
            }, 200);
        }

        function updateProfileWorksCounter() {
            const counter = document.getElementById('profileWorksModalCounter');
            if (profileWorks.length > 1) {
                counter.textContent = `${currentProfileWorkIndex + 1} / ${profileWorks.length}`;
                counter.style.display = 'block';

                // Показываем стрелки навигации
                document.querySelectorAll('.profile-works-modal-nav').forEach(btn => {
                    btn.style.display = 'flex';
                });
            } else {
                counter.style.display = 'none';

                // Скрываем стрелки навигации
                document.querySelectorAll('.profile-works-modal-nav').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        function setupProfileWorksModalEvents() {
            // Обработчики для клавиатуры (только для десктопов)
            if (window.innerWidth > 768) {
                document.addEventListener('keydown', handleProfileWorksKeydown);
            }

            // Обработчики для свайпа (работают на всех устройствах)
            const modalContent = document.querySelector('.profile-works-modal-content');
            modalContent.addEventListener('touchstart', handleProfileWorksTouchStart, { passive: false });
            modalContent.addEventListener('touchmove', handleProfileWorksTouchMove, { passive: false });
            modalContent.addEventListener('touchend', handleProfileWorksTouchEnd);
        }

        function removeProfileWorksModalEvents() {
            document.removeEventListener('keydown', handleProfileWorksKeydown);

            const modalContent = document.querySelector('.profile-works-modal-content');
            modalContent.removeEventListener('touchstart', handleProfileWorksTouchStart);
            modalContent.removeEventListener('touchmove', handleProfileWorksTouchMove);
            modalContent.removeEventListener('touchend', handleProfileWorksTouchEnd);
        }

        function handleProfileWorksKeydown(e) {
            if (e.key === 'Escape') {
                closeProfileWorksModal();
            } else if (e.key === 'ArrowLeft') {
                navigateProfileWork(-1);
            } else if (e.key === 'ArrowRight') {
                navigateProfileWork(1);
            }
        }

        let profileWorksTouchStartX = 0;
        let profileWorksTouchEndX = 0;

        function handleProfileWorksTouchStart(e) {
            profileWorksTouchStartX = e.touches[0].clientX;
            e.preventDefault();
        }

        function handleProfileWorksTouchMove(e) {
            if (!profileWorksTouchStartX) return;
            profileWorksTouchEndX = e.touches[0].clientX;
            const diff = profileWorksTouchStartX - profileWorksTouchEndX;

            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }

        function handleProfileWorksTouchEnd() {
            if (!profileWorksTouchStartX || !profileWorksTouchEndX) return;

            const diff = profileWorksTouchStartX - profileWorksTouchEndX;
            const threshold = 50;

            if (diff > threshold) {
                navigateProfileWork(1);
            } else if (diff < -threshold) {
                navigateProfileWork(-1);
            }

            profileWorksTouchStartX = 0;
            profileWorksTouchEndX = 0;
        }

        // Обработчики закрытия модальных окон
        document.addEventListener('click', function (event) {
            if (event.target === document.getElementById('profileSetupModal')) {
                closeProfileSetupModal();
            }
            if (event.target === document.getElementById('profileWorksModal')) {
                closeProfileWorksModal();
            }
            if (event.target === document.getElementById('personalCabinetModal')) {
                closePersonalCabinetModal();
            }
            if (event.target === document.getElementById('registrationModal')) {
                closeRegistrationModal();
            }
            if (event.target === document.getElementById('loginModal')) {
                closeLoginModal();
            }
            if (event.target === document.getElementById('codeModal')) {
                closeCodeModal();
            }
            if (event.target === document.getElementById('cabinetWorksModal')) {
                closeCabinetWorksModal();
            }
            if (event.target === document.getElementById('cabinetFullscreenModal')) {
                closeCabinetFullscreenModal();
            }
        });

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                if (document.getElementById('profileSetupModal').style.display === 'block') {
                    closeProfileSetupModal();
                }
                if (document.getElementById('profileWorksModal').style.display === 'block') {
                    closeProfileWorksModal();
                }
                if (document.getElementById('personalCabinetModal').style.display === 'block') {
                    closePersonalCabinetModal();
                }
                if (document.getElementById('registrationModal').style.display === 'block') {
                    closeRegistrationModal();
                }
                if (document.getElementById('loginModal').style.display === 'block') {
                    closeLoginModal();
                }
                if (document.getElementById('codeModal').style.display === 'block') {
                    closeCodeModal();
                }
                if (document.getElementById('cabinetWorksModal').style.display === 'block') {
                    closeCabinetWorksModal();
                }
                if (document.getElementById('cabinetFullscreenModal').style.display === 'block') {
                    closeCabinetFullscreenModal();
                }
            }
        });

        // Предотвращаем закрытие при клике на содержимое
        document.querySelector('.profile-setup-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.profile-works-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.personal-cabinet-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.registration-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('#loginModal .registration-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.code-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });


        document.querySelector('.cabinet-works-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.cabinet-fullscreen-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        // Добавляем CSS анимацию для тряски
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(shakeStyle);

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function () {
            console.log('Страница загружена. Регистрация и вход готовы к работе');
        });

        // Обработчик изменения размера окна
        window.addEventListener('resize', function () {
            updateAuthUI();
        });
    </script>

    <script>
        // ========== ФУНКЦИИ ДЛЯ СТАТУСА ПУБЛИКАЦИИ ПРОФИЛЯ ==========

        // Функция для проверки статуса публикации профиля
        function checkProfilePublicationStatus(username) {
            // Получаем все профили на странице
            const publishedProfiles = document.querySelectorAll('.profile-section');
            let isPublished = false;

            // Проверяем, есть ли профиль пользователя на странице
            publishedProfiles.forEach(profile => {
                const profileName = profile.querySelector('h1')?.textContent?.trim();
                const profileData = localStorage.getItem('userProfile_' + username);

                if (profileData) {
                    const userProfile = JSON.parse(profileData);
                    if (userProfile.profileName === profileName) {
                        isPublished = true;
                    }
                }
            });

            return isPublished;
        }

        // Функция для обновления статуса публикации в личном кабинете
        function updatePublicationStatus(publicationStatus, userData) {
            const statusElement = document.getElementById('publicationStatus');

            if (!statusElement) {
                // Создаем элемент если его нет
                updatePersonalCabinetHTML();
                return;
            }

            if (publicationStatus.isPublished && userData.publishedOn) {
                // Для опубликованного профиля
                statusElement.innerHTML = `
            <div class="status-text">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
                Опубликован на: ${getPageDisplayName(userData.publishedOn)}
            </div>
            <div class="publication-details">
                
            </div>
        `;
                statusElement.classList.add('published');
            } else if (publicationStatus.isPublished) {
                // Для опубликованного профиля без информации о странице
                statusElement.innerHTML = `
            <div class="status-text">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
                Профиль опубликован
            </div>
        `;
                statusElement.classList.add('published');
            } else {
                // Для профиля на проверке
                statusElement.innerHTML = `
            <div class="status-text">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#ff9800">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                Проходит проверку
            </div>
        `;
                statusElement.classList.remove('published');
            }
        }


        // Обновленная функция загрузки данных личного кабинета
        function loadPersonalCabinetData() {
            if (!currentUser) return;

            // Пытаемся загрузить из базы данных
            const userFromDB = findUserInDatabase(currentUser.username);

            if (userFromDB) {
                // Загружаем данные из базы данных
                loadCabinetFromDatabase(userFromDB);
            } else {
                // Загружаем из localStorage
                const userProfile = localStorage.getItem('userProfile_' + currentUser.username);
                if (userProfile) {
                    const profileData = JSON.parse(userProfile);
                    loadCabinetFromProfileData(profileData);
                }
            }

            // Инициализируем функциональность копирования ID после загрузки
            setTimeout(() => {
                setupIdCopyFunctionality();
            }, 100);
        }

        // Функция для загрузки данных в личный кабинет из базы данных
        function loadCabinetFromDatabase(userData) {
            // Заполняем данные в личном кабинете
            document.getElementById('cabinetAvatar').src = userData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg';
            document.getElementById('cabinetUsername').textContent = userData.profileName || currentUser.username;
            document.getElementById('cabinetUserId').textContent = 'ID: ' + currentUser.username;
            document.getElementById('cabinetTelegramText').textContent = userData.profileNickname || '@username';
            document.getElementById('cabinetTelegramLink').href = 'https://t.me/' + (userData.profileNickname || 'username').replace('@', '');

            // Обновляем статус публикации
            const publicationStatus = getProfilePublicationStatus(currentUser.username);
            updatePublicationStatus(publicationStatus, userData);

            // Инициализируем функциональность копирования ID
            setupIdCopyFunctionality();

            // Загружаем социальные сети
            loadCabinetSocialLinks(userData.socialLinks);

            // Загружаем описание
            loadCabinetDescription(userData.profileDescription);

            // Загружаем работы
            loadCabinetWorks(userData.works);

            // Обновляем кнопки действий для мобильных устройств
            updateCabinetActionsForMobile();

            console.log(`✅ Личный кабинет загружен из базы данных для: ${currentUser.username}`);
        }


        // Обновленный HTML для личного кабинета (добавляем элемент для статуса)
        function updatePersonalCabinetHTML() {
            const cabinetContent = document.querySelector('.cabinet-content');
            if (cabinetContent && !document.getElementById('publicationStatus')) {
                const profileSection = cabinetContent.querySelector('.cabinet-profile-section');
                if (profileSection) {
                    const statusHTML = `
                <div class="publication-status" id="publicationStatus" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #ff9800; font-weight: bold;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#ff9800">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        Проходит проверку
                    </div>
                </div>
            `;
                    profileSection.insertAdjacentHTML('beforeend', statusHTML);
                }
            }
        }

        // ========== СИСТЕМА ОТСЛЕЖИВАНИЯ СТРАНИЦ ПУБЛИКАЦИИ ==========

        // Функция для получения текущей страницы
        function getCurrentPage() {
            const path = window.location.pathname;
            if (path.includes('Design.html')) return 'design';
            if (path.includes('Artist.html')) return 'artist';
            if (path.includes('Prem_Artist.html')) return 'prem_artist';
            if (path.includes('proba3.html')) return 'main';
            return 'unknown';
        }

        // Функция для получения читаемого названия страницы
        function getPageDisplayName(page) {
            const pageNames = {
                'design': 'Дизайнеры',
                'artist': 'Художники',
                'prem_artist': 'Prem Artist',
                'main': 'Главная',
                'unknown': 'Неизвестно'
            };
            return pageNames[page] || page;
        }

        // Функция для сохранения информации о странице публикации
        function savePublicationPage(username, page) {
            const publicationInfo = {
                page: page,
                timestamp: new Date().toISOString(),
                pageDisplayName: getPageDisplayName(page)
            };
            localStorage.setItem(`publication_page_${username}`, JSON.stringify(publicationInfo));
        }

        // Функция для получения информации о странице публикации
        function getPublicationPage(username) {
            const publicationInfo = localStorage.getItem(`publication_page_${username}`);
            return publicationInfo ? JSON.parse(publicationInfo) : null;
        }

        // Функция для публикации профиля на текущей странице
        function publishUserProfileOnCurrentPage(username) {
            const currentPage = getCurrentPage();
            savePublicationPage(username, currentPage);

            // Обновляем статус публикации
            localStorage.setItem('profilePublished_' + username, 'true');

            console.log(`✅ Профиль ${username} опубликован на странице: ${getPageDisplayName(currentPage)}`);
            return currentPage;
        }

        // Обновленная функция публикации профиля
        function publishUserProfile(username) {
            const userProfile = localStorage.getItem('userProfile_' + username);
            if (!userProfile) {
                console.error('Профиль пользователя не найден');
                return false;
            }

            const profileData = JSON.parse(userProfile);
            const currentPage = getCurrentPage();

            // Сохраняем информацию о странице публикации
            savePublicationPage(username, currentPage);

            // Сохраняем статус публикации
            localStorage.setItem('profilePublished_' + username, 'true');

            // Обновляем статус в личном кабинете
            updatePublicationStatus();

            console.log(`✅ Профиль ${username} опубликован на странице: ${getPageDisplayName(currentPage)}`);
            return currentPage;
        }

        // Функция для снятия профиля с публикации
        function unpublishUserProfile(username) {
            // Удаляем статус публикации
            localStorage.removeItem('profilePublished_' + username);

            // Здесь должен быть код для удаления профиля со страницы

            // Обновляем статус в личном кабинете
            updatePublicationStatus();

            return true;
        }

        // Функция для проверки статуса публикации (альтернативный метод)
        function getProfilePublicationStatus(username) {
            const isPublished = localStorage.getItem('profilePublished_' + username) === 'true';
            const publicationPage = getPublicationPage(username);

            return {
                isPublished: isPublished,
                page: publicationPage ? publicationPage.page : null,
                pageDisplayName: publicationPage ? publicationPage.pageDisplayName : null,
                timestamp: publicationPage ? publicationPage.timestamp : null
            };
        }

        // Обновляем личный кабинет при открытии
        function openPersonalCabinetModal() {
            if (!currentUser) {
                openLoginModal();
                return;
            }

            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Добавляем элемент статуса публикации если его нет
            updatePersonalCabinetHTML();

            // Загружаем данные профиля
            loadPersonalCabinetData();
        }

        // ========== ОБНОВЛЕННАЯ ФУНКЦИЯ СОХРАНЕНИЯ ПРОФИЛЯ ==========

        // ФУНКЦИЯ ДЛЯ СОХРАНЕНИЯ ПРОФИЛЯ
        function saveProfile(event) {
            event.preventDefault();

            // 1. Проверка аватарки
            const avatarSrc = getAvatarSrc();
            if (!avatarSrc) {
                alert('❌ Пожалуйста, загрузите аватарку профиля');
                document.getElementById('avatarLinkInput').focus();
                return;
            }

            // 2. Проверка имени/псевдонима
            const profileName = document.getElementById('profileName').value.trim();
            if (!profileName) {
                alert('❌ Пожалуйста, введите имя или псевдоним');
                document.getElementById('profileName').focus();
                return;
            }

            if (profileName.length > 20) {
                alert('❌ Имя/псевдоним не может превышать 20 символов');
                document.getElementById('profileName').focus();
                return;
            }

            // 3. Проверка никнейма в Telegram
            const profileNickname = document.getElementById('profileNickname').value.trim();
            if (!profileNickname) {
                alert('❌ Пожалуйста, укажите ваш никнейм в Telegram');
                document.getElementById('profileNickname').focus();
                return;
            }

            // 4. Проверка специальности
            const profileStyle = document.getElementById('profileStyle').value;
            if (!profileStyle) {
                alert('❌ Пожалуйста, выберите специальность');
                document.getElementById('profileStyle').focus();
                return;
            }

            // 5. Проверка конкретной специальности при выборе "Другое"
            if (profileStyle === 'Другое') {
                const customStyle = document.getElementById('profileCustomStyle').value.trim();
                if (!customStyle) {
                    alert('❌ Пожалуйста, укажите вашу специальность в поле "Другая специальность"');
                    document.getElementById('profileCustomStyle').focus();
                    return;
                }
            }

            // 6. Проверка социальных сетей (минимум 1)
            const socialLinks = collectSocialLinks();
            if (socialLinks.length === 0) {
                alert('❌ Пожалуйста, добавьте хотя бы одну социальную сеть');
                return;
            }

            // 7. Проверка количества работ (минимум 5)
            if (uploadedWorksCount < 5) {
                alert(`❌ Пожалуйста, добавьте минимум 5 примеров работ. Сейчас добавлено: ${uploadedWorksCount}/5`);
                return;
            }

            // 8. Проверка пароля
            const userPassword = document.getElementById('profilePassword').value;
            if (!userPassword) {
                alert('❌ Пожалуйста, придумайте пароль для входа на сайт');
                document.getElementById('profilePassword').focus();
                return;
            }

            if (!validatePassword(userPassword)) {
                alert('Пожалуйста, проверьте требования к паролю:\n- От 6 до 12 символов\n- Только английские буквы и цифры');
                document.getElementById('profilePassword').focus();
                return;
            }

            // Проверяем лимиты
            if (socialLinksCount > MAX_SOCIAL_LINKS) {
                alert(`❌ Максимум ${MAX_SOCIAL_LINKS} социальных сетей в бесплатном профиле`);
                return;
            }

            if (uploadedWorksCount > MAX_WORKS) {
                alert(`❌ Максимум ${MAX_WORKS} работ в бесплатном профиле`);
                return;
            }

            // === СОХРАНЕНИЕ ПРОФИЛЯ С ШИФРОВАНИЕМ ===

            const saveBtn = document.getElementById('saveProfileBtn');
            saveBtn.disabled = true;
            saveBtn.textContent = 'Шифрование и сохранение...';

            // Генерируем или находим ID пользователя
            let username;
            let isExistingUser = false;

            // Проверяем, есть ли пользователь в базе данных по никнейму
            const existingUser = findUserByNickname(profileNickname);

            if (existingUser) {
                // Используем существующий ID из базы данных
                username = existingUser.username;
                isExistingUser = true;
                console.log(`🔄 Найден существующий профиль в базе данных: ${username}`);
            } else if (currentUser) {
                // Используем текущий ID пользователя
                username = currentUser.username;
                isExistingUser = true;
                console.log(`🔄 Редактирование текущего профиля: ${username}`);
            } else {
                // Создаем новый ID
                username = generateUserId(profileNickname);
                console.log(`🆕 Создан новый профиль: ${username}`);
            }

            // Собираем данные профиля БЕЗ ПАРОЛЯ
            const profileData = {
                username: username,
                profileName: profileName,
                profileNickname: profileNickname,
                profileStyle: profileStyle === 'Другое'
                    ? document.getElementById('profileCustomStyle').value
                    : profileStyle,
                profileCustomStyle: profileStyle === 'Другое'
                    ? document.getElementById('profileCustomStyle').value
                    : '',
                profileDescription: document.getElementById('profileDescription').value,
                avatar: avatarSrc,
                socialLinks: socialLinks,
                works: collectWorks(),
                lastUpdated: new Date().toISOString(),
                userPassword: userPassword,
                publicationStatus: 'pending',
                basicInfoLocked: true,
                registrationDate: new Date().toISOString()
            };

            // Сохраняем профиль в localStorage БЕЗ ПАРОЛЯ
            localStorage.setItem('userProfile_' + username, JSON.stringify(profileData));

            // Создаем зашифрованный профиль
            const encryptedProfile = createEncryptedProfile(profileData, username, userPassword);

            // Создаем/обновляем запись пользователя в localStorage БЕЗ ПАРОЛЯ
            const userData = {
                username: username,
                registrationDate: profileData.registrationDate,
                profileComplete: true,
                profileName: profileData.profileName,
                profileNickname: profileData.profileNickname,
                hasPassword: false, // Пароль еще не добавлен модератором
                isNewProfile: !isExistingUser,
                // Пароль НЕ сохраняется в localStorage!
            };

            localStorage.setItem('currentUser', JSON.stringify(userData));
            localStorage.setItem('user_' + username, JSON.stringify(userData));

            // Обновляем текущего пользователя
            currentUser = userData;

            // Обновляем UI
            updateAuthUI();

            // Показываем сообщение об успехе
            setTimeout(() => {
                if (isExistingUser) {
                    showProfileSuccess('✅ Профиль успешно обновлен! Пароль зашифрован и готов для отправки модератору.');
                } else {
                    showProfileSuccess('✅ Профиль успешно создан! Пароль зашифрован и готов для отправки модератору.');
                }

                saveBtn.disabled = false;
                saveBtn.textContent = 'Сохранить профиль';

                // Закрываем модальное окно и открываем окно с кодом (с зашифрованным паролем)
                setTimeout(() => {
                    closeProfileSetupModal();
                    openCodeModal(encryptedProfile.profileCode, username, userPassword, isExistingUser, encryptedProfile.encryptedPassword);
                }, 1500);
            }, 1500);
        }

        // Функция для поиска пользователя по никнейму в базе данных
        function findUserByNickname(nickname) {
            for (const username in userDatabase) {
                if (userDatabase[username].profileNickname === nickname) {
                    return userDatabase[username];
                }
            }
            return null;
        }

        // ========== ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ДЛЯ ИНФОРМАЦИОННОГО СООБЩЕНИЯ ==========

        const infoMessageStyles = document.createElement('style');
        infoMessageStyles.textContent = `
.locked-info-message {
    background: rgba(255, 204, 0, 0.1);
    padding: 15px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #ffcc00;
    animation: slideIn 0.5s ease-out;
}

.locked-info-message .info-header {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #ffcc00;
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 1.1em;
}

.locked-info-message .info-text {
    color: #e0e0e0;
    font-size: 0.9em;
    line-height: 1.5;
}

.locked-info-message .info-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Стили для индикаторов блокировки */
.locked-field-hint {
    color: #ffcc00;
    font-size: 0.8em;
    margin-left: 5px;
    font-weight: bold;
}

.locked-indicator {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 204, 0, 0.2);
    color: #ffcc00;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: bold;
}

/* Улучшенные стили для заблокированных полей */
.form-input:read-only,
.form-select:disabled {
    background-color: #2a2a2a !important;
    color: #888 !important;
    cursor: not-allowed !important;
    border-color: #555 !important;
    opacity: 0.8;
}

.form-input:read-only:focus,
.form-select:disabled:focus {
    outline: none !important;
    box-shadow: none !important;
    border-color: #555 !important;
}
`;
        document.head.appendChild(infoMessageStyles);

        // Обновленная функция для добавления подсказок о блокировке
        function addLockedFieldHints() {

            removeLockedFieldHints();



            // Добавляем информационное сообщение (оставляем только это)
            const mainInfoSection = document.getElementById('mainInfoSection');
            if (mainInfoSection && !mainInfoSection.querySelector('.locked-info-message')) {
                const infoMessage = document.createElement('div');
                infoMessage.className = 'locked-info-message';
                infoMessage.innerHTML = `
            <div class="info-header">
                <svg class="info-icon" viewBox="0 0 24 24" fill="#ffcc00">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                Основная информация защищена
            </div>
            <div class="info-text">
                Имя, никнейм и специальность нельзя изменить после сохранения профиля, 
                чтобы ваш профиль оставался узнаваемым на платформе. 
                Вы можете редактировать остальные данные в любое время.
            </div>
        `;
                mainInfoSection.insertBefore(infoMessage, mainInfoSection.firstChild);
            }


        }

        // Добавим кнопку для отображения тестовых аккаунтов
        function addTestAccountsButton() {
            // Создаем скрытую кнопку в header
            const headerRight = document.querySelector('.header-right');
            if (headerRight) {
                const testBtn = document.createElement('button');
                testBtn.style.cssText = `
            position: absolute;
            right: -100px;
            opacity: 0;
            width: 1px;
            height: 1px;
        `;
                testBtn.onclick = function (e) {
                    e.preventDefault();
                    testCrossDeviceLogin();
                    alert('Информация о тестовых аккаунтах выведена в консоль (F12)');
                };
                testBtn.textContent = 'Test Accounts';
                headerRight.appendChild(testBtn);
            }
        }

        // Добавляем кнопку при загрузке
        setTimeout(addTestAccountsButton, 1000);

        // ========== ОБНОВЛЕННОЕ МОДАЛЬНОЕ ОКНО С КОДОМ ==========

        // Переменная для хранения кода профиля
        let currentProfileCode = '';

        // ОБНОВЛЕННАЯ ФУНКЦИЯ ДЛЯ ОТКРЫТИЯ МОДАЛЬНОГО ОКНА С КОДОМ
        // ОБНОВЛЕННАЯ ФУНКЦИЯ ДЛЯ ОТКРЫТИЯ МОДАЛЬНОГО ОКНА С КОДОМ
        function openCodeModal(profileCode, username, originalPassword, isExistingUser = false, encryptedPassword = '') {
            currentProfileCode = profileCode;

            const modal = document.getElementById('codeModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Обновляем инструкции
            const instructionsBox = document.querySelector('.instructions-box');
            if (instructionsBox) {
                instructionsBox.innerHTML = `
            <h4 class="instructions-title">🚀 Что делать дальше:</h4>
            <div style="background: rgba(255, 152, 0, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #ff9800;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                    <div><strong>User ID:</strong> ${username}</div>
                    <div><strong>Статус пароля:</strong> 🔒 Зашифрован</div>
                    <div><strong>Зашифрованная версия:</strong> ${encryptedPassword.substring(0, 20)}...</div>
                </div>
            </div>
            
            <ol class="instructions-list">
                <li>Нажмите кнопку <strong>"Скопировать код"</strong></li>
                <li>Отправьте код модераторам в Telegram</li>
                <li>Модератор добавит зашифрованный пароль в систему командой:</li>
                <div style="background: #333; padding: 10px; border-radius: 6px; margin: 10px 0; font-family: monospace;">
                    addEncryptedUserPassword("${username}", "${encryptedPassword}")
                </div>
                <li>После этого вы сможете войти используя:<br>
                    <strong>Логин:</strong> ${username}<br>
                    <strong>Пароль:</strong> [ваш оригинальный пароль]
                </li>
            </ol>
            
            <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #4CAF50;">
                <div style="display: flex; align-items: center; gap: 8px; color: #4CAF50; font-weight: bold; margin-bottom: 5px;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                        <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                    </svg>
                    Безопасность: Пароль зашифрован
                </div>
                <p style="color: #e0e0e0; font-size: 0.9em; margin: 0;">
                    Ваш пароль зашифрован и будет храниться в безопасном виде. 
                    Только система сможет проверить его правильность.
                </p>
            </div>
        `;
            }
        }

        // ========== СИСТЕМА ПОСТОЯННЫХ ID ==========

        // Функция для генерации постоянного ID на основе никнейма
        function generateUserId(nickname) {
            // Очищаем никнейм от специальных символов
            const cleanNickname = nickname.replace(/[^a-zA-Z0-9_]/g, '').toLowerCase();

            // Добавляем случайные символы для уникальности
            const randomSuffix = Math.random().toString(36).substring(2, 6); // 4 случайных символа

            return `user_${cleanNickname}_${randomSuffix}`;
        }

        // Функция для поиска существующего ID пользователя по никнейму
        function findExistingUserId(nickname) {
            const allUsers = Object.keys(localStorage).filter(key => key.startsWith('userProfile_'));

            for (let userKey of allUsers) {
                const userId = userKey.replace('userProfile_', '');
                const userProfile = JSON.parse(localStorage.getItem(userKey));

                if (userProfile && userProfile.profileNickname === nickname) {
                    return userId;
                }
            }

            return null;
        }

        // Проверка авторизации при загрузке страницы
        document.addEventListener('DOMContentLoaded', function () {
            checkAuthStatus();

            // Показываем информацию о регистрации в консоли для отладки
            const registeredUsers = getRegisteredUsers();
            if (registeredUsers.length > 0) {
                console.log('📋 Зарегистрированные пользователи на этом устройстве:', registeredUsers);
            }



            // Добавляем класс к первому элементу "Все стили"
            const firstFilter = document.querySelector('.filters-dropdown a:first-child');
            if (firstFilter) firstFilter.classList.add('active-filter');

            // Адаптация каруселей при изменении размера окна
            window.addEventListener('resize', () => {
                Object.keys(carouselStates).forEach(worksInnerId => {
                    carouselStates[worksInnerId].currentTranslate = 0;
                    setPosition(worksInnerId);
                });
            });

            // Инициализация модального окна изображений
            initImageModal();
        });

        // Функция для переключения видимости пароля в форме входа
        // Функция для переключения видимости пароля в форме входа
        function toggleLoginPasswordVisibility() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleButton = document.querySelector('#loginModal .password-toggle');

            if (passwordInput.type === 'password') {
                // Показываем пароль
                passwordInput.type = 'text';
                toggleButton.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
            </svg>
        `;
                toggleButton.setAttribute('title', 'Скрыть пароль');
            } else {
                // Скрываем пароль
                passwordInput.type = 'password';
                toggleButton.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
        `;
                toggleButton.setAttribute('title', 'Показать пароль');
            }

            // Фокусируемся обратно на поле ввода
            passwordInput.focus();
        }

        // ========== ДИНАМИЧЕСКАЯ ВАЛИДАЦИЯ ПОЛЕЙ ==========

        function setupDynamicValidation() {
            // Обработчики для основных полей
            document.getElementById('profileName').addEventListener('input', validateName);
            document.getElementById('profileNickname').addEventListener('input', validateNickname);
            document.getElementById('profileStyle').addEventListener('change', validateStyle);
            document.getElementById('profileCustomStyle').addEventListener('input', validateCustomStyle);
            document.getElementById('profilePassword').addEventListener('input', validatePassword);

            // Обработчики для социальных сетей и работ
            document.addEventListener('input', function (e) {
                if (e.target.classList.contains('social-link-input-field')) {
                    validateSocialLinks();
                }
            });

            // Общая проверка при любом изменении
            document.addEventListener('input', updateOverallValidation);
        }

        // Валидация имени
        function validateName() {
            const nameInput = document.getElementById('profileName');
            const nameValue = nameInput.value.trim();
            const counter = document.getElementById('nameCharCounter');

            if (nameValue.length > 0 && nameValue.length <= 20) {
                nameInput.style.borderColor = '#4CAF50';
                nameInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                if (counter) counter.style.color = '#4CAF50';
                return true;
            } else {
                nameInput.style.borderColor = '#f44336';
                nameInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                if (counter) counter.style.color = '#f44336';
                return false;
            }
        }

        // Валидация никнейма
        function validateNickname() {
            const nicknameInput = document.getElementById('profileNickname');
            const nicknameValue = nicknameInput.value.trim();

            if (nicknameValue.length > 0) {
                nicknameInput.style.borderColor = '#4CAF50';
                nicknameInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                return true;
            } else {
                nicknameInput.style.borderColor = '#f44336';
                nicknameInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                return false;
            }
        }

        // Валидация специальности
        function validateStyle() {
            const styleSelect = document.getElementById('profileStyle');
            const customStyleInput = document.getElementById('profileCustomStyle');
            const styleValue = styleSelect.value;

            if (styleValue === 'Другое') {
                customStyleInput.disabled = false;
                customStyleInput.required = true;
                // Валидируем кастомную специальность
                validateCustomStyle();
                return validateCustomStyle();
            } else if (styleValue) {
                styleSelect.style.borderColor = '#4CAF50';
                styleSelect.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                customStyleInput.disabled = true;
                customStyleInput.required = false;
                customStyleInput.style.borderColor = '#444';
                customStyleInput.style.boxShadow = 'none';
                return true;
            } else {
                styleSelect.style.borderColor = '#f44336';
                styleSelect.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                return false;
            }
        }

        // Валидация кастомной специальности
        function validateCustomStyle() {
            const customStyleInput = document.getElementById('profileCustomStyle');
            const customStyleValue = customStyleInput.value.trim();

            if (customStyleInput.disabled) {
                customStyleInput.style.borderColor = '#444';
                customStyleInput.style.boxShadow = 'none';
                return true;
            }

            if (customStyleValue.length > 0) {
                customStyleInput.style.borderColor = '#4CAF50';
                customStyleInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                return true;
            } else {
                customStyleInput.style.borderColor = '#f44336';
                customStyleInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                return false;
            }
        }

        // Валидация пароля
        function validatePassword() {
            const passwordInput = document.getElementById('profilePassword');
            const passwordValue = passwordInput.value;
            const requirements = document.getElementById('passwordRequirements');

            const isValidLength = passwordValue.length >= 6 && passwordValue.length <= 12;
            const isValidChars = /^[a-zA-Z0-9]+$/.test(passwordValue);
            const isValid = isValidLength && isValidChars;

            // Обновляем визуальные индикаторы требований
            const lengthReq = document.getElementById('reqLength');
            const charsReq = document.getElementById('reqChars');

            if (isValidLength) {
                lengthReq.classList.add('valid');
                lengthReq.classList.remove('invalid');
            } else {
                lengthReq.classList.remove('valid');
                lengthReq.classList.add('invalid');
            }

            if (isValidChars) {
                charsReq.classList.add('valid');
                charsReq.classList.remove('invalid');
            } else {
                charsReq.classList.remove('valid');
                charsReq.classList.add('invalid');
            }

            // Обновляем стиль поля ввода
            if (isValid) {
                passwordInput.style.borderColor = '#4CAF50';
                passwordInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
            } else {
                passwordInput.style.borderColor = '#f44336';
                passwordInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
            }

            return isValid;
        }

        // Валидация социальных сетей
        function validateSocialLinks() {
            const socialLinks = collectSocialLinks();
            const socialCounter = document.getElementById('socialCounter');
            const socialSection = document.querySelector('.form-section:nth-child(4)');

            if (socialLinks.length >= 1) {
                socialSection.style.borderLeftColor = '#4CAF50';
                socialCounter.style.color = '#4CAF50';
                socialCounter.innerHTML = `✅ Минимум достигнут | Добавлено: ${socialLinks.length}/${MAX_SOCIAL_LINKS}`;
                return true;
            } else {
                socialSection.style.borderLeftColor = '#f44336';
                socialCounter.style.color = '#f44336';
                socialCounter.innerHTML = `❌ Обязательно: минимум 1 соцсеть | Добавлено: ${socialLinks.length}/${MAX_SOCIAL_LINKS}`;
                return false;
            }
        }

        // Валидация работ
        function validateWorks() {
            const works = collectWorks();
            const worksCounter = document.getElementById('worksCounter');
            const worksSection = document.querySelector('.form-section:nth-child(5)');

            if (works.length >= 5) {
                worksSection.style.borderLeftColor = '#4CAF50';
                worksCounter.style.color = '#4CAF50';
                worksCounter.textContent = `✅ Минимум достигнут | Добавлено: ${works.length}/${MAX_WORKS} работ`;
                return true;
            } else if (works.length > 0) {
                worksSection.style.borderLeftColor = '#ff9800';
                worksCounter.style.color = '#ff9800';
                worksCounter.textContent = `⚠️ Нужно еще ${5 - works.length} работ | Добавлено: ${works.length}/${MAX_WORKS}`;
                return false;
            } else {
                worksSection.style.borderLeftColor = '#f44336';
                worksCounter.style.color = '#f44336';
                worksCounter.textContent = `❌ Минимум: 5 работ | Добавлено: ${works.length}/${MAX_WORKS} работ`;
                return false;
            }
        }

        // Валидация аватарки
        function validateAvatar() {
            const avatarSrc = getAvatarSrc();
            const avatarSection = document.querySelector('.form-section:first-child');

            if (avatarSrc) {
                avatarSection.style.borderLeftColor = '#4CAF50';
                return true;
            } else {
                avatarSection.style.borderLeftColor = '#f44336';
                return false;
            }
        }

        // Общая проверка валидации
        function updateOverallValidation() {
            const isNameValid = validateName();
            const isNicknameValid = validateNickname();
            const isStyleValid = validateStyle();
            const isPasswordValid = validatePassword();
            const isSocialValid = validateSocialLinks();
            const isWorksValid = validateWorks();
            const isAvatarValid = validateAvatar();

            const allValid = isNameValid && isNicknameValid && isStyleValid &&
                isPasswordValid && isSocialValid && isWorksValid && isAvatarValid;

            // Обновляем кнопку сохранения
            const saveBtn = document.getElementById('saveProfileBtn');
            if (allValid) {
                saveBtn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                saveBtn.style.cursor = 'pointer';
            } else {
                saveBtn.style.background = 'linear-gradient(45deg, #ffcc00, #ffdd33)';
                saveBtn.style.cursor = 'not-allowed';
            }

            return allValid;
        }

        // Добавьте эти функции в раздел с другими функциями модератора

        // Функция для получения всех опубликованных профилей
        function getAllPublishedProfiles() {
            const publishedProfiles = [];

            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('profile_page_')) {
                    const username = key.replace('profile_page_', '');
                    const publicationInfo = getPublicationPage(username);
                    const userProfile = localStorage.getItem('userProfile_' + username);

                    if (userProfile) {
                        publishedProfiles.push({
                            username: username,
                            profileData: JSON.parse(userProfile),
                            publicationInfo: publicationInfo
                        });
                    }
                }
            });

            return publishedProfiles;
        }

        // Функция для отображения полной статистики публикаций
        function showFullPublicationStats() {
            const allProfiles = getAllPublishedProfiles();
            const statsByPage = {};

            allProfiles.forEach(profile => {
                const page = profile.publicationInfo.page;
                if (!statsByPage[page]) {
                    statsByPage[page] = [];
                }
                statsByPage[page].push(profile);
            });

            console.log('📊 ПОЛНАЯ СТАТИСТИКА ПУБЛИКАЦИЙ');
            console.log('══════════════════════════════════');

            Object.keys(statsByPage).forEach(page => {
                console.log(`\n📁 ${getPageDisplayName(page)}: ${statsByPage[page].length} профилей`);
                statsByPage[page].forEach((profile, index) => {
                    console.log(`   ${index + 1}. ${profile.profileData.profileName} (@${profile.profileData.profileNickname})`);
                });
            });

            console.log(`\n📈 ВСЕГО: ${allProfiles.length} опубликованных профилей`);
        }

        // Команда для модераторов для просмотра полной статистики
        function showModeratorStats() {
            showFullPublicationStats();
        }


        // ========== ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ДЛЯ СТАТУСОВ ==========

        const enhancedStatusStyles = document.createElement('style');
        enhancedStatusStyles.textContent = `
.publication-status {
    position: absolute;
    top: 0;
    right: 0;
    padding: 10px 15px;
    background: rgba(255, 152, 0, 0.1);
    border-radius: 8px;
    border-left: 3px solid #ff9800;
    max-width: 250px;
    text-align: right;
}

.publication-status.published {
    background: rgba(76, 175, 80, 0.1);
    border-left-color: #4CAF50;
}

.publication-status .status-text {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #ff9800;
    font-weight: bold;
    font-size: 0.9em;
    justify-content: flex-end;
}

.publication-status.published .status-text {
    color: #4CAF50;
}

/* АДАПТАЦИЯ ДЛЯ МОБИЛЬНЫХ УСТРОЙСТВ */
@media (max-width: 768px) {
    .publication-status {
        position: static;
        margin-top: 15px;
        text-align: center;
        max-width: 100%;
    }
    
    .publication-status .status-text {
        justify-content: center;
    }
}

/* Стили для расширенной информации о публикации */
.publication-details {
    font-size: 0.8em;
    color: #aaa;
    margin-top: 5px;
    text-align: center;
}
`;
        document.head.appendChild(enhancedStatusStyles);

        // Обработчик для ограничения длины имени
        document.getElementById('profileName').addEventListener('input', function () {
            const maxLength = 20;
            const currentLength = this.value.length;
            const counter = document.getElementById('nameCharCounter');

            if (counter) {
                counter.textContent = `${currentLength}/${maxLength} символов`;

                // Обновляем классы для стилизации
                counter.classList.remove('warning', 'error');
                if (currentLength >= maxLength - 5 && currentLength < maxLength) {
                    counter.classList.add('warning');
                } else if (currentLength >= maxLength) {
                    counter.classList.add('error');
                }

                // Автоматически обрезаем текст если превышен лимит
                if (currentLength > maxLength) {
                    this.value = this.value.substring(0, maxLength);
                }
            }
        });

        // Проверка авторизации при загрузке страницы
        document.addEventListener('DOMContentLoaded', function () {
            checkAuthStatus();

            // Инициализация каруселей
            initCarousel('artist1Works');
            initCarousel('artistгусь2Works');
            initCarousel('artist3Works');

            // Инициализация фильтров
            initFilters();

            // Добавляем класс к первому элементу "Все стили"
            const firstFilter = document.querySelector('.filters-dropdown a:first-child');
            if (firstFilter) firstFilter.classList.add('active-filter');

            // Адаптация каруселей при изменении размера окна
            window.addEventListener('resize', () => {
                Object.keys(carouselStates).forEach(worksInnerId => {
                    carouselStates[worksInnerId].currentTranslate = 0;
                    setPosition(worksInnerId);
                });
            });

            // Инициализация модального окна изображений
            initImageModal();
        });

        // ========== СИСТЕМА ПАРОЛЕЙ ДЛЯ МОДЕРАТОРОВ ==========
        publishUserProfileOnPage("user_artist123", "artist");     // Художники
        publishUserProfileOnPage("user_5sjr50", "design");   // Дизайнеры  
        publishUserProfileOnPage("user_prem789", "prem_artist");  // Prem Artist
        publishUserProfileOnPage("user__21e3", "design");

        // Функция для добавления пароля модератором
        function addUserPassword(userId, password) {
            if (userId && password) {
                moderatorPasswords[userId] = password;
                console.log(`Пароль для пользователя ${userId} добавлен модератором`);
                return true;
            }
            return false;
        }

        // Функция для поиска пользователя в базе данных
        function findUserInDatabase(username) {
            return userDatabase[username] || null;
        }

        // Функция для проверки пароля пользователя
        function verifyUserPassword(username, password) {
            const user = findUserInDatabase(username);
            if (!user) return false;

            return user.userPassword === password;
        }

        // Функция для синхронизации данных пользователя с локальным хранилищем
        function syncUserDataFromDatabase(username) {
            const user = findUserInDatabase(username);
            if (!user) return false;

            // Сохраняем профиль в localStorage
            localStorage.setItem('userProfile_' + username, JSON.stringify(user));

            // Сохраняем информацию о пользователе
            const userData = {
                username: user.username,
                registrationDate: user.registrationDate || new Date().toISOString(),
                profileComplete: true,
                profileName: user.profileName,
                profileNickname: user.profileNickname,
                hasPassword: true,
                isNewProfile: false
            };

            localStorage.setItem('user_' + username, JSON.stringify(userData));

            console.log(`✅ Данные пользователя ${username} синхронизированы с базы данных`);
            return true;
        }


        // Функция для получения списка пользователей без паролей
        function getUsersWithoutPasswords() {
            const users = [];
            const allUsers = Object.keys(localStorage).filter(key => key.startsWith('userProfile_'));

            allUsers.forEach(userKey => {
                const userId = userKey.replace('userProfile_', '');
                if (!moderatorPasswords[userId]) {
                    users.push(userId);
                }
            });

            return users;
        }
    </script>

    <script src="myscript.js"></script>
</body>

</html>